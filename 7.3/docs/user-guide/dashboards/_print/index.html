<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.95.0" />
<link rel="canonical" type="text/html" href="../../../../docs/user-guide/dashboards/">
<meta name="robots" content="noindex, nofollow">


<link rel="shortcut icon" href="../../../../favicons/favicon.ico" >
<link rel="apple-touch-icon" href="../../../../favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="../../../../favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="../../../../favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="../../../../favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="../../../../favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="../../../../favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="../../../../favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="../../../../favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="../../../../favicons/android-192x192.png" sizes="192x192">

<title>Dashboards | Stroom</title>
<meta name="description" content="The means of displaying and visualising the results of queries.
">
<meta property="og:title" content="Dashboards" />
<meta property="og:description" content="The means of displaying and visualising the results of queries.
" />
<meta property="og:type" content="website" />
<meta property="og:url" content="/docs/user-guide/dashboards/" /><meta property="og:site_name" content="Stroom" />

<meta itemprop="name" content="Dashboards">
<meta itemprop="description" content="The means of displaying and visualising the results of queries.
"><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Dashboards"/>
<meta name="twitter:description" content="The means of displaying and visualising the results of queries.
"/>




<link rel="preload" href="../../../../scss/main.min.9fdec29521123f20c0c5d73b521461eff1ea12340d13f28fc83fcf2bd60929a8.css" as="style">
<link href="../../../../scss/main.min.9fdec29521123f20c0c5d73b521461eff1ea12340d13f28fc83fcf2bd60929a8.css" rel="stylesheet" integrity="">


<script src='../../../../js/jquery-3.6.0.min.js'></script>


<script src='../../../../js/lunr.min.js'></script>
  
<link rel="stylesheet" href="../../../../css/prism.css"/>
<link rel="stylesheet" href="../../../../css/stroom-ui/icon-colours.css"/>
<link rel="stylesheet" href="../../../../css/stroom-ui/material_design_colors.css"/>
<link rel="stylesheet" href="../../../../css/stroom-ui/theme-root.css"/>




  </head>
  <body class="td-section">
    <header>
      <nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
  <a class="navbar-brand" href="../../../../"><span class="navbar-brand__logo navbar-logo"><svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="110.61089" height="30.000004" viewBox="0 0 88.488641 23.999957" id="svg2" inkscape:version="0.91 r13725" sodipodi:docname="logo.svg"><defs id="defs20"/><sodipodi:namedview pagecolor="#989898" bordercolor="#666666" borderopacity="1" objecttolerance="10" gridtolerance="10" guidetolerance="10" inkscape:pageopacity="0" inkscape:pageshadow="2" inkscape:window-width="1920" inkscape:window-height="1137" id="namedview18" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:zoom="5.5951814" inkscape:cx="55.451414" inkscape:cy="16.275348" inkscape:window-x="0" inkscape:window-y="0" inkscape:window-maximized="1" inkscape:current-layer="svg2"/><g id="g4150" style="opacity:.97000002" transform="matrix(0.03883584,0,0,0.03883584,0,-3.1155874e-4)"><path id="path6" d="M121.99991 205.98497C54.999958 205.98497.0 259.98493.0 327.98487c0 66.99994 54.999958 121.99989 121.99991 121.99989h167.99987c24.99998.0 44.99996 20.99998 44.99996 44.99996.0 24.99998-19.99998 44.99996-44.99996 44.99996H109.20929C65.984126 553.87219 27.100843 581.57313.01093599 617.98462H289.99978c66.99994.0 121.99991-54.99996 121.99991-122.9999.0-66.99994-54.99997-121.99989-121.99991-121.99989H121.99991c-24.999984.0-44.999969-19.99999-44.999969-44.99996.0-24.99998 19.999985-44.99996 44.999969-44.99996h228.79045c26.9905-35.88325 65.47093-63.18547 108.21554-76.99994H121.99991z" style="fill:#fff" inkscape:connector-curvature="0"/><path id="path8" d="M601.44485-.00077860649C572.6583 8.3697982 546.49491 22.822962 524.44491 41.902305V205.78969l.002.19528h-.002c-65.11 48e-5-123.03145 30.0199-160.74675 76.99994h160.74675v334.99971h76.99994V282.98491h144.85298c27.16134-36.05885 65.96411-63.39275 109.02184-76.99994H601.44485v-205.98574860649z" style="fill:#fff" inkscape:connector-curvature="0"/><path id="path10" d="m919.42586 205.98497c-113.99519.0-205.99537 92.00648-206.00296 205.99982-15e-5 68.67178.0 137.32749.0 205.99983h77.99994c-.012-68.6493.0176-137.46869.0-205.99983.0846-70.92785 57.05747-128.99988 128.00462-128.99988 5.28623.0 10.49823.32864 15.62183.95311 18.2219-24.51229 41.78461-45.0838 68.42501-60.15146-25.65065-11.43799-54.08662-17.80159-84.04684-17.80159z" style="fill:#fff" inkscape:connector-curvature="0"/><path id="path12" d="m1109.4153 205.98457c-113.99994.0-205.99983 91.99993-205.99983 205.99984.0 112.9999 91.99989 205.9998 205.99983 205.9998 114 0 205.9999-92.9999 205.9999-205.9998.0-113.99991-91.9999-205.99984-205.9999-205.99984zm0 333.99974c-70.9999.0-128.99994-56.99996-128.99994-127.9999.0-70.99995 58.00004-128.9999 128.99994-128.9999 71 0 128.9999 57.99995 128.9999 128.9999.0 70.99994-57.9999 127.9999-128.9999 127.9999z" style="fill:#fff" inkscape:connector-curvature="0"/><path id="path14" d="m1444.4737 205.98457c-113.9999.0-205.9998 91.99993-205.9998 205.99984.0 112.9999 91.9999 205.9998 205.9998 205.9998s205.9999-92.9999 205.9999-205.9998c0-113.99991-92-205.99984-205.9999-205.99984zm0 333.99974c-70.9999.0-128.9999-56.99996-128.9999-127.9999.0-70.99995 58-128.9999 128.9999-128.9999 71 0 128.9999 57.99995 128.9999 128.9999.0 70.99994-57.9999 127.9999-128.9999 127.9999z" style="fill:#fff" inkscape:connector-curvature="0"/><path id="path16" d="m1738.5308 379.98447c0-53 43-97 95.9999-97 53 0 97 44 97 97v237.9997h76.9999v-237.9997c0-53 43-97 96.9999-97 53 0 95.9999 44 95.9999 97v237.9997h77v-237.9997c0-96-77-173.9999-172.9999-173.9999-54.9999.0-103.9999 24.99998-135.9999 64.99995-31.9999-39.99997-79.9999-64.99995-134.9999-64.99995-95.9999.0-173.9998 77.9999-173.9998 173.9999v237.9997h77.9999z" style="fill:#fff" inkscape:connector-curvature="0"/></g></svg></span><span class="navbar-brand__name">Stroom</span></a>
  <div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
    <ul class="navbar-nav mt-2 mt-lg-0">
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="../../../../about/about/"><span>About</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link active" href="../../../../docs/"><span class="active">Documentation</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="../../../../releases/"><span>Releases Notes</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="../../../../community/"><span>Community</span></a>
      </li>
      <li class="nav-item dropdown mr-4 d-none d-lg-block">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	Stroom Version (7.3)
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
	
	
	
	<a class="dropdown-item" href="../../../../../">7.6 (Latest)</a>
	
	<a class="dropdown-item" href="../../../../../7.5">7.5</a>
	
	<a class="dropdown-item" href="../../../../../7.4">7.4</a>
	
	<a class="dropdown-item" href="../../../../">7.3</a>
	
	<a class="dropdown-item" href="../../../../../7.2">7.2</a>
	
	<a class="dropdown-item" href="../../../../../7.1">7.1</a>
	
	<a class="dropdown-item" href="../../../../../7.0">7.0</a>
	
	<a class="dropdown-item" href="../../../../../legacy">Legacy</a>
	
</div>
</li>
      </ul>
  </div>
  <div class="navbar-nav d-none d-lg-block">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="../../../../offline-search-index.0fb10b24f9b7dd45233d58e34ce664f6.json"
    data-offline-search-base-href="../../../../"
    data-offline-search-max-results="50"
  >
</div>

  </div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This is the multi-page printable view of this section.
<a href="#" onclick="print();return false;">Click here to print</a>.
</p><p>
<a href="../../../../docs/user-guide/dashboards/">Return to the regular view of this page</a>.
</p>
</div>



<h1 class="title">Dashboards</h1>
<div class="lead">The means of displaying and visualising the results of queries.</div>




    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-6b32fde0c74930062b1c105a8b60678a">Queries</a></li>


    
  
    
    
	
<li>2: <a href="#pg-2f221475c0cd4780dc719488032661ef">Dashboard Expressions</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>2.1: <a href="#pg-463f96d6924865dbc630fbbc558a8327">Aggregate Functions</a></li>


    
  
    
    
	
<li>2.2: <a href="#pg-986f3c29d197e8672c0987b7b0db112c">Cast Functions</a></li>


    
  
    
    
	
<li>2.3: <a href="#pg-7a0bf793e9e3b446255d75e512185200">Date Functions</a></li>


    
  
    
    
	
<li>2.4: <a href="#pg-96c7b8143cd6966fdf891df8863bd6c3">Link Functions</a></li>


    
  
    
    
	
<li>2.5: <a href="#pg-30cb3d86e655657b10b0b12c86e020ef">Logic Funtions</a></li>


    
  
    
    
	
<li>2.6: <a href="#pg-e55fadbf273fff783da5186a2d0c132e">Mathematics Functions</a></li>


    
  
    
    
	
<li>2.7: <a href="#pg-900d9753fc9c5756cc2d2d6024592e98">Selection Functions</a></li>


    
  
    
    
	
<li>2.8: <a href="#pg-bf3356630b2119a9da61618a438c1468">String Functions</a></li>


    
  
    
    
	
<li>2.9: <a href="#pg-31e6b218e404c55287e3e3d6fb6be1a1">Type Checking Functions</a></li>


    
  
    
    
	
<li>2.10: <a href="#pg-9684692ef069e48968553b5d53f673a5">URI Functions</a></li>


    
  
    
    
	
<li>2.11: <a href="#pg-d7f4cf2ecd821dd7e7d21e2be040e786">Value Functions</a></li>


    
  

    </ul>
    
  
    
    
	
<li>3: <a href="#pg-618daf953ef0af3ec9f9a33f14440a1d">Search Extraction</a></li>


    
  
    
    
	
<li>4: <a href="#pg-09d02ed663f35a71994cbc79c44f56f8">Dictionaries</a></li>


    
  
    
    
	
<li>5: <a href="#pg-bcfe35b40013cbccc4c70ea9442e8df8">Internal Links</a></li>


    
  
    
    
	
<li>6: <a href="#pg-6bd1ea76bcd94d10f9c39559a771c351">Direct URLs</a></li>


    
  
    
    
	
<li>7: <a href="#pg-a17d80190d0bd1163a3748e164c8f674">Elasticsearch</a></li>


    
  
    
    
	
<li>8: <a href="#pg-93792f59f3e7ed037cd894c9ce091be6">Stroom Query Language</a></li>


    
  

    </ul>


<div class="content">
      
</div>
</div>


  
  
  
  

  
  

  
    
    
	
    



<div class="td-content" style="--base-section-num: '1.'; ">
    
  <h1 id="pg-6b32fde0c74930062b1c105a8b60678a">1 - Queries</h1>
    <div class="lead">How to query the data in Stroom.</div>
	<p>Dashboard queries are created with the query expression builder. The expression builder allows for complex boolean logic to be created across multiple index fields. The way in which different index fields may be queried depends on the type of data that the index field contains.</p>
<h2 id="date-time-fields">Date Time Fields</h2>
<p>Time fields can be queried for times equal, greater than, greater than or equal, less than, less than or equal or between two times.</p>
<p>Times can be specified in two ways:</p>
<ul>
<li>
<p>Absolute times</p>
</li>
<li>
<p>Relative times</p>
</li>
</ul>
<h3 id="absolute-times">Absolute Times</h3>
<p>An absolute time is specified in ISO 8601 date time format, e.g.  <code>2016-01-23T12:34:11.844Z</code></p>
<h3 id="relative-times">Relative Times</h3>
<p>In addition to absolute times it is possible to specify times using expressions. Relative time expressions create a date time that is relative to the execution time of the query. Supported expressons are as follows:</p>
<ul>
<li>
<p>now() - The current execution time of the query.</p>
</li>
<li>
<p>second() - The current execution time of the query rounded down to the nearest second.</p>
</li>
<li>
<p>minute() - The current execution time of the query rounded down to the nearest minute.</p>
</li>
<li>
<p>hour() - The current execution time of the query rounded down to the nearest hour.</p>
</li>
<li>
<p>day() - The current execution time of the query rounded down to the nearest day.</p>
</li>
<li>
<p>week() - The current execution time of the query rounded down to the first day of the week (Monday).</p>
</li>
<li>
<p>month() - The current execution time of the query rounded down to the start of the current month.</p>
</li>
<li>
<p>year() - The current execution time of the query rounded down to the start of the current year.</p>
</li>
</ul>
<h3 id="addingsubtracting-durations">Adding/Subtracting Durations</h3>
<p>With relative times it is possible to add or subtract durations so that queries can be constructed to provide for example, the last week of data, the last hour of data etc.</p>
<p>To add/subtract a duration from a query term the duration is simply appended after the relative time, e.g.</p>
<p><code>now() + 2d</code></p>
<p>Multiple durations can be combined in the expression, e.g.</p>
<p><code>now() + 2d - 10h</code></p>
<p><code>now() + 2w - 1d10h</code></p>
<p>Durations consist of a number and duration unit. Supported duration units are:</p>
<ul>
<li>
<p>s - Seconds</p>
</li>
<li>
<p>m - Minutes</p>
</li>
<li>
<p>h - Hours</p>
</li>
<li>
<p>d - Days</p>
</li>
<li>
<p>w - Weeks</p>
</li>
<li>
<p>M - Months</p>
</li>
<li>
<p>y - Years</p>
</li>
</ul>
<p>Using these durations a query to get the last weeks data could be as follows:</p>
<p><code>between now() - 1w and now()</code></p>
<p>Or midnight a week ago to midnight today:</p>
<p><code>between day() - 1w and day()</code></p>
<p>Or if you just wanted data for the week so far:</p>
<p><code>greater than week()</code></p>
<p>Or all data for the previous year:</p>
<p><code>between year() - 1y and year()</code></p>
<p>Or this year so far:</p>
<p><code>greater than year()</code></p>

</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '2.'; page-break-before: always">
    
  <h1 id="pg-2f221475c0cd4780dc719488032661ef">2 - Dashboard Expressions</h1>
    <div class="lead">Expression language used to manipulate data on Stroom Dashboards.</div>
	<p>Expressions can be used to manipulate data on Stroom Dashboards.</p>
<p>Each function has a name, and some have additional aliases.</p>
<p>In some cases, functions can be nested. The return value for some functions being used
as the arguments for other functions.</p>
<p>The arguments to functions can either be other functions, literal values, or they can refer to fields on the input data using the field reference <code>${val}</code> syntax.</p>
<div class="td-card-deck card-deck mb-4">

  <div class="td-card card mb-4">
  
    <div class="card-header">
      
        Aggregate Functions
      
    </div>
  
  <div class="card-body">
    
    
    
      <p class="card-text">
        
          <ul>
<li><a href="aggregate#average">Average</a></li>
<li><a href="aggregate#count">Count</a></li>
<li><a href="aggregate#count-groups">Count Groups</a></li>
<li><a href="aggregate#count-unique">Count Unique</a></li>
<li><a href="aggregate#distinct">Distinct</a></li>
<li><a href="aggregate#joining">Joining</a></li>
<li><a href="aggregate#max">Max</a></li>
<li><a href="aggregate#min">Min</a></li>
<li><a href="aggregate#standard-deviation">Standard Deviation</a></li>
<li><a href="aggregate#sum">Sum</a></li>
<li><a href="aggregate#variance">Variance</a></li>
</ul>

        
      </p>
    
  </div>
  
</div>


  <div class="td-card card mb-4">
  
    <div class="card-header">
      
        String Functions
      
    </div>
  
  <div class="card-body">
    
    
    
      <p class="card-text">
        
          <ul>
<li><a href="string#concat">Concat</a></li>
<li><a href="string#current-user">Current User</a></li>
<li><a href="string#decode">Decode</a></li>
<li><a href="string#decodeurl">DecodeUrl</a></li>
<li><a href="string#encodeurl">EncodeUrl</a></li>
<li><a href="string#exclude">Exclude</a></li>
<li><a href="string#hash">Hash</a></li>
<li><a href="string#include">Include</a></li>
<li><a href="string#index-of">Index Of</a></li>
<li><a href="string#last-index-of">Last Index Of</a></li>
<li><a href="string#lower-case">Lower Case</a></li>
<li><a href="string#match">Match</a></li>
<li><a href="string#query-param">Query Param</a></li>
<li><a href="string#query-params">Query Params</a></li>
<li><a href="string#replace">Replace</a></li>
<li><a href="string#string-length">String Length</a></li>
<li><a href="string#substring">Substring</a></li>
<li><a href="string#substring-after">Substring After</a></li>
<li><a href="string#substring-before">Substring Before</a></li>
<li><a href="string#upper-case">Upper Case</a></li>
</ul>

        
      </p>
    
  </div>
  
</div>


  <div class="td-card card mb-4">
  
    <div class="card-header">
      
        Mathematics Functions
      
    </div>
  
  <div class="card-body">
    
    
    
      <p class="card-text">
        
          <ul>
<li><a href="mathematics#add">Add</a></li>
<li><a href="mathematics#average">Average</a></li>
<li><a href="mathematics#divide">Divide</a></li>
<li><a href="mathematics#max">Max</a></li>
<li><a href="mathematics#min">Min</a></li>
<li><a href="mathematics#modulo">Modulo</a></li>
<li><a href="mathematics#multiply">Multiply</a></li>
<li><a href="mathematics#negate">Negate</a></li>
<li><a href="mathematics#power">Power</a></li>
<li><a href="mathematics#random">Random</a></li>
<li><a href="mathematics#subtract">Subtract</a></li>
<li><a href="mathematics#sum">Sum</a></li>
</ul>

        
      </p>
    
  </div>
  
</div>


  <div class="td-card card mb-4">
  
    <div class="card-header">
      
        Type Checking Functions
      
    </div>
  
  <div class="card-body">
    
    
    
      <p class="card-text">
        
          <ul>
<li><a href="type-checking#is-boolean">Is Boolean</a></li>
<li><a href="type-checking#is-double">Is Double</a></li>
<li><a href="type-checking#is-error">Is Error</a></li>
<li><a href="type-checking#is-integer">Is Integer</a></li>
<li><a href="type-checking#is-long">Is Long</a></li>
<li><a href="type-checking#is-null">Is Null</a></li>
<li><a href="type-checking#is-number">Is Number</a></li>
<li><a href="type-checking#is-string">Is String</a></li>
<li><a href="type-checking#is-value">Is Value</a></li>
<li><a href="type-checking#type-of">Type Of</a></li>
</ul>

        
      </p>
    
  </div>
  
</div>


</div>
<div class="td-card-deck card-deck mb-4">
  <div class="td-card card mb-4">
  
    <div class="card-header">
      
        Link Functions
      
    </div>
  
  <div class="card-body">
    
    
    
      <p class="card-text">
        
          <ul>
<li><a href="link#annotation">Annotation</a></li>
<li><a href="link#dashboard">Dashboard</a></li>
<li><a href="link#data">Data</a></li>
<li><a href="link#link">Link</a></li>
<li><a href="link#stepping">Stepping</a></li>
</ul>

        
      </p>
    
  </div>
  
</div>


  <div class="td-card card mb-4">
  
    <div class="card-header">
      
        Cast Functions
      
    </div>
  
  <div class="card-body">
    
    
    
      <p class="card-text">
        
          <ul>
<li><a href="cast#to-boolean">To Boolean</a></li>
<li><a href="cast#to-double">To Double</a></li>
<li><a href="cast#to-integer">To Integer</a></li>
<li><a href="cast#to-long">To Long</a></li>
<li><a href="cast#to-string">To String</a></li>
</ul>

        
      </p>
    
  </div>
  
</div>


  <div class="td-card card mb-4">
  
    <div class="card-header">
      
        Date Functions
      
    </div>
  
  <div class="card-body">
    
    
    
      <p class="card-text">
        
          <ul>
<li><a href="date#format-date">Format Date</a></li>
<li><a href="date#parse-date">Parse Date</a></li>
<li><a href="date#ceiling-yearmonthdayhourminutesecond">Ceiling Functions</a></li>
<li><a href="date#floor-yearmonthdayhourminutesecond">Floor Functions</a></li>
<li><a href="date#round-yearmonthdayhourminutesecond">Round Functions</a></li>
</ul>

        
      </p>
    
  </div>
  
</div>


  <div class="td-card card mb-4">
  
    <div class="card-header">
      
        Logic Functions
      
    </div>
  
  <div class="card-body">
    
    
    
      <p class="card-text">
        
          <ul>
<li><a href="logic#equals">Equals</a></li>
<li><a href="logic#greater-than">Greater Than</a></li>
<li><a href="logic#greater-than-or-equal-to">Greater Than or Equal To</a></li>
<li><a href="logic#if">If</a></li>
<li><a href="logic#less-than">Less Than</a></li>
<li><a href="logic#less-than-or-equal-to">Less Than or Equal To</a></li>
<li><a href="logic#not">Not</a></li>
</ul>

        
      </p>
    
  </div>
  
</div>


</div>
<div class="td-card-deck card-deck mb-4">

  <div class="td-card card mb-4">
  
    <div class="card-header">
      
        Rounding Functions
      
    </div>
  
  <div class="card-body">
    
    
    
      <p class="card-text">
        
          <ul>
<li><a href="rounding#ceiling">Ceiling</a></li>
<li><a href="rounding#floor">Floor</a></li>
<li><a href="rounding#round">Round</a></li>
</ul>

        
      </p>
    
  </div>
  
</div>


  <div class="td-card card mb-4">
  
    <div class="card-header">
      
        Selection Functions
      
    </div>
  
  <div class="card-body">
    
    
    
      <p class="card-text">
        
          <ul>
<li><a href="selection#any">Any</a></li>
<li><a href="selection#bottom">Bottom</a></li>
<li><a href="selection#first">First</a></li>
<li><a href="selection#last">Last</a></li>
<li><a href="selection#nth">Nth</a></li>
<li><a href="selection#top">Top</a></li>
</ul>

        
      </p>
    
  </div>
  
</div>


  <div class="td-card card mb-4">
  
    <div class="card-header">
      
        URI Functions
      
    </div>
  
  <div class="card-body">
    
    
    
      <p class="card-text">
        
          <ul>
<li><a href="uri#extractauthorityfromuri">extractAuthorityFromUri</a></li>
<li><a href="uri#extractfragmentfromuri">extractFragmentFromUri</a></li>
<li><a href="uri#extracthostfromuri">extractHostFromUri</a></li>
<li><a href="uri#extractpathfromuri">extractPathFromUri</a></li>
<li><a href="uri#extractportfromuri">extractPortFromUri</a></li>
<li><a href="uri#extractqueryfromuri">extractQueryFromUri</a></li>
<li><a href="uri#extractschemefromuri">extractSchemeFromUri</a></li>
<li><a href="uri#extractschemespecificpartfromuri">extractSchemeSpecificPartFromUri</a></li>
<li><a href="uri#extractuserinfofromuri">extractUserInfoFromUri</a></li>
</ul>

        
      </p>
    
  </div>
  
</div>


  <div class="td-card card mb-4">
  
    <div class="card-header">
      
        Value Functions
      
    </div>
  
  <div class="card-body">
    
    
    
      <p class="card-text">
        
          <ul>
<li><a href="value#err">Err</a></li>
<li><a href="value#false">False</a></li>
<li><a href="value#null">Null</a></li>
<li><a href="value#true">True</a></li>
</ul>

        
      </p>
    
  </div>
  
</div>


</div>

</div>




    
      
  
  
  
  

  
  

  
    
    
	
    



<div class="td-content" style="--base-section-num: '2.1.'; page-break-before: always">
    
  <h1 id="pg-463f96d6924865dbc630fbbc558a8327">2.1 - Aggregate Functions</h1>
    <div class="lead">Functions that produce aggregates over multiple data points.</div>
	<p>Aggregate functions require that the dashboard columns without aggregate functions have a grouping level applied.
The aggregate function will then be evaluated against the values in the group.</p>
<h2 id="average">Average</h2>
<p>Takes an average value of the arguments</p>
<pre><code class="language-clike">average(arg)
mean(arg)
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">average(${val})
${val} = [10, 20, 30, 40]
&gt; 25
</code></pre>
<pre><code class="language-clike">mean(${val})
${val} = [10, 20, 30, 40]
&gt; 25
</code></pre>
<h2 id="count">Count</h2>
<p>Counts the number of records that are passed through it. Doesn&rsquo;t take any notice of the values of any fields.</p>
<pre><code class="language-clike">count()
</code></pre>
<p>Example</p>
<pre><code class="language-clike">Supplying 3 values...

count()
&gt; 3
</code></pre>
<h2 id="count-groups">Count Groups</h2>
<p>This is used to count the number of unique values where there are multiple group levels.
For Example, a data set grouped as follows</p>
<ol>
<li>Group by Name</li>
<li>Group by Type</li>
</ol>
<p>A groupCount could be used to count the number of distinct values of &rsquo;type&rsquo; for each value of &rsquo;name'</p>
<h2 id="count-unique">Count Unique</h2>
<p>This is used to count the number of unique values passed to the function where grouping is used to aggregate values in other columns.
For Example, a data set grouped as follows</p>
<ol>
<li>Group by Name</li>
<li>Group by Type</li>
</ol>
<p><code>countUnique()</code> could be used to count the number of distinct values of &rsquo;type&rsquo; for each value of &rsquo;name'</p>
<p>Example</p>
<pre><code class="language-clike">countUnique(${val})
${val} = ['bill', 'bob', 'fred', 'bill']
&gt; 3
</code></pre>
<h2 id="distinct">Distinct</h2>
<p>Concatenates all distinct (unique) values together into a single string.
Works in the same way as <a href="#joining"><code>joining()</code></a> except that it discards duplicate values.
Values are concatenated in the order that they are given to the function.
If a delimiter is supplied then the delimiter is placed between each concatenated string.
If a limit is supplied then it will only concatenate up to limit values.</p>
<pre><code class="language-clike">distinct(values)
distinct(values, delimiter)
distinct(values, delimiter, limit)
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">distinct(${val}, ', ')
${val} = ['bill', 'bill', 'bob', 'fred', 'bill']
&gt; 'bill, bob, fred'
</code></pre>
<pre><code class="language-clike">distinct(${val}, '|', 2)
${val} = ['bill', 'bill', 'bob', 'fred', 'bill']
&gt; 'bill|bob'
</code></pre>

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">See Also</h4>


    <p><a href="../../../../docs/user-guide/dashboards/expressions/selection/">Selection Functions</a> that work in a similar way to <code>distinct()</code>.</p>


</div>


<h2 id="joining">Joining</h2>
<p>Concatenates all values together into a single string.
Works in the same way as <a href="#joining"><code>distinct()</code></a> except that duplicate values are included.
Values are concatenated in the order that they are given to the function.
If a delimiter is supplied then the delimiter is placed between each concatenated string.
If a limit is supplied then it will only concatenate up to limit values.</p>
<pre><code class="language-clike">joining(values)
joining(values, delimiter)
joining(values, delimiter, limit)
</code></pre>
<p>Example</p>
<pre><code class="language-clike">joining(${val}, ', ')
${val} = ['bill', 'bob', 'fred', 'bill']
&gt; 'bill, bob, fred, bill'
</code></pre>

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">See Also</h4>


    <p><a href="../../../../docs/user-guide/dashboards/expressions/selection/">Selection Functions</a> that work in a similar way to <code>joining()</code>.</p>


</div>


<h2 id="max">Max</h2>
<p>Determines the maximum value given in the args.</p>
<pre><code class="language-clike">max(arg)
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">max(${val})
${val} = [100, 30, 45, 109]
&gt; 109
</code></pre>
<pre><code class="language-clike"># They can be nested
max(max(${val}), 40, 67, 89)
${val} = [20, 1002]
&gt; 1002
</code></pre>
<h2 id="min">Min</h2>
<p>Determines the minimum value given in the args.</p>
<pre><code class="language-clike">min(arg)
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">min(${val})
${val} = [100, 30, 45, 109]
&gt; 30
</code></pre>
<pre><code class="language-clike"># They can be nested
min(max(${val}), 40, 67, 89)
${val} = [20, 1002]
&gt; 20
</code></pre>
<h2 id="stdev-standard-deviation">StDev (Standard Deviation)</h2>
<p>Calculate the standard deviation for a set of input values.</p>
<pre><code class="language-clike">stDev(arg)
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">round(stDev(${val}))
${val} = [600, 470, 170, 430, 300]
&gt; 147
</code></pre>
<h2 id="sum">Sum</h2>
<p>Sums all the arguments together</p>
<pre><code class="language-clike">sum(arg)
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">sum(${val})
${val} = [89, 12, 3, 45]
&gt; 149
</code></pre>
<h2 id="variance">Variance</h2>
<p>Calculate the variance of a set of input values.</p>
<pre><code class="language-clike">variance(arg)
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">variance(${val})
${val} = [600, 470, 170, 430, 300]
&gt; 21704
</code></pre>

</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '2.2.'; page-break-before: always">
    
  <h1 id="pg-986f3c29d197e8672c0987b7b0db112c">2.2 - Cast Functions</h1>
    <div class="lead">A set of functions for converting between different data types or for working with data types.</div>
	<h2 id="to-boolean">To Boolean</h2>
<p>Attempts to convert the passed value to a <em>boolean</em> data type.</p>
<pre><code class="language-clike">toBoolean(arg1)
</code></pre>
<p>Examples:</p>
<pre><code class="language-clike">toBoolean(1)
&gt; true
toBoolean(0)
&gt; false
toBoolean('true')
&gt; true
toBoolean('false')
&gt; false
</code></pre>
<h2 id="to-double">To Double</h2>
<p>Attempts to convert the passed value to a <em>double</em> data type.</p>
<pre><code class="language-clike">toDouble(arg1)
</code></pre>
<p>Examples:</p>
<pre><code class="language-clike">toDouble('1.2')
&gt; 1.2
</code></pre>
<h2 id="to-integer">To Integer</h2>
<p>Attempts to convert the passed value to a <em>integer</em> data type.</p>
<pre><code class="language-clike">toInteger(arg1)
</code></pre>
<p>Examples:</p>
<pre><code class="language-clike">toInteger('1')
&gt; 1
</code></pre>
<h2 id="to-long">To Long</h2>
<p>Attempts to convert the passed value to a <em>long</em> data type.</p>
<pre><code class="language-clike">toLong(arg1)
</code></pre>
<p>Examples:</p>
<pre><code class="language-clike">toLong('1')
&gt; 1
</code></pre>
<h2 id="to-string">To String</h2>
<p>Attempts to convert the passed value to a <em>string</em> data type.</p>
<pre><code class="language-clike">toString(arg1)
</code></pre>
<p>Examples:</p>
<pre><code class="language-clike">toString(1.2)
&gt; '1.2'
</code></pre>

</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '2.3.'; page-break-before: always">
    
  <h1 id="pg-7a0bf793e9e3b446255d75e512185200">2.3 - Date Functions</h1>
    <div class="lead">Functions for manipulating dates and times.</div>
	<h2 id="parse-date">Parse Date</h2>
<p>Parse a date and return a long number of milliseconds since the epoch.</p>
<pre><code class="language-clike">parseDate(aString)
parseDate(aString, pattern)
parseDate(aString, pattern, timeZone)
</code></pre>
<p>Example</p>
<pre><code class="language-clike">parseDate('2014 02 22', 'yyyy MM dd', '+0400')
&gt; 1393012800000
</code></pre>
<h2 id="format-date">Format Date</h2>
<p>Format a date supplied as milliseconds since the epoch.</p>
<pre><code class="language-clike">formatDate(aLong)
formatDate(aLong, pattern)
formatDate(aLong, pattern, timeZone)
</code></pre>
<p>Example</p>
<pre><code class="language-clike">formatDate(1393071132888, 'yyyy MM dd', '+1200')
&gt; '2014 02 23'
</code></pre>
<h2 id="ceiling-yearmonthdayhourminutesecond">Ceiling Year/Month/Day/Hour/Minute/Second</h2>
<pre><code class="language-clike">ceilingYear(args...)
ceilingMonth(args...)
ceilingDay(args...)
ceilingHour(args...)
ceilingMinute(args...)
ceilingSecond(args...)
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">ceilingSecond(&quot;2014-02-22T12:12:12.888Z&quot;
&gt; &quot;2014-02-22T12:12:13.000Z&quot;
ceilingMinute(&quot;2014-02-22T12:12:12.888Z&quot;
&gt; &quot;2014-02-22T12:13:00.000Z&quot;
ceilingHour(&quot;2014-02-22T12:12:12.888Z&quot;
&gt; &quot;2014-02-22T13:00:00.000Z&quot;
ceilingDay(&quot;2014-02-22T12:12:12.888Z&quot;
&gt; &quot;2014-02-23T00:00:00.000Z&quot;
ceilingMonth(&quot;2014-02-22T12:12:12.888Z&quot;
&gt; &quot;2014-03-01T00:00:00.000Z&quot;
ceilingYear(&quot;2014-02-22T12:12:12.888Z&quot;
&gt; &quot;2015-01-01T00:00:00.000Z&quot;
</code></pre>
<h2 id="floor-yearmonthdayhourminutesecond">Floor Year/Month/Day/Hour/Minute/Second</h2>
<pre><code class="language-clike">floorYear(args...)
floorMonth(args...)
floorDay(args...)
floorHour(args...)
floorMinute(args...)
floorSecond(args...)
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">floorSecond(&quot;2014-02-22T12:12:12.888Z&quot;
&gt; &quot;2014-02-22T12:12:12.000Z&quot;
floorMinute(&quot;2014-02-22T12:12:12.888Z&quot;
&gt; &quot;2014-02-22T12:12:00.000Z&quot;
floorHour(&quot;2014-02-22T12:12:12.888Z&quot;
&gt; 2014-02-22T12:00:00.000Z&quot;
floorDay(&quot;2014-02-22T12:12:12.888Z&quot;
&gt; &quot;2014-02-22T00:00:00.000Z&quot;
floorMonth(&quot;2014-02-22T12:12:12.888Z&quot;
&gt; &quot;2014-02-01T00:00:00.000Z&quot;
floorYear(&quot;2014-02-22T12:12:12.888Z&quot;
&gt; &quot;2014-01-01T00:00:00.000Z&quot;
</code></pre>
<h2 id="round-yearmonthdayhourminutesecond">Round Year/Month/Day/Hour/Minute/Second</h2>
<pre><code class="language-clike">roundYear(args...)
roundMonth(args...)
roundDay(args...)
roundHour(args...)
roundMinute(args...)
roundSecond(args...)
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">roundSecond(&quot;2014-02-22T12:12:12.888Z&quot;)
&gt; &quot;2014-02-22T12:12:13.000Z&quot;
roundMinute(&quot;2014-02-22T12:12:12.888Z&quot;)
&gt; &quot;2014-02-22T12:12:00.000Z&quot;
roundHour(&quot;2014-02-22T12:12:12.888Z&quot;
&gt; &quot;2014-02-22T12:00:00.000Z&quot;
roundDay(&quot;2014-02-22T12:12:12.888Z&quot;
&gt; &quot;2014-02-23T00:00:00.000Z&quot;
roundMonth(&quot;2014-02-22T12:12:12.888Z&quot;
&gt; &quot;2014-03-01T00:00:00.000Z&quot;
roundYear(&quot;2014-02-22T12:12:12.888Z&quot;
&gt; &quot;2014-01-01T00:00:00.000Z&quot;
</code></pre>

</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '2.4.'; page-break-before: always">
    
  <h1 id="pg-96c7b8143cd6966fdf891df8863bd6c3">2.4 - Link Functions</h1>
    <div class="lead">Functions for linking to other screens in Stroom and/or to particular sets of data.</div>
	<p>Links can be inserted into dashboard tables using the <code>link</code> function.
All link types described in <a href="../../../../docs/user-guide/dashboards/internal-links/">Internal Links</a> can be added to dashboard tables using the <code>link</code> function.
In addition to the <code>link</code> function there are convenience functions such as <code>annotation</code>, <code>dashboard</code>, <code>data</code> and <code>stepping</code> that make it easier to supply the required link parameters.</p>
<h2 id="annotation">Annotation</h2>

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">See Also</h4>


    <p><a href="../../../../docs/user-guide/dashboards/internal-links/#annotation">Annotation Links</a>.</p>


</div>


<p>A helper function to make forming links to annotations easier than using <a href="#link">Link</a>.
The Annotation function allows you to create a link to open the Annotation editor, either to view an existing annotation or to begin creating one with pre-populated values.</p>
<pre><code class="language-clike">annotation(text, annotationId)
annotation(text, annotationId, [streamId, eventId, title, subject, status, assignedTo, comment])
</code></pre>
<p>If you provide just the <em>text</em> and an <em>annotationId</em> then it will produce a link that opens an existing annotation with the supplied ID in the Annotation Edit dialog.</p>
<p>Example</p>
<pre><code class="language-clike">annotation('Open annotation', ${annotation:Id})
&gt; [Open annotation](?annotationId=1234){annotation}
annotation('Create annotation', '', ${StreamId}, ${EventId})
&gt; [Create annotation](?annotationId=&amp;streamId=1234&amp;eventId=45){annotation}
annotation('Escalate', '', ${StreamId}, ${EventId}, 'Escalation', 'Triage required')
&gt; [Escalate](?annotationId=&amp;streamId=1234&amp;eventId=45&amp;title=Escalation&amp;subject=Triage%20required){annotation}
</code></pre>
<p>If you don&rsquo;t supply an <em>annotationId</em> then the link will open the Annotation Edit dialog pre-populated with the optional arguments so that an annotation can be created.
If the <em>annotationId</em> is not provided then you must provide a <em>streamId</em> and an <em>eventId</em>.
If you don&rsquo;t need to pre-populate a value then you can use <code>''</code> or <code>null()</code> instead.</p>
<p>Example</p>
<pre><code class="language-clike">annotation('Create suspect event annotation', null(), 123, 456, 'Suspect Event', null(), 'assigned', 'jbloggs')
&gt; [Create suspect event annotation](?streamId=123&amp;eventId=456&amp;title=Suspect%20Event&amp;assignedTo=jbloggs){annotation}
</code></pre>
<h2 id="dashboard">Dashboard</h2>

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">See Also</h4>


    <p><a href="../../../../docs/user-guide/dashboards/internal-links/#dashboard">Dashboard Links</a>.</p>


</div>


<p>A helper function to make forming links to dashboards easier than using <a href="#link">Link</a>.</p>
<pre><code class="language-clike">dashboard(text, uuid)
dashboard(text, uuid, params)
</code></pre>
<p>Example</p>
<pre><code class="language-clike">dashboard('Click Here','e177cf16-da6c-4c7d-a19c-09a201f5a2da')
&gt; [Click Here](?uuid=e177cf16-da6c-4c7d-a19c-09a201f5a2da){dashboard}
dashboard('Click Here','e177cf16-da6c-4c7d-a19c-09a201f5a2da', 'userId=user1')
&gt; [Click Here](?uuid=e177cf16-da6c-4c7d-a19c-09a201f5a2da&amp;params=userId%3Duser1){dashboard}
</code></pre>
<h2 id="data">Data</h2>

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">See Also</h4>


    <p><a href="../../../../docs/user-guide/dashboards/internal-links/#data">Data Links</a>.</p>


</div>


<p>A helper function to make forming links to data easier than using <a href="#link">Link</a>.</p>
<pre><code class="language-clike">data(text, id, partNo, [recordNo, lineFrom, colFrom, lineTo, colTo, viewType, displayType])
</code></pre>
<p>Example</p>
<pre><code class="language-clike">data('Quick View', ${StreamId}, 1)
&gt; [Quick View]?id=1234&amp;&amp;partNo=1)
</code></pre>
<p>Example of non-segmented raw data section, viewed un-formatted in a stroom tab:</p>
<pre><code class="language-clike">data('View Raw', ${StreamId}, ${partNo}, null(), 5, 1, 5, 342, 'source', 'tab')
</code></pre>
<p>Example of a single record (event) from a segmented stream, viewed formatted in a popup dialog:</p>
<pre><code class="language-clike">data('View Cooked', ${StreamId}, 1, ${eventId})
</code></pre>
<p>Example of a single record (event) from a segmented stream, viewed formatted in a stroom tab:</p>
<pre><code class="language-clike">data('View Cooked', ${StreamId}, 1, ${eventId}, null(), null(), null(), null(), 'preview', 'tab')
</code></pre>
<h2 id="link">Link</h2>

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">See Also</h4>


    <p><a href="../../../../docs/user-guide/dashboards/internal-links/">Internal Links</a>.</p>


</div>


<p>Create a string that represents a hyperlink for display in a dashboard table.</p>
<pre><code class="language-clike">link(url)
link(text, url)
link(text, url, type)
</code></pre>
<p>Example</p>
<pre><code class="language-clike">link('https://www.somehost.com/somepath')
&gt; [https://www.somehost.com/somepath](https://www.somehost.com/somepath)
link('Click Here','https://www.somehost.com/somepath')
&gt; [Click Here](https://www.somehost.com/somepath)
link('Click Here','https://www.somehost.com/somepath', 'dialog')
&gt; [Click Here](https://www.somehost.com/somepath){dialog}
link('Click Here','https://www.somehost.com/somepath', 'dialog|Dialog Title')
&gt; [Click Here](https://www.somehost.com/somepath){dialog|Dialog Title}
</code></pre>
<h2 id="stepping">Stepping</h2>

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">See Also</h4>


    <p><a href="../../../../docs/user-guide/dashboards/internal-links/#stepping">Stepping Links</a>.</p>


</div>


<p>Open the <em>Stepping</em> tab for the requested data source.</p>
<pre><code class="language-clike">stepping(text, id)
stepping(text, id, partNo)
stepping(text, id, partNo, recordNo)
</code></pre>
<p>Example</p>
<pre><code class="language-clike">stepping('Click here to step',${StreamId})
&gt; [Click here to step](?id=1)
</code></pre>

</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '2.5.'; page-break-before: always">
    
  <h1 id="pg-30cb3d86e655657b10b0b12c86e020ef">2.5 - Logic Funtions</h1>
    
	<h2 id="equals">Equals</h2>
<p>Evaluates if arg1 is equal to arg2</p>
<pre><code class="language-clike">arg1 = arg2
equals(arg1, arg2)
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">'foo' = 'bar'
&gt; false
'foo' = 'foo'
&gt; true
51 = 50
&gt; false
50 = 50
&gt; true

equals('foo', 'bar')
&gt; false
equals('foo', 'foo')
&gt; true
equals(51, 50)
&gt; false
equals(50, 50)
&gt; true
</code></pre>
<p>Note that <code>equals</code> cannot be applied to <code>null</code> and <code>error</code> values, e.g. <code>x=null()</code> or <code>x=err()</code>. The <a href="../../../../docs/user-guide/dashboards/expressions/type-checking/#is-null"><code>isNull()</code></a> and <a href="../../../../docs/user-guide/dashboards/expressions/type-checking/#is-error"><code>isError()</code></a> functions must be used instead.</p>
<h2 id="greater-than">Greater Than</h2>
<p>Evaluates if arg1 is greater than to arg2</p>
<pre><code class="language-clike">arg1 &gt; arg2
greaterThan(arg1, arg2)
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">51 &gt; 50
&gt; true
50 &gt; 50
&gt; false
49 &gt; 50
&gt; false

greaterThan(51, 50)
&gt; true
greaterThan(50, 50)
&gt; false
greaterThan(49, 50)
&gt; false
</code></pre>
<h2 id="greater-than-or-equal-to">Greater Than or Equal To</h2>
<p>Evaluates if arg1 is greater than or equal to arg2</p>
<pre><code class="language-clike">arg1 &gt;= arg2
greaterThanOrEqualTo(arg1, arg2)
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">51 &gt;= 50
&gt; true
50 &gt;= 50
&gt; true
49 &gt;= 50
&gt; false

greaterThanOrEqualTo(51, 50)
&gt; true
greaterThanOrEqualTo(50, 50)
&gt; true
greaterThanOrEqualTo(49, 50)
&gt; false
</code></pre>
<h2 id="if">If</h2>
<p>Evaluates the supplied boolean condition and returns one value if true or another if false</p>
<pre><code class="language-clike">if(expression, trueReturnValue, falseReturnValue)
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">if(5 &lt; 10, 'foo', 'bar')
&gt; 'foo'
if(5 &gt; 10, 'foo', 'bar')
&gt; 'bar'
if(isNull(null()), 'foo', 'bar')
&gt; 'foo'
</code></pre>
<h2 id="less-than">Less Than</h2>
<p>Evaluates if arg1 is less than to arg2</p>
<pre><code class="language-clike">arg1 &lt; arg2
lessThan(arg1, arg2)
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">51 &lt; 50
&gt; false
50 &lt; 50
&gt; false
49 &lt; 50
&gt; true

lessThan(51, 50)
&gt; false
lessThan(50, 50)
&gt; false
lessThan(49, 50)
&gt; true
</code></pre>
<h2 id="less-than-or-equal-to">Less Than or Equal To</h2>
<p>Evaluates if arg1 is less than or equal to arg2</p>
<pre><code class="language-clike">arg1 &lt;= arg2
lessThanOrEqualTo(arg1, arg2)
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">51 &lt;= 50
&gt; false
50 &lt;= 50
&gt; true
49 &lt;= 50
&gt; true

lessThanOrEqualTo(51, 50)
&gt; false
lessThanOrEqualTo(50, 50)
&gt; true
lessThanOrEqualTo(49, 50)
&gt; true
</code></pre>
<h2 id="and">And</h2>
<p>If all supplied arguments evaluate to true then return true, else false.</p>
<pre><code class="language-clike">and(booleanValue, booleanValue)
</code></pre>
<h2 id="or">Or</h2>
<p>If one or more of the supplied arguments evaluate to true then return true, else false.</p>
<pre><code class="language-clike">or(booleanValue, booleanValue)
</code></pre>
<h2 id="not">Not</h2>
<p>Inverts boolean values making true, false etc.</p>
<pre><code class="language-clike">not(booleanValue)
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">not(5 &gt; 10)
&gt; true
not(5 = 5)
&gt; false
not(false())
&gt; true
</code></pre>

</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '2.6.'; page-break-before: always">
    
  <h1 id="pg-e55fadbf273fff783da5186a2d0c132e">2.6 - Mathematics Functions</h1>
    <div class="lead">Standard mathematical functions, such as add subtract, multiple, etc.</div>
	<h2 id="add">Add</h2>
<pre><code class="language-clike">arg1 + arg2
</code></pre>
<p>Or reduce the args by successive addition</p>
<pre><code class="language-clike">add(args...)
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">34 + 9
&gt; 43
add(45, 6, 72)
&gt; 123
</code></pre>
<h2 id="divide">Divide</h2>
<p>Divides arg1 by arg2</p>
<pre><code class="language-clike">arg1 / arg2
</code></pre>
<p>Or reduce the args by successive division</p>
<pre><code class="language-clike">divide(args...)
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">42 / 7
&gt; 6
divide(1000, 10, 5, 2)
&gt; 10
divide(100, 4, 3)
&gt; 8.33
</code></pre>
<h2 id="max">Max</h2>
<p>Determines the maximum value given in the args</p>
<pre><code class="language-clike">max(args...)
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">max(100, 30, 45, 109)
&gt; 109

# They can be nested
max(max(${val}), 40, 67, 89)
${val} = [20, 1002]
&gt; 1002
</code></pre>
<h2 id="min">Min</h2>
<p>Determines the minimum value given in the args</p>
<pre><code class="language-clike">min(args...)
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">min(100, 30, 45, 109)
&gt; 30
</code></pre>
<p>They can be nested</p>
<pre><code class="language-clike">min(max(${val}), 40, 67, 89)
${val} = [20, 1002]
&gt; 20
</code></pre>
<h2 id="modulo">Modulo</h2>
<p>Determines the modulus of the dividend divided by the divisor.</p>
<pre><code class="language-clike">modulo(dividend, divisor)
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">modulo(100, 30)
&gt; 10
</code></pre>
<h2 id="multiply">Multiply</h2>
<p>Multiplies arg1 by arg2</p>
<pre><code class="language-clike">arg1 * arg2
</code></pre>
<p>Or reduce the args by successive multiplication</p>
<pre><code class="language-clike">multiply(args...)
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">4 * 5
&gt; 20
multiply(4, 5, 2, 6)
&gt; 240
</code></pre>
<h2 id="negate">Negate</h2>
<p>Multiplies arg1 by -1</p>
<pre><code class="language-clike">negate(arg1)
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">negate(80)
&gt; -80
negate(23.33)
&gt; -23.33
negate(-9.5)
&gt; 9.5
</code></pre>
<h2 id="power">Power</h2>
<p>Raises arg1 to the power arg2</p>
<pre><code class="language-clike">arg1 ^ arg2
</code></pre>
<p>Or reduce the args by successive raising to the power</p>
<pre><code class="language-clike">power(args...)
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">4 ^ 3
&gt; 64
power(2, 4, 3)
&gt; 4096
</code></pre>
<h2 id="random">Random</h2>
<p>Generates a random number between 0.0 and 1.0</p>
<pre><code class="language-clike">random()
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">random()
&gt; 0.78
random()
&gt; 0.89
...you get the idea
</code></pre>
<h2 id="subtract">Subtract</h2>
<pre><code class="language-clike">arg1 - arg2
</code></pre>
<p>Or reduce the args by successive subtraction</p>
<pre><code class="language-clike">subtract(args...)
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">29 - 8
&gt; 21
subtract(100, 20, 34, 2)
&gt; 44
</code></pre>
<h2 id="sum">Sum</h2>
<p>Sums all the arguments together</p>
<pre><code class="language-clike">sum(args...)
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">sum(89, 12, 3, 45)
&gt; 149
</code></pre>
<h2 id="rounding-functions">Rounding Functions</h2>
<p>These functions require a value, and an optional decimal places.
If the decimal places are not given it will give you nearest whole number.</p>
<h3 id="ceiling">Ceiling</h3>
<pre><code class="language-clike">ceiling(value, decimalPlaces&lt;optional&gt;)
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">ceiling(8.4234)
&gt; 9
ceiling(4.56, 1)
&gt; 4.6
ceiling(1.22345, 3)
&gt; 1.223
</code></pre>
<h3 id="floor">Floor</h3>
<pre><code class="language-clike">floor(value, decimalPlaces&lt;optional&gt;)
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">floor(8.4234)
&gt; 8
floor(4.56, 1)
&gt; 4.5
floor(1.2237, 3)
&gt; 1.223
</code></pre>
<h3 id="round">Round</h3>
<pre><code class="language-clike">round(value, decimalPlaces&lt;optional&gt;)
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">round(8.4234)
&gt; 8
round(4.56, 1)
&gt; 4.6
round(1.2237, 3)
&gt; 1.224
</code></pre>
<h2 id="statistical-functions">Statistical Functions</h2>
<h3 id="average">Average</h3>
<p>Takes an average value of the arguments.
The alias <code>mean</code> can be used instead.</p>
<pre><code class="language-clike">average(args...)
mean(args...)
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">average(10, 20, 30, 40)
&gt; 25
mean(8.9, 24, 1.2, 1008)
&gt; 260.525
</code></pre>
<h3 id="stdev-standard-deviation">StDev (Standard Deviation)</h3>
<p>Calculate the standard deviation for a set of input values.</p>
<pre><code class="language-clike">stDev(args...)
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">round(stDev(600, 470, 170, 430, 300))
&gt; 147
</code></pre>
<h3 id="variance">Variance</h3>
<p>Calculate the variance of a set of input values.</p>
<pre><code class="language-clike">variance(args...)
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">variance(600, 470, 170, 430, 300)
&gt; 21704
</code></pre>

</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '2.7.'; page-break-before: always">
    
  <h1 id="pg-900d9753fc9c5756cc2d2d6024592e98">2.7 - Selection Functions</h1>
    <div class="lead">Functions for selecting a sub-set of a set of data.</div>
	<p>Selection functions are a form of aggregate function operating on grouped data.
They select a sub-set of the child values.</p>

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">See Also</h4>


    <p>Aggregate functions <a href="../../../../docs/user-guide/dashboards/expressions/aggregate/#joining"><code>joining()</code></a> and <a href="../../../../docs/user-guide/dashboards/expressions/aggregate/#distinct"><code>distinct()</code></a> that work in a similar way to these selection functions.</p>


</div>


<h2 id="any">Any</h2>
<p>Selects the first value found in the group that is not <code>null()</code> or <code>err()</code>.
If no explicit ordering is set then the value selected is indeterminate.</p>
<pre><code class="language-clike">any(${val})
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">any(${val})
${val} = [10, 20, 30, 40]
&gt; 10
</code></pre>
<h2 id="bottom">Bottom</h2>
<p>Selects the bottom N values and returns them as a delimited string in the order they are read.</p>
<pre><code class="language-clike">bottom(${val}, delimiter, limit)
</code></pre>
<p>Example</p>
<pre><code class="language-clike">bottom(${val}, ', ', 2)
${val} = [10, 20, 30, 40]
&gt; '30, 40'
</code></pre>
<h2 id="first">First</h2>
<p>Selects the first value found in the group even if it is <code>null()</code> or <code>err()</code>.
If no explicit ordering is set then the value selected is indeterminate.</p>
<pre><code class="language-clike">first(${val})
</code></pre>
<p>Example</p>
<pre><code class="language-clike">first(${val})
${val} = [10, 20, 30, 40]
&gt; 10
</code></pre>
<h2 id="last">Last</h2>
<p>Selects the last value found in the group even if it is <code>null()</code> or <code>err()</code>.
If no explicit ordering is set then the value selected is indeterminate.</p>
<pre><code class="language-clike">last(${val})
</code></pre>
<p>Example</p>
<pre><code class="language-clike">last(${val})
${val} = [10, 20, 30, 40]
&gt; 40
</code></pre>
<h2 id="nth">Nth</h2>
<p>Selects the Nth value in a set of grouped values.
If there is no explicit ordering on the field selected then the value returned is indeterminate.</p>
<pre><code class="language-clike">nth(${val}, position)
</code></pre>
<p>Example</p>
<pre><code class="language-clike">nth(${val}, 2)
${val} = [20, 40, 30, 10]
&gt; 40
</code></pre>
<h2 id="top">Top</h2>
<p>Selects the top N values and returns them as a delimited string in the order they are read.</p>
<pre><code class="language-clike">top(${val}, delimiter, limit)
</code></pre>
<p>Example</p>
<pre><code class="language-clike">top(${val}, ', ', 2)
${val} = [10, 20, 30, 40]
&gt; '10, 20'
</code></pre>

</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '2.8.'; page-break-before: always">
    
  <h1 id="pg-bf3356630b2119a9da61618a438c1468">2.8 - String Functions</h1>
    <div class="lead">Functions for manipulating strings (text data).</div>
	<h2 id="concat">Concat</h2>
<p>Appends all the arguments end to end in a single string</p>
<pre><code class="language-clike">concat(args...)
</code></pre>
<p>Example</p>
<pre><code class="language-clike">concat('this ', 'is ', 'how ', 'it ', 'works')
&gt; 'this is how it works'
</code></pre>
<h2 id="contains">Contains</h2>
<p>Tests if inputString contains subString.</p>
<pre><code class="language-clike">contains(inputString, subString)
</code></pre>
<p>Example</p>
<pre><code class="language-clike">contains('this', 'this')
&gt; true
contains('this', 'that')
&gt; false
</code></pre>
<h2 id="current-user">Current User</h2>
<p>Returns the username of the user running the query.</p>
<pre><code class="language-clike">currentUser()
</code></pre>
<p>Example</p>
<pre><code class="language-clike">currentUser()
&gt; 'jbloggs'
</code></pre>
<h2 id="decode">Decode</h2>
<p>The arguments are split into 3 parts</p>
<ol>
<li>The input value to test</li>
<li>Pairs of regex matchers with their respective output value</li>
<li>A default result, if the input doesn&rsquo;t match any of the regexes</li>
</ol>
<pre><code class="language-clike">decode(input, test1, result1, test2, result2, ... testN, resultN, otherwise)
</code></pre>
<p>It works much like a Java Switch/Case statement</p>
<p>Example</p>
<pre><code class="language-clike">decode(${val}, 'red', 'rgb(255, 0, 0)', 'green', 'rgb(0, 255, 0)', 'blue', 'rgb(0, 0, 255)', 'rgb(255, 255, 255)')
${val}='blue'
&gt; rgb(0, 0, 255)
${val}='green'
&gt; rgb(0, 255, 0)
${val}='brown'
&gt; rgb(255, 255, 255) // falls back to the 'otherwise' value
</code></pre>
<p>in Java, this would be equivalent to</p>
<pre><code class="language-java">String decode(value) {
    switch(value) {
        case &quot;red&quot;:
            return &quot;rgb(255, 0, 0)&quot;
        case &quot;green&quot;:
            return &quot;rgb(0, 255, 0)&quot;
        case &quot;blue&quot;:
            return &quot;rgb(0, 0, 255)&quot;
        default:
            return &quot;rgb(255, 255, 255)&quot;
    }
}
</code></pre>
<pre><code class="language-clike">decode('red')
&gt; 'rgb(255, 0, 0)'
</code></pre>
<h2 id="decodeurl">DecodeUrl</h2>
<p>Decodes a URL</p>
<pre><code class="language-clike">decodeUrl('userId%3Duser1')
&gt; userId=user1
</code></pre>
<h2 id="encodeurl">EncodeUrl</h2>
<p>Encodes a URL</p>
<pre><code class="language-clike">encodeUrl('userId=user1')
&gt; userId%3Duser1
</code></pre>
<h2 id="exclude">Exclude</h2>
<p>If the supplied string matches one of the supplied match strings then return null, otherwise return the supplied string</p>
<pre><code class="language-clike">exclude(aString, match...)
</code></pre>
<p>Example</p>
<pre><code class="language-clike">exclude('hello', 'hello', 'hi')
&gt; null
exclude('hi', 'hello', 'hi')
&gt; null
exclude('bye', 'hello', 'hi')
&gt; 'bye'
</code></pre>
<h2 id="hash">Hash</h2>
<p>Cryptographically hashes a string</p>
<pre><code class="language-clike">hash(value)
hash(value, algorithm)
hash(value, algorithm, salt)
</code></pre>
<p>Example</p>
<pre><code class="language-clike">hash(${val}, 'SHA-512', 'mysalt')
&gt; A hashed result...
</code></pre>
<p>If not specified the <code>hash()</code> function will use the <code>SHA-256</code> algorithm. Supported algorithms are determined by Java runtime environment.</p>
<h2 id="include">Include</h2>
<p>If the supplied string matches one of the supplied match strings then return it, otherwise return null</p>
<pre><code class="language-clike">include(aString, match...)
</code></pre>
<p>Example</p>
<pre><code class="language-clike">include('hello', 'hello', 'hi')
&gt; 'hello'
include('hi', 'hello', 'hi')
&gt; 'hi'
include('bye', 'hello', 'hi')
&gt; null
</code></pre>
<h2 id="index-of">Index Of</h2>
<p>Finds the first position (zero based) of subString in inputString or <code>-1</code> if it cannot be found. Uses a simple literal match.</p>
<pre><code class="language-clike">indexOf(inputString, subString)
</code></pre>
<p>Example</p>
<pre><code class="language-clike">indexOf('aa-bb-cc', '-')
&gt; 2
</code></pre>
<h2 id="last-index-of">Last Index Of</h2>
<p>Finds the last position (zero based) of subString in inputString or <code>-1</code> if it cannot be found. Uses a simple literal match.</p>
<pre><code class="language-clike">lastIndexOf(inputString, subString)
</code></pre>
<p>Example</p>
<pre><code class="language-clike">lastIndexOf('aa-bb-cc', '-')
&gt; 5
</code></pre>
<h2 id="lower-case">Lower Case</h2>
<p>Converts the string to lower case</p>
<pre><code class="language-clike">lowerCase(aString)
</code></pre>
<p>Example</p>
<pre><code class="language-clike">lowerCase('Hello DeVeLoPER')
&gt; 'hello developer'
</code></pre>
<h2 id="match">Match</h2>
<p>Test an input string using a regular expression to see if it matches</p>
<pre><code class="language-clike">match(input, regex)
</code></pre>
<p>Example</p>
<pre><code class="language-clike">match('this', 'this')
&gt; true
match('this', 'that')
&gt; false
</code></pre>
<h2 id="query-param">Query Param</h2>
<p>Returns the value of the requested query parameter.</p>
<pre><code class="language-clike">queryParam(paramKey)
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">queryParam('user')
&gt; 'jbloggs'
</code></pre>
<h2 id="query-params">Query Params</h2>
<p>Returns all query parameters as a space delimited string.</p>
<pre><code class="language-clike">queryParams()
</code></pre>
<p>Examples</p>
<pre><code class="language-clike">queryParams()
&gt; 'user=jbloggs site=HQ'
</code></pre>
<h2 id="replace">Replace</h2>
<p>Perform text replacement on an input string using a regular expression to match part (or all) of the input string and a replacement string to insert in place of the matched part</p>
<pre><code class="language-clike">replace(input, regex, replacement)
</code></pre>
<p>Example</p>
<pre><code class="language-clike">replace('this', 'is', 'at')
&gt; 'that'
</code></pre>
<h2 id="string-length">String Length</h2>
<p>Takes the length of a string</p>
<pre><code class="language-clike">stringLength(aString)
</code></pre>
<p>Example</p>
<pre><code class="language-clike">stringLength('hello')
&gt; 5
</code></pre>
<h2 id="substring">Substring</h2>
<p>Take a substring based on start/end index of letters</p>
<pre><code class="language-clike">substring(aString, startIndex, endIndex)
</code></pre>
<p>Example</p>
<pre><code class="language-clike">substring('this', 1, 2)
&gt; 'h'
</code></pre>
<h2 id="substring-after">Substring After</h2>
<p>Get the substring from the first string that occurs after the presence of the second string</p>
<pre><code class="language-clike">substringAfter(firstString, secondString)
</code></pre>
<p>Example</p>
<pre><code class="language-clike">substringAfter('aa-bb', '-')
&gt; 'bb'
</code></pre>
<h2 id="substring-before">Substring Before</h2>
<p>Get the substring from the first string that occurs before the presence of the second string</p>
<pre><code class="language-clike">substringBefore(firstString, secondString)
</code></pre>
<p>Example</p>
<pre><code class="language-clike">substringBefore('aa-bb', '-')
&gt; 'aa'
</code></pre>
<h2 id="upper-case">Upper Case</h2>
<p>Converts the string to upper case</p>
<pre><code class="language-clike">upperCase(aString)
</code></pre>
<p>Example</p>
<pre><code class="language-clike">upperCase('Hello DeVeLoPER')
&gt; 'HELLO DEVELOPER'
</code></pre>

</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '2.9.'; page-break-before: always">
    
  <h1 id="pg-31e6b218e404c55287e3e3d6fb6be1a1">2.9 - Type Checking Functions</h1>
    <div class="lead">Functions for evaluating the type of a value.</div>
	<h2 id="is-boolean">Is Boolean</h2>
<p>Checks if the passed value is a <em>boolean</em> data type.</p>
<pre><code class="language-clike">isBoolean(arg1)
</code></pre>
<p>Examples:</p>
<pre><code class="language-clike">isBoolean(toBoolean('true'))
&gt; true
</code></pre>
<h2 id="is-double">Is Double</h2>
<p>Checks if the passed value is a <em>double</em> data type.</p>
<pre><code class="language-clike">isDouble(arg1)
</code></pre>
<p>Examples:</p>
<pre><code class="language-clike">isDouble(toDouble('1.2'))
&gt; true
</code></pre>
<h2 id="is-error">Is Error</h2>
<p>Checks if the passed value is an error caused by an invalid evaluation of an expression on passed values, e.g. some values passed to an expression could result in a divide by 0 error.
Note that this method must be used to check for <code>error</code> as error equality using <code>x=err()</code> is not supported.</p>
<pre><code class="language-clike">isError(arg1)
</code></pre>
<p>Examples:</p>
<pre><code class="language-clike">isError(toLong('1'))
&gt; false
isError(err())
&gt; true
</code></pre>
<h2 id="is-integer">Is Integer</h2>
<p>Checks if the passed value is an <em>integer</em> data type.</p>
<pre><code class="language-clike">isInteger(arg1)
</code></pre>
<p>Examples:</p>
<pre><code class="language-clike">isInteger(toInteger('1'))
&gt; true
</code></pre>
<h2 id="is-long">Is Long</h2>
<p>Checks if the passed value is a <em>long</em> data type.</p>
<pre><code class="language-clike">isLong(arg1)
</code></pre>
<p>Examples:</p>
<pre><code class="language-clike">isLong(toLong('1'))
&gt; true
</code></pre>
<h2 id="is-null">Is Null</h2>
<p>Checks if the passed value is <code>null</code>.
Note that this method must be used to check for <code>null</code> as null equality using <code>x=null()</code> is not supported.</p>
<pre><code class="language-clike">isNull(arg1)
</code></pre>
<p>Examples:</p>
<pre><code class="language-clike">isNull(toLong('1'))
&gt; false
isNull(null())
&gt; true
</code></pre>
<h2 id="is-number">Is Number</h2>
<p>Checks if the passed value is a numeric data type.</p>
<pre><code class="language-clike">isNumber(arg1)
</code></pre>
<p>Examples:</p>
<pre><code class="language-clike">isNumber(toLong('1'))
&gt; true
</code></pre>
<h2 id="is-string">Is String</h2>
<p>Checks if the passed value is a <em>string</em> data type.</p>
<pre><code class="language-clike">isString(arg1)
</code></pre>
<p>Examples:</p>
<pre><code>isString(toString(1.2))
&gt; true
</code></pre>
<h2 id="is-value">Is Value</h2>
<p>Checks if the passed value is a value data type, e.g. not <code>null</code> or <code>error</code>.</p>
<pre><code class="language-clike">isValue(arg1)
</code></pre>
<p>Examples:</p>
<pre><code class="language-clike">isValue(toLong('1'))
&gt; true
isValue(null())
&gt; false
</code></pre>
<h2 id="type-of">Type Of</h2>
<p>Returns the data type of the passed value as a string.</p>
<pre><code class="language-clike">typeOf(arg1)
</code></pre>
<p>Examples:</p>
<pre><code class="language-clike">typeOf('abc')
&gt; string
typeOf(toInteger(123))
&gt; integer
typeOf(err())
&gt; error
typeOf(null())
&gt; null
typeOf(toBoolean('false'))
&gt; false
</code></pre>

</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '2.10.'; page-break-before: always">
    
  <h1 id="pg-9684692ef069e48968553b5d53f673a5">2.10 - URI Functions</h1>
    <div class="lead">Functions for extracting parts from a Uniform Resource Identifier (URI).</div>
	<p>Fields containing a Uniform Resource Identifier (URI) in string form can queried to extract the URI&rsquo;s individual components of <code>authority</code>, <code>fragment</code>, <code>host</code>, <code>path</code>, <code>port</code>, <code>query</code>, <code>scheme</code>, <code>schemeSpecificPart</code> and <code>userInfo</code>. See either <a href="http://www.ietf.org/rfc/rfc2396.txt">RFC 2306: Uniform Resource Identifiers (URI): Generic Syntax</a> or Java&rsquo;s java.net.URI Class for details regarding the components. If any component is not present within the passed URI, then an empty string is returned.</p>
<p>The extraction functions are</p>
<ul>
<li>extractAuthorityFromUri() - extract the Authority component</li>
<li>extractFragmentFromUri() - extract the Fragment component</li>
<li>extractHostFromUri() - extract the Host component</li>
<li>extractPathFromUri() - extract the Path component</li>
<li>extractPortFromUri() - extract the Port component</li>
<li>extractQueryFromUri() - extract the Query component</li>
<li>extractSchemeFromUri() - extract the Scheme component</li>
<li>extractSchemeSpecificPartFromUri() - extract the Scheme specific part component</li>
<li>extractUserInfoFromUri() - extract the UserInfo component</li>
</ul>
<p>If the URI is <code>http://foo:bar@w1.superman.com:8080/very/long/path.html?p1=v1&amp;amp;p2=v2#more-details</code> the table below displays the extracted components</p>
<table>
<thead>
<tr>
<th>Expression</th>
<th>Extraction</th>
</tr>
</thead>
<tbody>
<tr>
<td>extractAuthorityFromUri(${URI})</td>
<td>foo:bar@w1.superman.com:8080</td>
</tr>
<tr>
<td>extractFragmentFromUri(${URI})</td>
<td>more-details</td>
</tr>
<tr>
<td>extractHostFromUri(${URI})</td>
<td>w1.superman.com</td>
</tr>
<tr>
<td>extractPathFromUri(${URI})</td>
<td>/very/long/path.html</td>
</tr>
<tr>
<td>extractPortFromUri(${URI})</td>
<td>8080</td>
</tr>
<tr>
<td>extractQueryFromUri(${URI})</td>
<td>p1=v1&amp;p2=v2</td>
</tr>
<tr>
<td>extractSchemeFromUri(${URI})</td>
<td>http</td>
</tr>
<tr>
<td>extractSchemeSpecificPartFromUri(${URI})</td>
<td>//foo:bar@w1.superman.com:8080/very/long/path.html?p1=v1&amp;p2=v2</td>
</tr>
<tr>
<td>extractUserInfoFromUri(${URI})</td>
<td>foo:bar</td>
</tr>
</tbody>
</table>
<h2 id="extractauthorityfromuri">extractAuthorityFromUri</h2>
<p>Extracts the Authority component from a URI</p>
<p><code>extractAuthorityFromUri(uri)</code></p>
<p>Example</p>
<pre><code class="language-clike">extractAuthorityFromUri('http://foo:bar@w1.superman.com:8080/very/long/path.html?p1=v1&amp;p2=v2#more-details')
&gt; 'foo:bar@w1.superman.com:8080'
</code></pre>
<h2 id="extractfragmentfromuri">extractFragmentFromUri</h2>
<p>Extracts the Fragment component from a URI</p>
<p><code>extractFragmentFromUri(uri)</code></p>
<p>Example</p>
<pre><code class="language-clike">extractFragmentFromUri('http://foo:bar@w1.superman.com:8080/very/long/path.html?p1=v1&amp;p2=v2#more-details')
&gt; 'more-details'
</code></pre>
<h2 id="extracthostfromuri">extractHostFromUri</h2>
<p>Extracts the Host component from a URI</p>
<p><code>extractHostFromUri(uri)</code></p>
<p>Example</p>
<pre><code class="language-clike">extractHostFromUri('http://foo:bar@w1.superman.com:8080/very/long/path.html?p1=v1&amp;p2=v2#more-details')
&gt; 'w1.superman.com'
</code></pre>
<h2 id="extractpathfromuri">extractPathFromUri</h2>
<p>Extracts the Path component from a URI</p>
<p><code>extractPathFromUri(uri)</code></p>
<p>Example</p>
<pre><code class="language-clike">extractPathFromUri('http://foo:bar@w1.superman.com:8080/very/long/path.html?p1=v1&amp;p2=v2#more-details')
&gt; '/very/long/path.html'
</code></pre>
<h2 id="extractportfromuri">extractPortFromUri</h2>
<p>Extracts the Port component from a URI</p>
<p><code>extractPortFromUri(uri)</code></p>
<p>Example</p>
<pre><code class="language-clike">extractPortFromUri('http://foo:bar@w1.superman.com:8080/very/long/path.html?p1=v1&amp;p2=v2#more-details')
&gt; '8080'
</code></pre>
<h2 id="extractqueryfromuri">extractQueryFromUri</h2>
<p>Extracts the Query component from a URI</p>
<p><code>extractQueryFromUri(uri)</code></p>
<p>Example</p>
<pre><code class="language-clike">extractQueryFromUri('http://foo:bar@w1.superman.com:8080/very/long/path.html?p1=v1&amp;p2=v2#more-details')
&gt; 'p1=v1&amp;p2=v2'
</code></pre>
<h2 id="extractschemefromuri">extractSchemeFromUri</h2>
<p>Extracts the Scheme component from a URI</p>
<p><code>extractSchemeFromUri(uri)</code></p>
<p>Example</p>
<pre><code class="language-clike">extractSchemeFromUri('http://foo:bar@w1.superman.com:8080/very/long/path.html?p1=v1&amp;p2=v2#more-details')
&gt; 'http'
</code></pre>
<h2 id="extractschemespecificpartfromuri">extractSchemeSpecificPartFromUri</h2>
<p>Extracts the SchemeSpecificPart component from a URI</p>
<p><code>extractSchemeSpecificPartFromUri(uri)</code></p>
<p>Example</p>
<pre><code class="language-clike">extractSchemeSpecificPartFromUri('http://foo:bar@w1.superman.com:8080/very/long/path.html?p1=v1&amp;p2=v2#more-details')
&gt; '//foo:bar@w1.superman.com:8080/very/long/path.html?p1=v1&amp;p2=v2'
</code></pre>
<h2 id="extractuserinfofromuri">extractUserInfoFromUri</h2>
<p>Extracts the UserInfo component from a URI</p>
<p><code>extractUserInfoFromUri(uri)</code></p>
<p>Example</p>
<pre><code class="language-clike">extractUserInfoFromUri('http://foo:bar@w1.superman.com:8080/very/long/path.html?p1=v1&amp;p2=v2#more-details')
&gt; 'foo:bar'
</code></pre>

</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '2.11.'; page-break-before: always">
    
  <h1 id="pg-d7f4cf2ecd821dd7e7d21e2be040e786">2.11 - Value Functions</h1>
    <div class="lead">Functions that return a static value.</div>
	<h2 id="err">Err</h2>
<p>Returns <em>err</em></p>
<pre><code class="language-clike">err()
</code></pre>
<h2 id="false">False</h2>
<p>Returns boolean <em>false</em></p>
<pre><code class="language-clike">false()
</code></pre>
<h2 id="null">Null</h2>
<p>Returns <em>null</em></p>
<pre><code class="language-clike">null()
</code></pre>
<h2 id="true">True</h2>
<p>Returns boolean <em>true</em></p>
<pre><code class="language-clike">true()
</code></pre>

</div>




    
	
  

    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '3.'; page-break-before: always">
    
  <h1 id="pg-618daf953ef0af3ec9f9a33f14440a1d">3 - Search Extraction</h1>
    <div class="lead">The process of combining data extracted from events with the data stored in an index.</div>
	<p>When indexing data it is possible to store (see <a href="../../../../docs/user-guide/indexing/lucene/">Stored Fields</a> all data in the index.
This comes with a storage cost as the data is then held in two places; the event; and the index document.</p>
<p>Stroom has the capability of doing Search Extraction at query time.
This involves combining the data stored in the index document with data extracted using a search extraction pipeline.
Extracting data in this way is slower but reduces the data stored in the index, so it is a trade off between performance and storage space consumed.</p>
<p>Search Extraction relies on the StreamId and EventId being stored in the Index.
Stroom can then used these two fields to locate the event in the stream store and process it with the search extraction pipeline.</p>

<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">TODO</h4>

    Add more detail

</div>


</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '4.'; page-break-before: always">
    
  <h1 id="pg-09d02ed663f35a71994cbc79c44f56f8">4 - Dictionaries</h1>
    
	<h2 id="creating">Creating</h2>
<p>Right click on a folder in the explorer tree that you want to create a dictionary in. Choose ‘New/Dictionary’ from the popup menu:</p>
<blockquote>
<p><strong>TODO</strong>: Fix image</p>
</blockquote>
<p>Call the dictionary something like ‘My Dictionary’ and click OK.</p>
<blockquote>
<p><strong>TODO</strong>: Fix image</p>
</blockquote>
<p>Now just add any search terms you want to the newly created dictionary and click save.</p>
<blockquote>
<p><strong>TODO</strong>: Fix image</p>
</blockquote>
<p>You can add multiple terms.</p>
<ul>
<li>Terms on separate lines act as if they are part of an &lsquo;OR&rsquo; expression when used in a search.</li>
<li>Terms on a single line separated by spaces act as if they are part of an &lsquo;AND&rsquo; expression when used in a search.</li>
</ul>
<h2 id="using">Using</h2>
<p>To perform a search using your dictionary, just choose the newly created dictionary as part of your search expression:</p>
<blockquote>
<p><strong>TODO</strong>: Fix image</p>
</blockquote>

</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '5.'; page-break-before: always">
    
  <h1 id="pg-bcfe35b40013cbccc4c70ea9442e8df8">5 - Internal Links</h1>
    <div class="lead">Adding links within Stroom to internal features/items or external URLs.</div>
	<p>Within Stroom, links can be created in dashboard tables or dashboard text panes that will direct Stroom to display an item in various ways.</p>
<p>Links are inserted in the form:</p>
<pre><code class="language-clike">[Link Text](URL and parameters){Link Type}
</code></pre>
<p>In dashboard tables links can be inserted using the <a href="../../../../docs/user-guide/dashboards/expressions/link/#link"><code>link()</code></a> function or more specialised functions such as <a href="../../../../docs/user-guide/dashboards/expressions/link/#data"><code>data()</code></a> or <a href="../../../../docs/user-guide/dashboards/expressions/link/#stepping"><code>stepping()</code></a>.</p>
<p>In dashboard text panes, links can be inserted into the HTML as <code>link</code> attributes on elements.</p>

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Note</h4>


    The text pane must be set to <code>Show As HTML</code> for links to operate.

</div>


<pre><code class="language-html">  &lt;div style=&quot;padding: 5px;&quot;&gt;
    &lt;span style=&quot;text-decoration:underline;color:blue;cursor:pointer&quot; link=&quot;[link](uuid=e177cf16-da6c-4c7d-a19c-09a201f5a2da&amp;amp;params=user%3Duser1&amp;amp;title=Details%20For%20user1){dashboard}&quot;&gt;Details For user1&lt;/span&gt;
  &lt;/div&gt;
</code></pre>
<p>The link type can be one of the following:</p>
<ul>
<li><code>dialog</code> : Display the content of a link URL within a stroom popup dialog.</li>
<li><code>tab</code> : Display the content of a link URL within a stroom tab.</li>
<li><code>browser</code> : Display the content of a link URL within a new browser tab.</li>
<li><code>dashboard</code> : Used to launch a Stroom dashboard internally with parameters in the URL.</li>
<li><code>stepping</code> : Used to launch Stroom stepping internally with parameters in the URL.</li>
<li><code>data</code> : Used to show Stroom data internally with parameters in the URL.</li>
<li><code>annotation</code> : Used to show a Stroom annotation internally with parameters in the URL.</li>
</ul>
<h2 id="dialog">Dialog</h2>
<p>Dialog links are used to embed any referenced URL in a Stroom popup Dialog.
Dialog links look something like this in HTML:</p>
<pre><code class="language-html">&lt;div style=&quot;padding: 5px;&quot;&gt;
    &lt;span style=&quot;text-decoration:underline;color:blue;cursor:pointer&quot; 
          link=&quot;[Show](https://www.somehost.com/somepath){dialog|Embedded In Stroom}&quot;&gt;
        Show In Stroom Dialog
    &lt;/span&gt;
&lt;/div&gt;
</code></pre>

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Note</h4>


    The dialog title can be controlled by adding a <code>|</code> and required title after the type, e.g.

</div>


<pre><code class="language-clike">{dialog|Embedded In Stroom}
</code></pre>
<h2 id="tab">Tab</h2>
<p>Tab links are similar to dialog links are used to embed any referenced URL in a Stroom tab.
Tab links look something like this in HTML:</p>
<pre><code class="language-html">&lt;div style=&quot;padding: 5px;&quot;&gt;
    &lt;span style=&quot;text-decoration:underline;color:blue;cursor:pointer&quot; 
          link=&quot;[Show](https://www.somehost.com/somepath){tab|Embedded In Stroom}&quot;&gt;
        Show In Stroom Tab
    &lt;/span&gt;
&lt;/div&gt;
</code></pre>

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Note</h4>


    The tab title can be controlled by adding a <code>|</code> and required title after the type, e.g.

</div>


<pre><code class="language-clike">{tab|Embedded In Stroom}
</code></pre>
<h2 id="browser">Browser</h2>
<p>Browser links are used to open any referenced URL in a new browser tab.
In most cases this is easily accomplished via a normal hyperlink but Stroom also provides a mechanism to do this as a link event so that dashboard tables are also able to open new browser tabs.
This can be accomplished by using the <a href="../../../../docs/user-guide/dashboards/expressions/link/#link"><code>link()</code></a> table function.
In a dashboard text pane the HTML could look like this:</p>
<pre><code class="language-html">&lt;div style=&quot;padding: 5px;&quot;&gt;
    &lt;span style=&quot;text-decoration:underline;color:blue;cursor:pointer&quot; 
          link=&quot;[Show](https://www.somehost.com/somepath){browser}&quot;&gt;
        Show In Browser Tab
    &lt;/span&gt;
&lt;/div&gt;
</code></pre>

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Note</h4>


    Unlike the other link types there is no way to control the browser tab title.

</div>


<h2 id="dashboard">Dashboard</h2>
<p>In addition to viewing/embedding external URLs, Stroom links can be used to direct Stroom to show an internal item or feature.
The <code>dashboard</code> link type allows Stroom to open a new tab and show a dashboard with the specified parameters.</p>
<p>The format for a dashboard link is as follows:</p>
<pre><code class="language-clike">[Link Text](uuid=&lt;UUID&gt;&amp;params=&lt;PARAMS&gt;&amp;title=&lt;CUSTOM_TITLE&gt;){dashboard}
</code></pre>
<p>The parameters for dashboard links are:</p>
<ul>
<li><code>uuid</code> - The UUID of the dashboard to open.</li>
<li><code>params</code> - A URL encoded list of params to supply to the dashboard, e.g. <code>params=user%3Duser1</code>.</li>
<li><code>title</code> - An optional URL encoded title to better identify the specific instance of the dashboard, e.g. <code>title=Details%20For%20user1</code>.</li>
</ul>

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Note</h4>


    Parameter values can be URL encoded in XSLT using the <code>encode-for-uri</code> function.

</div>


<p>An example of this type of link in HTML:</p>
<pre><code class="language-html">&lt;div style=&quot;padding: 5px;&quot;&gt;
    &lt;span style=&quot;text-decoration:underline;color:blue;cursor:pointer&quot; 
          link=&quot;[link](uuid=e177cf16-da6c-4c7d-a19c-09a201f5a2da&amp;amp;params=user%3Duser1&amp;amp;title=Details%20For%20user1){dashboard}&quot;&gt;
        Details For user1
    &lt;/span&gt;
&lt;/div&gt;
</code></pre>

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Note</h4>


    By using a pipeline with the appropriate XSLT it is possible to dynamically generate links in dashboard text panes that will be specific to the data being displayed.

</div>


<h2 id="data">Data</h2>
<p>A link can be created to open a sub-set of a source of data (i.e. part of a stream) for viewing.
The data can either be opened in a popup dialog (<code>dialog</code>) or in another stroom tab (<code>tab</code>).
It can also be display in <code>preview</code> form (with formatting and syntax highlighting) or unaltered <code>source</code> form.</p>

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Note</h4>



    <p>To make full use of data links for viewing raw data, you need to use the <code>stroom:source()</code> <a href="../../../../docs/user-guide/pipelines/xslt/xslt-functions/">XSLT Function</a> to decorate an event with the details of the source location it derived from.</p>


</div>


<p>The format for a data link is as follows:</p>
<pre><code class="language-clike">[Link Text](id=&lt;STREAM_ID&gt;&amp;partNo=&lt;PART_NO&gt;&amp;recordNo=&lt;RECORD_NO&gt;&amp;lineFrom=&lt;LINE_FROM&gt;&amp;colFrom=&lt;COL_FROM&gt;&amp;lineTo=&lt;LINE_TO&gt;&amp;colTo=&lt;COL_TO&gt;&amp;viewType=&lt;VIEW_TYPE&gt;&amp;displayType=&lt;DISPLAY_TYPE&gt;){data}
</code></pre>
<p>Stroom deals in two main types of stream, segmented and non-segmented (see <a href="../../../../docs/user-guide/concepts/streams/">Streams</a>).
Data in a non-segmented (i.e. raw) stream is identified by an <code>id</code>, a <code>partNo</code> and optionally line and column positions to define the sub-set of that stream part to display.
Data in a segmented (i.e. cooked) stream is identified by an <code>id</code>, a <code>recordNo</code> and optionally line and column positions to define the sub-set of that record (i.e. event) within that stream.</p>
<p>The parameters for data links are:</p>
<ul>
<li><code>id</code> - The stream ID.</li>
<li><code>partNo</code> - The part number of the stream (one based).
Always <code>1</code> for segmented (cooked) streams.</li>
<li><code>recordNo</code> - The record number within a segmented stream (optional).
Not applicable for non-segmented streams so use <code>null()</code> instead.</li>
<li><code>lineFrom</code> - The line number of the start of the sub-set of data (optional, one based).</li>
<li><code>colFrom</code> - The column number of the start of the sub-set of data (optional, one based).</li>
<li><code>lineTo</code> - The line number of the end of the sub-set of data (optional, one based).</li>
<li><code>colTo</code> - The column number of the end of the sub-set of data (optional, one based).</li>
<li><code>viewType</code> - The type of view of the data (optional, defaults to <code>preview</code>):
<ul>
<li><code>preview</code> : Display the data as a formatted preview of a limited portion of the data.</li>
<li><code>source</code> : Display the un-formatted data in its original form with the ability to navigate around all of the data source.</li>
</ul>
</li>
<li><code>displayType</code> - The way of displaying the data (optional, defaults to <code>dialog</code>):
<ul>
<li><code>dialog</code> : Open as a modal popup dialog.</li>
<li><code>tab</code> : Open as a top level tab within the Stroom browser tab.</li>
</ul>
</li>
</ul>
<p>In <code>preview</code> mode the line and column positions will limit the data displayed to the specified selection.
In <code>source</code> mode the line and column positions define a highlight block of text within the part/record.</p>

<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Warning</h4>


    <p>The <code>displayType</code> value <code>tab</code> is not supported if the dashboard is viewed via a <a href="../../../../docs/user-guide/dashboards/direct-urls/">Direct URL</a>.
This is because a direct URL displays only the dashboard without Stroom’s top level tab bar so it is not possible to open it as a top level tab.</p>


</div>


<p>An example of this type of link in HTML:</p>
<pre><code class="language-html">&lt;div style=&quot;padding: 5px;&quot;&gt;
    &lt;span style=&quot;text-decoration:underline;color:blue;cursor:pointer&quot; 
          link=&quot;[link](id=1822&amp;amp;partNo=1&amp;amp;recordNo=1){data}&quot;&gt;
        Show Source&lt;/span&gt;
&lt;/div&gt;
</code></pre>
<h3 id="view-type">View Type</h3>
<p>The additional parameter <code>viewType</code> can be used to switch the data view mode from <code>preview</code> (default) to <code>source</code>.</p>
<p>In preview mode the optional parameters <code>lineFrom</code>, <code>colFrom</code>, <code>lineTo</code>, <code>colTo</code> can be used to limit the portion of the data that is displayed.</p>
<pre><code class="language-html">&lt;div style=&quot;padding: 5px;&quot;&gt;
    &lt;span style=&quot;text-decoration:underline;color:blue;cursor:pointer&quot; 
          link=&quot;[link](id=1822&amp;amp;partNo=1&amp;amp;recordNo=1&amp;amp;viewType=preview&amp;amp;lineFrom=1&amp;amp;colFrom=1&amp;amp;lineTo=10&amp;amp;colTo=8){data}&quot;&gt;
        Show Source Preview
    &lt;/span&gt;
&lt;/div&gt;
</code></pre>
<p>In source mode the optional parameters <code>lineFrom</code>, <code>colFrom</code>, <code>lineTo</code>, <code>colTo</code> can be used to highlight a portion of the data that is displayed.</p>
<pre><code class="language-html">&lt;div style=&quot;padding: 5px;&quot;&gt;
    &lt;span style=&quot;text-decoration:underline;color:blue;cursor:pointer&quot; 
          link=&quot;[link](id=1822&amp;amp;partNo=1&amp;amp;recordNo=1&amp;amp;viewType=source&amp;amp;lineFrom=1&amp;amp;colFrom=1&amp;amp;lineTo=10&amp;amp;colTo=8){data}&quot;&gt;
        Show Source
    &lt;/span&gt;
&lt;/div&gt;
</code></pre>
<h3 id="display-type">Display Type</h3>
<p>Choose whether to display data in a <code>dialog</code> (default) or a Stroom <code>tab</code>.</p>
<h2 id="stepping">Stepping</h2>
<p>A stepping link can be used to launch the data stepping feature with the specified data.
The format for a stepping link is as follows:</p>
<pre><code class="language-clike">[Link Text](id=&lt;STREAM_ID&gt;&amp;partNo=&lt;PART_NO&gt;&amp;recordNo=&lt;RECORD_NO&gt;){stepping}
</code></pre>
<p>The parameters for stepping links are as follows:</p>
<ul>
<li>id - The id of the stream to step.</li>
<li>partNo - The sub part no within the stream to step (usually 1).</li>
<li>recordNo - The record or event number within the stream to step.</li>
</ul>
<p>An example of this type of link in HTML:</p>
<pre><code class="language-html">&lt;div style=&quot;padding: 5px;&quot;&gt;
    &lt;span style=&quot;text-decoration:underline;color:blue;cursor:pointer&quot; 
          link=&quot;[link](id=1822&amp;amp;partNo=1&amp;amp;recordNo=1){stepping}&quot;&gt;
        Step Source&lt;/span&gt;
&lt;/div&gt;
</code></pre>
<h2 id="annotation">Annotation</h2>
<p>A link can be used to edit or create annotations.
To view or edit an existing annotation the id must be known or one can be found using a stream and event id.
If all parameters are specified an annotation will either be created or edited depending on whether it exists or not.
The format for an annotation link is as follows:</p>
<pre><code class="language-clike">[Link Text](annotationId=&lt;ANNOTATION_ID&gt;&amp;streamId=&lt;STREAM_ID&gt;&amp;eventId=&lt;EVENT_ID&gt;&amp;title=&lt;TITLE&gt;&amp;subject=&lt;SUBJECT&gt;&amp;status=&lt;STATUS&gt;&amp;assignedTo=&lt;ASSIGNED_TO&gt;&amp;comment=&lt;COMMENT&gt;){annotation}
</code></pre>
<p>The parameters for annotation links are as follows:</p>
<ul>
<li>annotationId - The optional existing id of an annotation if one already exists.</li>
<li>streamId - An optional stream id to link to a newly created annotation, or used to lookup an existing annotation if no annotation id is provided.</li>
<li>eventId - An optional event id to link to a newly created annotation, or used to lookup an existing annotation if no annotation id is provided.</li>
<li>title - An optional default title to give the annotation if a new one is created.</li>
<li>subject - An optional default subject to give the annotation if a new one is created.</li>
<li>status - An optional default status to give the annotation if a new one is created.</li>
<li>assignedTo - An optional initial assignedTo value to give the annotation if a new one is created.</li>
<li>comment - An optional initial comment to give the annotation if a new one is created.</li>
</ul>

</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '6.'; page-break-before: always">
    
  <h1 id="pg-6bd1ea76bcd94d10f9c39559a771c351">6 - Direct URLs</h1>
    <div class="lead">Navigating directly to a specific <em>Stroom</em> dashboard using a direct URL.</div>
	<p>It is possible to navigate directly to a specific <em>Stroom</em> dashboard using a direct URL.
This can be useful when you have a dashboard that needs to be viewed by users that would otherwise not be using the <em>Stroom</em> user interface.</p>
<h2 id="url-format">URL format</h2>
<p>The format for the URL is as follows:</p>
<p><code>https://&lt;HOST&gt;/stroom/dashboard?type=Dashboard&amp;uuid=&lt;DASHBOARD UUID&gt;[&amp;title=&lt;DASHBOARD TITLE&gt;][&amp;params=&lt;DASHBOARD PARAMETERS&gt;]</code></p>
<p>Example:</p>
<p><code>https://localhost/stroom/dashboard?type=Dashboard&amp;uuid=c7c6b03c-5d47-4b8b-b84e-e4dfc6c84a09&amp;title=My%20Dash&amp;params=userId%3DFred%20Bloggs</code></p>
<h3 id="host-and-path">Host and path</h3>
<p>The host and path are typically <code>https://&lt;HOST&gt;/stroom/dashboard</code> where <code>&lt;HOST&gt;</code> is the hostname/IP for <em>Stroom</em>.</p>
<h3 id="type">type</h3>
<p><code>type</code> is a required parameter and must always be <code>Dashboard</code> since we are opening a dashboard.</p>
<h3 id="uuid">uuid</h3>
<p><code>uuid</code> is a required parameter where <code>&lt;DASHBOARD UUID&gt;</code> is the UUID for the dashboard you want a direct URL to, e.g. <code>uuid=c7c6b03c-5d47-4b8b-b84e-e4dfc6c84a09</code></p>
<p>The UUID for the dashboard that you want to link to can be found by right clicking on the dashboard icon in the explorer tree and selecting Info.</p>
<p>The Info dialog will display something like this and the UUID can be copied from it:</p>
<pre><code class="language-text">DB ID: 4
UUID: c7c6b03c-5d47-4b8b-b84e-e4dfc6c84a09
Type: Dashboard
Name: Stroom Family App Events Dashboard
Created By: INTERNAL
Created On: 2018-12-10T06:33:03.275Z
Updated By: admin
Updated On: 2018-12-10T07:47:06.841Z
</code></pre>
<h3 id="title-optional">title (Optional)</h3>
<p><code>title</code> is an optional URL parameter where <code>&lt;DASHBOARD TITLE&gt;</code> allows the specification of a specific title for the opened dashboard instead of the default dashboard name.</p>
<p>The inclusion of <code>${name}</code> in the title allows the default dashboard name to be used and appended with other values, e.g. <code>'title=${name}%20-%20' + param.name</code></p>
<h3 id="params-optional">params (Optional)</h3>
<p><code>params</code> is an optional URL parameter where <code>&lt;DASHBOARD PARAMETERS&gt;</code> includes any parameters that have been defined for the dashboard in any of the expressions, e.g. <code>params=userId%3DFred%20Bloggs</code></p>
<h2 id="permissions">Permissions</h2>
<p>In order for as user to view a dashboard they will need the necessary permission on the various entities that make up the dashboard.</p>
<p>For a Lucene index query and associated table the following permissions will be required:</p>
<ul>
<li><em>Read</em> permission on the <em>Dashboard</em> entity.</li>
<li><em>Use</em> permission on any <em>Indexe</em> entities being queried in the dashboard.</li>
<li><em>Use</em> permission on any <em>Pipeline</em> entities set as search extraction <em>Pipelines</em> in any of the dashboard&rsquo;s tables.</li>
<li><em>Use</em> permission on any <em>XSLT</em> entities used by the above search extraction <em>Pipeline</em> entites.</li>
<li><em>Use</em> permission on any ancestor pipelines of any of the above search extraction <em>Pipeline</em> entites (if applicable).</li>
<li><em>Use</em> permission on any <em>Feed</em> entities that you want the user to be able to see data for.</li>
</ul>
<p>For a SQL Statistics query and associated table the following permissions will be required:</p>
<ul>
<li><em>Read</em> permission on the <em>Dashboard</em> entity.</li>
<li><em>Use</em> permission on the <em>StatisticStore</em> entity being queried.</li>
</ul>
<p>For a visualisation the following permissions will be required:</p>
<ul>
<li><em>Read</em> permission on any <em>Visualiation</em> entities used in the dashboard.</li>
<li><em>Read</em> permission on any <em>Script</em> entities used by the above <em>Visualiation</em> entities.</li>
<li><em>Read</em> permission on any <em>Script</em> entities used by the above <em>Script</em> entities.</li>
</ul>

</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '7.'; page-break-before: always">
    
  <h1 id="pg-a17d80190d0bd1163a3748e164c8f674">7 - Elasticsearch</h1>
    <div class="lead">Searching an Elasticsearch index using a Stroom dashboard</div>
	<h2 id="searching-using-a-stroom-dashboard">Searching using a Stroom dashboard</h2>
<p>Searching an Elasticsearch index (or data stream) using a Stroom dashboard is conceptually similar to the process described in <a href="../../../../docs/quick-start-guide/dashboard/">Dashboards</a>.</p>
<p>Before you set the dashboard&rsquo;s data source, you must first create an Elastic Index document to tell Stroom which index (or indices) you wish to query.</p>
<h3 id="create-an-elastic-index-document">Create an Elastic Index document</h3>
<ol>
<li>Right-click a folder in the Stroom Explorer pane (<span class="stroom-icon inline-svg-button icon-button  " >
    <span class="face" title="Explorer"><svg xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="1792" width="1792" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 1792 1792"><g fill="var(--icon-colour__blue)"><path d="m804.29 276.08v287.08q0 37.516-26.913 64.429t-64.429 26.913h-495.86q-37.516 0-64.429-26.913-26.91-26.92-26.91-64.43v-391.47q0-37.516 26.913-64.429t64.429-26.913h130.49q37.516 0 64.429 26.913t26.913 64.429v13.049h274.03q37.516 0 64.429 26.913t26.913 64.429z"/><path d="m1653.2 1336.4v287.08q0 37.516-26.913 64.429t-64.429 26.913h-495.86q-37.516 0-64.429-26.913t-26.913-64.429v-391.47q0-37.516 26.913-64.429t64.429-26.913h130.49q37.516 0 64.429 26.913t26.913 64.429v13.049h274.03q37.516 0 64.429 26.914 26.913 26.913 26.913 64.429z"/><path d="m1653.2 654.02v287.08q0 37.516-26.913 64.429t-64.429 26.913h-495.86q-37.516 0-64.429-26.913t-26.913-64.429v-391.47q0-37.516 26.913-64.429t64.429-26.913h130.49q37.516 0 64.429 26.913t26.913 64.429v13.049h274.03q37.516 0 64.429 26.913t26.913 64.429z"/></g><path stroke-linejoin="round" d="m600.75 492.64v949.1h381.89" stroke="var(--icon-colour__blue)" stroke-width="71.125" fill="none"/><path d="m597.94 807.14h539.13" fill-rule="evenodd" stroke="var(--icon-colour__blue)" stroke-width="71.125"/></svg> </span>
  </span>).</li>
<li>Select:<br>





  <div class="stroom-menu">
    
    

      

      
      


      

  
  
  <div class="stroom-menu-item-background" style="margin-top: 0px;">
    
    <div class="stroom-menu-item " >
        <div class="stroom-menu-item-icon">
          <span class="stroom-icon inline-svg-button icon-button  " >
    <span class="face" title="Add"><svg xmlns="http://www.w3.org/2000/svg" width="1792" height="1792" viewBox="0 0 1792 1792"><path style="fill:currentColor" d="m 1600,800 0,192 q 0,40 -28,68 -28,28 -68,28 l -416,0 0,416 q 0,40 -28,68 -28,28 -68,28 l -192,0 q -40,0 -68,-28 -28,-28 -28,-68 l 0,-416 -416,0 q -40,0 -68,-28 -28,-28 -28,-68 l 0,-192 q 0,-40 28,-68 28,-28 68,-28 l 416,0 0,-416 q 0,-40 28,-68 28,-28 68,-28 l 192,0 q 40,0 68,28 28,28 28,68 l 0,416 416,0 q 40,0 68,28 28,28 28,68 z"/></svg> </span>
  </span>
        </div>

      <div class="stroom-menu-item-text">New
      </div>
        <div class="stroom-menu-item-arrow">
          <span class="stroom-icon inline-svg-button icon-button  " >
    <span class="face" title="Arrow right"><svg xmlns="http://www.w3.org/2000/svg" width="1427.7665" height="1427.7665" viewBox="0 0 1427.7665 1427.7665"><g style="stroke:currentColor;stroke-width:167.567"><path d="m 415.05387,83.70929 c -39.92654,0.4303 -75.41463,48.3887 -40.0468,81.9121 C 567.552,348.69899 760.75555,531.15431 953.73208,713.82391 760.75555,896.49341 567.552,1078.9486 375.00707,1262.0262 c -46.19471,43.7855 28.48812,112.1966 76.0571,67.1681 195.93558,-185.823 392.95261,-370.82479 587.98693,-557.52749 5.6117,-4.8034 10.4633,-10.2473 14.4855,-16.1231 9.643,-12.4844 13.9638,-27.0796 13.6909,-41.7198 0.2729,-14.6402 -4.0479,-29.2354 -13.6909,-41.7198 -4.0222,-5.8758 -8.8738,-11.3198 -14.4855,-16.1231 C 844.01678,469.27821 646.99975,284.27629 451.06417,98.45319 439.91519,87.89979 427.27628,83.57749 415.05387,83.70929 Z"/></g></svg> </span>
  </span>
        </div>
    </div>
  </div>

      

      
      
        
      


      

  
  
  <div class="stroom-menu-item-background" style="margin-top: 7px;">
    
    <div class="stroom-menu-item stroom-menu-item-leaf" >
        <div class="stroom-menu-item-icon">
          <span class="stroom-icon inline-svg-button icon-button  " >
    <span class="face" title="Elastic index"><!-- Generator: Adobe Illustrator 25.2.0, SVG Export Plug-In . SVG Version: 6.00 Build 0) --><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 2500 2500" style="enable-background:new 0 0 2500 2500;" xml:space="preserve"><style type="text/css"> .st0{fill:#4A4B4C;} .st1{fill:var(--icon-colour__white);} .st2{fill:#F4BD19;} .st3{fill:#3CBEB1;} .st4{fill:#E9478C;} .st5{fill:#2C458F;} .st6{fill:#95C63D;} .st7{fill:#176655;} </style><g><path class="st0" d="M1240,1071.5c220.3,0,426.2-20,617.7-60c191.5-40,80.9,38.1,191.5-40l114,129.1c0,64.1,99.8,94.5,4,149.3 s-225.9,98.3-390.4,130.4s-343.5,48.1-536.8,48.1s-372.3-16-536.8-48.1s-294.7-75.5-390.4-130.4s-143.6-114.3-143.6-178.5v-237 c110.6,78.1,261.7,137.1,453.2,177.1C813.8,1051.5,1019.7,1071.5,1240,1071.5z M1240,2499.4c-193.4,0-372.3-16-536.8-48.1 s-294.7-75.5-390.4-130.4s-143.6-114.3-143.6-178.5v-237c110.6,78.1,261.7,137.1,453.2,177.1c191.5,40,397.4,60,617.7,60 M1776.8,1915.8c-164.5,32.1-343.5,48.1-536.8,48.1s-372.3-16-536.8-48.1c-164.5-32.1-294.7-75.5-390.4-130.4 S169.1,1671.1,169.1,1607v-237C279.7,1448,430.8,1507,622.3,1547c191.5,40,397.4,60,617.7,60s426.2-20,617.7-60 c191.5-40,163.5-99,274.1-177.1l179.1,237c0,64.1-47.9,123.6-143.6,178.5 M1240,0.6c193.4,0,372.3,16,536.8,48.1 s294.7,75.5,390.4,130.4s143.6,114.3,143.6,178.5v178.5c0,64.1-47.9,123.6-143.6,178.5s-225.9,98.3-390.4,130.4 C1612.3,877,1433.4,893,1240,893s-372.3-16-536.8-48.1c-164.5-32.1-294.7-75.5-390.4-130.4S169.1,600.2,169.1,536.1V357.6 c0-64.1,47.9-123.6,143.6-178.5S538.6,80.8,703.2,48.8S1046.6,0.6,1240,0.6z"/></g><path class="st1" d="M2518.6,1692.2c0-151.6-94.2-282.5-234-334c5.9-32,8.9-64.5,8.8-97.1c0-281-228.1-509.1-509.1-509.1 c-163.3,0-316.3,78-412,211.9c-47.1-36.8-104.5-55.9-164.8-55.9c-148.6,0-270.7,120.7-270.7,270.7c0,32.4,5.9,64.7,16.2,94.2 c-141.2,48.6-236.9,183.9-236.9,334c0,151.6,94.2,284,235.4,335.5c-5.9,30.9-8.8,63.3-8.8,97.1c0,279.6,228.1,507.6,507.6,507.6 c164.8,0,316.4-79.5,412-211.9c47.1,36.8,105.9,57.4,166.3,57.4c148.6,0,270.7-120.7,270.7-270.7c0-32.4-5.9-64.7-16.2-94.2 C2421.4,1977.6,2518.5,1842.2,2518.6,1692.2L2518.6,1692.2z"/><path class="st2" d="M1420.9,1522.9l401.7,183.9l406.1-356.1c5.9-29.6,8.9-59.6,8.8-89.8c0-250.1-203-453.2-453.2-453.2 c-150.1,0-289.9,73.6-373.7,197.2l-67.7,350.2L1420.9,1522.9L1420.9,1522.9z"/><path class="st3" d="M1004.5,1948.2c-5.9,29.4-8.8,60.3-8.8,91.2c0,250.1,204.5,454.7,454.7,454.7c151.6,0,291.3-75,376.7-198.6 l66.2-350.2l-89.8-170.7l-403.2-183.9L1004.5,1948.2L1004.5,1948.2z"/><path class="st4" d="M1001.5,1252.2l275.2,64.7l61.8-313.4c-38.3-29.4-83.9-44.1-132.4-44.1c-119.2,0-217.8,97.1-217.8,217.8 C988.3,1202.2,992.7,1228.7,1001.5,1252.2L1001.5,1252.2z"/><path class="st5" d="M978,1318.4c-123.6,39.7-208.9,158.9-208.9,288.4c0,126.5,78,239.8,195.7,284l387-350.2l-70.6-151.5L978,1318.4 L978,1318.4z"/><path class="st6" d="M1897.6,2294c38.3,29.4,83.9,45.6,131,45.6c119.2,0,217.8-97.1,217.8-217.8c0-26.5-4.4-51.5-13.2-75 l-275.2-64.7L1897.6,2294L1897.6,2294z"/><path class="st7" d="M1953.5,1909.9l303.1,70.6c123.6-41.2,208.9-158.9,208.9-288.4c0-126.5-78-238.4-195.7-284l-397.3,347.2 L1953.5,1909.9L1953.5,1909.9z"/></svg> </span>
  </span>
        </div>

      <div class="stroom-menu-item-text">Elastic Index
      </div>
    </div>
  </div>
  </div>


</li>
<li>Enter a name for the index document and click 



<span class="stroom-button" title="OK button" >
  <span class="stroom-button-text">OK</span>
</span>
.</li>
<li>Click <span class="stroom-icon inline-svg-button icon-button  " >
    <span class="face" title="Ellipsis"><svg xmlns="http://www.w3.org/2000/svg" height="1792" width="1792" version="1.1" viewBox="0 0 1792 1792"><g style="fill:currentColor"><circle cx="342.43176" cy="896" r="208.83429"/><circle cx="896" cy="896" r="208.83429"/><circle cx="1449.5682" cy="896" r="208.83429"/></g></svg> </span>
  </span> next to the <code>Cluster configuration</code> field label.</li>
<li>In the dialog that appears, select the Elastic Cluster document where the index exists, and click 



<span class="stroom-button" title="OK button" >
  <span class="stroom-button-text">OK</span>
</span>
.</li>
<li>Enter the name of an index or data stream in <code>Index name or pattern</code>.
Data view (formerly known as <em>index pattern</em>) 







  
  

<span class="external-link">
  <a href="https://www.elastic.co/guide/en/kibana/current/data-views.html#settings-create-pattern" target="_blank" class="" style="" title="syntax (external link to https://www.elastic.co/guide/en/kibana/current/data-views.html#settings-create-pattern)">
    <span>syntax</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
 is supported, which enables you to query multiple indices or data streams at once.
For example: <code>stroom-events-v1</code>.</li>
<li>(Optional) Set <code>Search slices</code>, which is the number of parallel workers that will query the index.
For very large indices, increasing this value up to and including the number of shards can increase scroll performance, which will allow you to download results faster.</li>
<li>(Optional) Set <code>Search scroll size</code>, which specifies the number of documents to return in each search response.
Greater values generally increase efficiency.
By default, Elasticsearch limits this number to <code>10,000</code>.</li>
<li>Click <code>Test Connection</code>.
A dialog will appear with the result, which will state <code>Connection Success</code> if the connection was successful and the index pattern matched one or more indices.</li>
<li>Click <span class="stroom-icon inline-svg-button icon-button  " >
    <span class="face" title="Save"><svg xmlns="http://www.w3.org/2000/svg" width="1792" height="1792" viewBox="0 0 1792 1792"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path style="fill:currentColor;stroke-width:0.570676;stroke-dasharray:none" d="M 339.40234 116.52148 C 216.56504 116.52148 116.69531 216.3912 116.69531 339.22852 L 116.69531 1452.7715 C 116.69531 1575.6089 216.56504 1675.4785 339.40234 1675.4785 L 1452.5977 1675.4785 C 1575.4349 1675.4785 1675.3047 1575.6089 1675.3047 1452.7715 L 1675.3047 598.82422 C 1675.3047 539.66744 1651.9901 482.94523 1610.2324 441.1875 L 1610.5801 440.83984 L 1351.334 181.59375 C 1309.5761 139.83602 1252.8561 116.52148 1193.6992 116.52148 L 339.40234 116.52148 z M 339.40234 283.55273 L 395.08008 283.55273 L 395.08008 645.45312 C 395.08008 691.73461 432.31423 728.96875 478.5957 728.96875 L 1146.7207 728.96875 C 1193.0023 728.96875 1230.2363 691.73461 1230.2363 645.45312 L 1230.2363 297.12305 C 1231.2803 298.167 1231.9756 298.8623 1233.0195 299.90625 L 1492.6152 558.80469 L 1492.2676 559.1543 C 1502.707 569.59373 1508.6211 583.8594 1508.6211 598.47461 L 1508.6211 1452.7715 C 1508.6211 1483.3939 1483.5678 1508.4473 1452.9453 1508.4473 L 1395.6113 1508.4473 L 1395.6113 1059.8359 C 1395.6113 981.08539 1331.5826 917.05859 1252.832 917.05859 L 539.16797 917.05859 C 460.41738 917.05859 396.38867 981.08539 396.38867 1059.8359 L 396.38867 1508.4473 L 339.40234 1508.4473 C 308.78001 1508.4473 283.72656 1483.3939 283.72656 1452.7715 L 283.72656 339.22852 C 283.72656 308.60619 308.78001 283.55273 339.40234 283.55273 z M 562.11133 283.55273 L 1063.2051 283.55273 L 1063.2051 561.9375 L 562.11133 561.9375 L 562.11133 283.55273 z M 538.94531 1024.1426 L 1252.832 1024.1426 C 1272.4639 1024.1426 1288.5273 1040.2041 1288.5273 1059.8359 L 1288.5273 1508.4473 L 503.25 1508.4473 L 503.25 1059.8359 C 503.25 1040.2041 519.31334 1024.1426 538.94531 1024.1426 z " /></svg> </span>
  </span>.</li>
</ol>
<h3 id="set-the-elastic-index-document-as-the-dashboard-data-source">Set the Elastic Index document as the dashboard data source</h3>
<ol>
<li>Open or create a dashboard.</li>
<li>Click <span class="stroom-icon inline-svg-button icon-button  " >
    <span class="face" title="Settings"><svg xmlns="http://www.w3.org/2000/svg" width="1792" height="1792" viewBox="0 0 1792 1792"><path style="fill:currentColor" d="M1152 896q0-106-75-181t-181-75-181 75-75 181 75 181 181 75 181-75 75-181zm512-109v222q0 12-8 23t-20 13l-185 28q-19 54-39 91 35 50 107 138 10 12 10 25t-9 23q-27 37-99 108t-94 71q-12 0-26-9l-138-108q-44 23-91 38-16 136-29 186-7 28-36 28h-222q-14 0-24.5-8.5t-11.5-21.5l-28-184q-49-16-90-37l-141 107q-10 9-25 9-14 0-25-11-126-114-165-168-7-10-7-23 0-12 8-23 15-21 51-66.5t54-70.5q-27-50-41-99l-183-27q-13-2-21-12.5t-8-23.5v-222q0-12 8-23t19-13l186-28q14-46 39-92-40-57-107-138-10-12-10-24 0-10 9-23 26-36 98.5-107.5t94.5-71.5q13 0 26 10l138 107q44-23 91-38 16-136 29-186 7-28 36-28h222q14 0 24.5 8.5t11.5 21.5l28 184q49 16 90 37l142-107q9-9 24-9 13 0 25 10 129 119 165 170 7 8 7 22 0 12-8 23-15 21-51 66.5t-54 70.5q26 50 41 98l183 28q13 2 21 12.5t8 23.5z"/></svg></span>
  </span> in the <code>Query</code> panel.</li>
<li>Click <span class="stroom-icon inline-svg-button icon-button  " >
    <span class="face" title="Ellipsis"><svg xmlns="http://www.w3.org/2000/svg" height="1792" width="1792" version="1.1" viewBox="0 0 1792 1792"><g style="fill:currentColor"><circle cx="342.43176" cy="896" r="208.83429"/><circle cx="896" cy="896" r="208.83429"/><circle cx="1449.5682" cy="896" r="208.83429"/></g></svg> </span>
  </span> next to the <code>Data Source</code> field label.</li>
<li>Select the Elastic Index document you created and click 



<span class="stroom-button" title="OK button" >
  <span class="stroom-button-text">OK</span>
</span>
.</li>
<li>Configure the query expression as explained in <a href="../../../../docs/quick-start-guide/dashboard/#configuring-the-query-expression">Dashboards</a>.
Note the <a href="#query-expression-tips">tips</a> for particular Elasticsearch field mapping data types.</li>
<li><a href="../../../../docs/quick-start-guide/dashboard/#configuring-the-table">Configure the table</a>.</li>
</ol>
<h2 id="query-expression-tips">Query expression tips</h2>
<p>Certain Elasticsearch field mapping types support special syntax when used in a Stroom dashboard query expression.</p>
<p>To identify the field mapping type for a particular field:</p>
<ol>
<li>Click <span class="stroom-icon inline-svg-button icon-button  " >
    <span class="face" title="Add"><svg xmlns="http://www.w3.org/2000/svg" width="1792" height="1792" viewBox="0 0 1792 1792"><path style="fill:currentColor" d="m 1600,800 0,192 q 0,40 -28,68 -28,28 -68,28 l -416,0 0,416 q 0,40 -28,68 -28,28 -68,28 l -192,0 q -40,0 -68,-28 -28,-28 -28,-68 l 0,-416 -416,0 q -40,0 -68,-28 -28,-28 -28,-68 l 0,-192 q 0,-40 28,-68 28,-28 68,-28 l 416,0 0,-416 q 0,-40 28,-68 28,-28 68,-28 l 192,0 q 40,0 68,28 28,28 28,68 l 0,416 416,0 q 40,0 68,28 28,28 28,68 z"/></svg> </span>
  </span> in the <code>Query</code> panel to add a new expression item.</li>
<li>Select the Elasticsearch field name in the drop-down list.</li>
<li>Note the blue data type indicator to the far right of the row.
Common examples are: <code>keyword</code>, <code>text</code> and <code>number</code>.</li>
</ol>
<p>After you identify the field mapping type, move the mouse cursor over the mapping type indicator.
A tooltip appears, explaining various types of queries you can perform against that particular field&rsquo;s type.</p>
<h2 id="searching-multiple-indices">Searching multiple indices</h2>
<p>Using data view (index pattern) syntax, you can create powerful dashboards that query multiple indices at a time.
An example of this is where you have multiple indices covering different types of email systems.
Let&rsquo;s assume these indices are named: <code>stroom-exchange-v1</code>, <code>stroom-domino-v1</code> and <code>stroom-mailu-v1</code>.</p>
<p>There is a common set of fields across all three indices: <code>@timestamp</code>, <code>Subject</code>, <code>Sender</code> and <code>Recipient</code>.
You want to allow search across all indices at once, in effect creating a unified <em>email</em> dashboard.</p>
<p>You can achieve this by creating an Elastic Index document called (for example) <code>Elastic-Email-Combined</code> and setting the property <code>Index name or pattern</code> to: <code>stroom-exchange-v1,stroom-domino-v1,stroom-mailu-v1</code>.
Click <span class="stroom-icon inline-svg-button icon-button  " >
    <span class="face" title="Save"><svg xmlns="http://www.w3.org/2000/svg" width="1792" height="1792" viewBox="0 0 1792 1792"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path style="fill:currentColor;stroke-width:0.570676;stroke-dasharray:none" d="M 339.40234 116.52148 C 216.56504 116.52148 116.69531 216.3912 116.69531 339.22852 L 116.69531 1452.7715 C 116.69531 1575.6089 216.56504 1675.4785 339.40234 1675.4785 L 1452.5977 1675.4785 C 1575.4349 1675.4785 1675.3047 1575.6089 1675.3047 1452.7715 L 1675.3047 598.82422 C 1675.3047 539.66744 1651.9901 482.94523 1610.2324 441.1875 L 1610.5801 440.83984 L 1351.334 181.59375 C 1309.5761 139.83602 1252.8561 116.52148 1193.6992 116.52148 L 339.40234 116.52148 z M 339.40234 283.55273 L 395.08008 283.55273 L 395.08008 645.45312 C 395.08008 691.73461 432.31423 728.96875 478.5957 728.96875 L 1146.7207 728.96875 C 1193.0023 728.96875 1230.2363 691.73461 1230.2363 645.45312 L 1230.2363 297.12305 C 1231.2803 298.167 1231.9756 298.8623 1233.0195 299.90625 L 1492.6152 558.80469 L 1492.2676 559.1543 C 1502.707 569.59373 1508.6211 583.8594 1508.6211 598.47461 L 1508.6211 1452.7715 C 1508.6211 1483.3939 1483.5678 1508.4473 1452.9453 1508.4473 L 1395.6113 1508.4473 L 1395.6113 1059.8359 C 1395.6113 981.08539 1331.5826 917.05859 1252.832 917.05859 L 539.16797 917.05859 C 460.41738 917.05859 396.38867 981.08539 396.38867 1059.8359 L 396.38867 1508.4473 L 339.40234 1508.4473 C 308.78001 1508.4473 283.72656 1483.3939 283.72656 1452.7715 L 283.72656 339.22852 C 283.72656 308.60619 308.78001 283.55273 339.40234 283.55273 z M 562.11133 283.55273 L 1063.2051 283.55273 L 1063.2051 561.9375 L 562.11133 561.9375 L 562.11133 283.55273 z M 538.94531 1024.1426 L 1252.832 1024.1426 C 1272.4639 1024.1426 1288.5273 1040.2041 1288.5273 1059.8359 L 1288.5273 1508.4473 L 503.25 1508.4473 L 503.25 1059.8359 C 503.25 1040.2041 519.31334 1024.1426 538.94531 1024.1426 z " /></svg> </span>
  </span> and re-open the dashboard.
You&rsquo;ll notice that the available fields are a union of the fields across all three indices.
You can now search by any of these - in particular, the fields common to all three.</p>

</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '8.'; page-break-before: always">
    
  <h1 id="pg-93792f59f3e7ed037cd894c9ce091be6">8 - Stroom Query Language</h1>
    <div class="lead">Stroom Query Language (StroomQL) is a query language for retrieving data in Stroom.</div>
	<!--
NOTE:
Stroom has hard coded anchors to link to the keyword headings on this page so don't
change the headings without changing the anchors in Stroom.
-->

<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Warning</h4>

    Stroom Query Language is an experimental feature that is currently in Beta so is subject to change without warning.

</div>


<h2 id="query-format">Query Format</h2>
<p>Stroom Query Language (StroomQL) is a text based replacement for the existing <span class="glossary-link">
  <a href="../../../../docs/glossary/#dashboard" title="Glossary entry for Dashboard">
    <span>Dashboard</span>
    <i class="glossary-link-icon fas fa-book fa-sm text-primary"></i>
  </a>
</span> query builder and allows you to express the same queries in text form as well as providing additional functionality.
It is currently used on the <em>Query</em> entity as the means of defining a query.</p>
<p>The following shows the supported syntax for a StroomQL query.</p>
<pre><code class="language-stroomql">from &lt;DATA_SOURCE&gt;
where &lt;FIELD&gt; &lt;CONDITION&gt; &lt;VALUE&gt; [and|or|not]
[and|or|not]
[window] &lt;TIME_FIELD&gt; by &lt;WINDOW_SIZE&gt; [advance &lt;ADVANCE_WINDOW_SIZE&gt;]
[filter] &lt;FIELD&gt; &lt;CONDITION&gt; &lt;VALUE&gt; [and|or|not]
[and|or|not]
[eval...] &lt;FIELD&gt; = &lt;EXPRESSION&gt;
[having] &lt;FIELD&gt; &lt;CONDITION&gt; &lt;VALUE&gt; [and|or|not]
[group by] &lt;FIELD&gt;
[sort by] &lt;FIELD&gt; [desc|asc] // asc by default
[limit] &lt;MAX_ROWS&gt; 
select &lt;FIELD&gt; [as &lt;COLUMN NAME&gt;], ...
[vis as] &lt;VIS_NAME&gt; (&lt;VIS_CONTROL_ID_1&gt; = &lt;COLUMN_1&gt;, &lt;VIS_CONTROL_ID_2&gt; = &lt;COLUMN_2&gt;)
</code></pre>
<h2 id="keywords">Keywords</h2>
<h3 id="from">From</h3>
<p>The first part of a StroomQL expression is the <code>from</code> clause that defines the single data source to query.</p>
<p>Select the data source to query, e.g.</p>
<pre><code class="language-stroomql">from my_source
</code></pre>
<p>If the name of the data source contains whitespace then it must be quoted, e.g.</p>
<pre><code class="language-stroomql">from &quot;my source&quot;
</code></pre>
<h3 id="where">Where</h3>
<p>Use <code>where</code> to construct query criteria, e.g.</p>
<pre><code class="language-text">where feed = &quot;my feed&quot;
</code></pre>
<p>Add boolean logic with <code>and</code>, <code>or</code> and <code>not</code> to build complex criteria, e.g.</p>
<pre><code class="language-text">where feed = &quot;my feed&quot;
or feed = &quot;other feed&quot;
</code></pre>
<p>Use brackets to group logical sub expressions, e.g.</p>
<pre><code class="language-text">where user = &quot;bob&quot;
and (feed = &quot;my feed&quot; or feed = &quot;other feed&quot;)
</code></pre>
<h4 id="conditions">Conditions</h4>
<p>Supported conditions are:</p>
<ul>
<li><code>=</code></li>
<li><code>!=</code></li>
<li><code>&gt;</code></li>
<li><code>&gt;=</code></li>
<li><code>&lt;</code></li>
<li><code>&lt;=</code></li>
<li><code>is null</code></li>
<li><code>is not null</code></li>
</ul>
<h4 id="andornot">And|Or|Not</h4>
<p>Logical operators to add to where and filter clauses.</p>
<h4 id="bracket-groups">Bracket groups</h4>
<p>You can force evaluation of items in a specific order using bracketed groups.</p>
<pre><code class="language-stroomql">and X = 5 OR (name = foo and surname = bar)
</code></pre>
<h3 id="window">Window</h3>
<pre><code class="language-stroomql">window &lt;TIME_FIELD&gt; by &lt;WINDOW_SIZE&gt; [advance &lt;ADVANCE_WINDOW_SIZE&gt;]
</code></pre>
<p>Windowing groups data by a specified window size applied to a time field.
A window inserts additional rows for future periods so that rows for future periods contain count columns for previous periods.</p>
<p>Specify the field to window by and a duration.
Durations are specified in simple terms e.g. <code>1d</code>, <code>2w</code> etc.</p>
<p>By default, a window will insert a count into the next period row.
This is because by default we advance by the specified window size.
If you wish to advance by a different duration you can specify the advance amount which will insert counts into multiple future rows.</p>
<h3 id="filter">Filter</h3>
<p>Use <code>filter</code> to filter values that have not been indexed during search retrieval.
This is used the same way as the <code>where</code> clause but applies to data after being retrieved from the index, e.g.</p>
<pre><code class="language-stroomql">filter obscure_field = &quot;some value&quot;
</code></pre>
<p>Add boolean logic with <code>and</code>, <code>or</code> and <code>not</code> to build complex criteria as supported by the <code>where</code> clause.
Use brackets to group logical sub expressions as supported by the <code>where</code> clause.</p>

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Note</h4>


    As filters do not make use of the index they can be considerably slower than a <code>where</code> clause, however they allow filtering on fields that have not been indexed for some reason.
Frequent use of <code>filter</code> on a field suggests you may want to consider including that field in an index.

</div>


<h3 id="eval">Eval</h3>
<p>Use <code>eval</code> to assign the value returned from a function to a named variable, e.g.</p>
<pre><code class="language-stroomql">eval my_count = count()
</code></pre>
<p>Here the result of the <code>count()</code> function is being stored in a variable called <code>my_count</code>.
Functions can be nested and applied to variables, e.g.</p>
<pre><code class="language-stroomql">eval new_name = concat(
  substring(name, 3, 5),
  substring(name, 8, 9))
</code></pre>
<p>Note that all fields in the data source selected using <code>from</code> will be available as variables by default.</p>
<p>Multiple <code>eval</code> statements can also be used to breakup complex function expressions and make it easier to comment out individual evaluations, e.g.</p>
<pre><code class="language-stroomql">eval name_prefix = substring(name, 3, 5)
eval name_suffix = substring(name, 8, 9)
eval new_name = concat(
  name_prefix,
  name_suffix)
</code></pre>
<p>Variables can be reused, e.g.</p>
<pre><code class="language-stroomql">eval name_prefix = substring(name, 3, 5)
eval new_name = substring(name, 8, 9)
eval new_name = concat(
  name_prefix,
  new_name)
</code></pre>
<p>In this example, the second assignment of <code>new_name</code> will override the value initially assigned to it.
Note that that when reusing a variable name, the assignment can depend on the previous value assigned to that variable.</p>
<p>Add boolean logic with <code>and</code>, <code>or</code> and <code>not</code> to build complex criteria, e.g.</p>
<pre><code class="language-stroomql">where feed = &quot;my feed&quot; or feed = &quot;other feed&quot;
</code></pre>
<p>Use brackets to group logical sub expressions, e.g.</p>
<pre><code class="language-stroomql">where user = &quot;bob&quot; and (feed = &quot;my feed&quot; or feed = &quot;other feed&quot;)
</code></pre>
<h3 id="having">Having</h3>
<p>A post aggregate filter that is applied at query time to return only rows that match the <code>having</code> conditions.</p>
<pre><code class="language-stroomql">having count &gt; 3
</code></pre>
<h3 id="group-by">Group By</h3>
<p>Use to group by columns, e.g.</p>
<pre><code class="language-stroomql">group by feed
</code></pre>
<p>You can group across multiple columns, e.g.</p>
<pre><code class="language-stroomql">group by feed, name
</code></pre>
<p>You can create nested groups, e.g.</p>
<pre><code class="language-stroomql">group by feed
group by name
</code></pre>
<h3 id="sort-by">Sort By</h3>
<p>Use to sort by columns, e.g.</p>
<pre><code class="language-stroomql">sort by feed
</code></pre>
<p>You can sort across multiple columns, e.g.</p>
<pre><code class="language-stroomql">sort by feed, name
</code></pre>
<p>You can change the sort direction, e.g.</p>
<pre><code class="language-stroomql">sort by feed asc
</code></pre>
<p>Or</p>
<pre><code class="language-stroomql">sort by feed desc
</code></pre>
<h3 id="limit">Limit</h3>
<p>Limit the number of results, e.g.</p>
<pre><code class="language-stroomql">limit 10
</code></pre>
<h3 id="select">Select</h3>
<p>The <code>select</code> keyword is used to define the fields that will be selected out of the data source (and any <code>eval</code>&rsquo;d fields) for display in the table output.</p>
<pre><code class="language-stroomql">select feed, name
</code></pre>
<p>You can optionally rename the fields so that they appear in the table with more human friendly names.</p>
<pre><code class="language-stroomql">select feed as 'my feed column',
  name as 'my name column'
</code></pre>
<h3 id="show">Show</h3>
<p>The <code>show</code> keyword is used to tell StroomQL how to show the data resulting from the <code>select</code>.
A Stroom visualisation can be specified and then passed column values from the <code>select</code> for the visualisation control properties.</p>
<pre><code class="language-stroomql">show LineChart(x = EventTime, y = count)
show Doughnut(names = Feed, values = count)
</code></pre>
<p>For visualisations that contain spaces in their names it is necessary to use quotes, e.g.</p>
<pre><code class="language-stroomql">show &quot;My Visualisation&quot; (x = EventTime, y = count)
</code></pre>
<h2 id="comments">Comments</h2>
<h3 id="single-line">Single line</h3>
<p>StroomQL supports single line comments using <code>//</code>.
For example:</p>
<pre><code class="language-stroomql">from &quot;index_view&quot; // view
where EventTime &gt; now() - 1227d
// and StreamId = 1210
select StreamId as &quot;Stream Id&quot;, EventTime as &quot;Event Time&quot;
</code></pre>
<h3 id="multi-line">Multi line</h3>
<p>Multiple lines can be commented by surrounding sections with <code>/*</code> and <code>*/</code>.
For example:</p>
<pre><code class="language-stroomql">from &quot;index_view&quot; // view
where EventTime &gt; now() - 1227d
/*
eval FirstName = lowerCase(substringBefore(UserId, '.'))
eval FirstName = any(FirstName)
*/
select StreamId as &quot;Stream Id&quot;, EventTime as &quot;Event Time&quot;
</code></pre>
<h2 id="examples">Examples</h2>
<p>The following are various example queries.</p>
<pre><code class="language-stroomql">// add a where
from &quot;index_view&quot; // view
where EventTime &gt; now() - 1227d
// and StreamId = 1210
eval UserId = any(upperCase(UserId))
eval FirstName = lowerCase(substringBefore(UserId, '.'))
eval FirstName = any(FirstName)
eval Sl = stringLength(FirstName)
eval count = count()
group by StreamId
sort by Sl desc
select Sl, StreamId as &quot;Stream Id&quot;, EventId as &quot;Event Id&quot;, EventTime as &quot;Event Time&quot;, UserId as &quot;User Id&quot;, FirstName, count
limit 10
</code></pre>
<pre><code class="language-stroomql">from &quot;index_view&quot; // view
// add a where
where EventTime &gt; now() - 1227d
// and StreamId = 1210
eval UserId = any(upperCase(UserId))
eval FirstName = lowerCase(substringBefore(UserId, '.'))
eval FirstName = any(FirstName)
eval Sl = stringLength(FirstName)
eval count = count()
group by StreamId
sort by Sl desc
select Sl, StreamId as &quot;Stream Id&quot;, EventId as &quot;Event Id&quot;, EventTime as &quot;Event Time&quot;, UserId as &quot;User Id&quot;, FirstName, count
limit 10
</code></pre>
<pre><code class="language-stroomql">from &quot;index_view&quot; // view
// add a where
where EventTime &gt; now() - 1227d
// and StreamId = 1210
eval UserId = any(upperCase(UserId))
eval FirstName = lowerCase(substringBefore(UserId, '.'))
eval FirstName = any(FirstName)
eval Sl = stringLength(FirstName)
// eval count = count()
// group by StreamId
// sort by Sl desc
select StreamId as &quot;Stream Id&quot;, EventId as &quot;Event Id&quot;
// limit 10
</code></pre>
<pre><code class="language-stroomql">from &quot;index_view&quot; // view
// add a where
where EventTime &gt; now() - 1227d
// and StreamId = 1210
eval UserId = any(upperCase(UserId))
eval FirstName = lowerCase(substringBefore(UserId, '.'))
eval FirstName = any(FirstName)
eval Sl = stringLength(FirstName)
eval count = count()
group by StreamId
sort by Sl desc
select Sl, StreamId as &quot;Stream Id&quot;, EventId as &quot;Event Id&quot;, EventTime as &quot;Event Time&quot;, UserId as &quot;User Id&quot;, FirstName, count
limit 10
</code></pre>

</div>




    
	
  



          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/gchq/stroom" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2024 Crown Copyright All Rights Reserved</small>
        
	
      </div>
    </div>
  </div>
</footer>


    </div>
    

<script src='../../../../js/popper.min.js'></script>
<script src='../../../../js/bootstrap.min.js'></script>






<script src='../../../../js/tabpane-persist.js'></script>




















<script src="../../../../js/main.min.cbc1d428d83561c4dec32da9374290554119d7483329f849251cb7153b2ecd07.js" integrity="sha256-y8HUKNg1YcTewy2pN0KQVUEZ10gzKfhJJRy3FTsuzQc=" crossorigin="anonymous"></script>



<script src='../../../../js/prism.js'></script>



  </body>
</html>
