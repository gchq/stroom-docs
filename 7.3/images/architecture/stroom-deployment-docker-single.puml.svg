<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="830px" preserveAspectRatio="none" style="width:771px;height:830px;" version="1.1" viewBox="0 0 771 830" width="771px" zoomAndPan="magnify"><defs><filter height="300%" id="fqkha2e02ud9j" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="312" x="223" y="18.5645">Stroom single-node deployment</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="338" x="210" y="39.9893">All services running in docker containers</text><!--MD5=[def129ecf8b93bb9f2bc263fad41ae57]
cluster dataload_client_host--><polygon fill="#FFFFFF" filter="url(#fqkha2e02ud9j)" points="16,60.2344,26,50.2344,234,50.2344,234,175.2344,224,185.2344,16,185.2344,16,60.2344" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="224" x2="234" y1="60.2344" y2="50.2344"/><line style="stroke:#000000;stroke-width:1.5;" x1="16" x2="224" y1="60.2344" y2="60.2344"/><line style="stroke:#000000;stroke-width:1.5;" x1="224" x2="224" y1="60.2344" y2="185.2344"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="56" x="93" y="76.2295">«device»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="142" x="50" y="92.5264">Datafeed client host</text><!--MD5=[4679e25ee70b82600e0c6d263a8629f1]
cluster ui_client_host--><polygon fill="#FFFFFF" filter="url(#fqkha2e02ud9j)" points="258,60.2344,268,50.2344,462,50.2344,462,175.2344,452,185.2344,258,185.2344,258,60.2344" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="452" x2="462" y1="60.2344" y2="50.2344"/><line style="stroke:#000000;stroke-width:1.5;" x1="258" x2="452" y1="60.2344" y2="60.2344"/><line style="stroke:#000000;stroke-width:1.5;" x1="452" x2="452" y1="60.2344" y2="185.2344"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="56" x="328" y="76.2295">«device»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="128" x="292" y="92.5264">User desktop host</text><!--MD5=[e0722ec75e78acc1feffbca00d4db014]
cluster remote_proxy_host--><polygon fill="#FFFFFF" filter="url(#fqkha2e02ud9j)" points="486,60.2344,496,50.2344,754,50.2344,754,175.2344,744,185.2344,486,185.2344,486,60.2344" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="744" x2="754" y1="60.2344" y2="50.2344"/><line style="stroke:#000000;stroke-width:1.5;" x1="486" x2="744" y1="60.2344" y2="60.2344"/><line style="stroke:#000000;stroke-width:1.5;" x1="744" x2="744" y1="60.2344" y2="185.2344"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="56" x="588" y="76.2295">«device»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="192" x="520" y="92.5264">Remote stroom-proxy host</text><!--MD5=[a965b0978188f3f971fc35d45353625a]
cluster stroom_host--><polygon fill="#FFFFFF" filter="url(#fqkha2e02ud9j)" points="258,219.2344,268,209.2344,676,209.2344,676,813.2344,666,823.2344,258,823.2344,258,219.2344" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="666" x2="676" y1="219.2344" y2="209.2344"/><line style="stroke:#000000;stroke-width:1.5;" x1="258" x2="666" y1="219.2344" y2="219.2344"/><line style="stroke:#000000;stroke-width:1.5;" x1="666" x2="666" y1="219.2344" y2="823.2344"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="56" x="435" y="235.2295">«device»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="88" x="419" y="251.5264">stroom host</text><!--MD5=[863c31b5ce76f6887dd79aa52361fc86]
cluster nginx_container--><rect fill="#FFFFFF" filter="url(#fqkha2e02ud9j)" height="130" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="156" x="282" y="273.2344"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="74" x="323" y="288.2295">«container»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="38" x="341" y="304.5264">nginx</text><!--MD5=[7fccaee69a65186a867cc33c7a4b794f]
cluster stroom_container--><rect fill="#FFFFFF" filter="url(#fqkha2e02ud9j)" height="130" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="138" x="295" y="427.2344"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="74" x="327" y="442.2295">«container»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="52" x="338" y="458.5264">stroom</text><!--MD5=[97431c95c82c05935d68ad678607a584]
cluster stroom_proxy_container--><rect fill="#FFFFFF" filter="url(#fqkha2e02ud9j)" height="130" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="159" x="457" y="427.2344"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="74" x="499.5" y="442.2295">«container»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="143" x="465" y="458.5264">stroom-proxy (local)</text><!--MD5=[345bc6a4946eb22f9ca28fd33c76f1ab]
cluster stroom_log_sender--><rect fill="#FFFFFF" filter="url(#fqkha2e02ud9j)" height="130" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="190" x="462" y="273.2344"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="74" x="520" y="288.2295">«container»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="130" x="492" y="304.5264">stroom-log-sender</text><!--MD5=[85e54d22d69108b3b643f92538fac043]
cluster database_container--><rect fill="#FFFFFF" filter="url(#fqkha2e02ud9j)" height="218" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="298" x="282" y="581.2344"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="74" x="394" y="596.2295">«container»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="65" x="398.5" y="612.5264">Database</text><!--MD5=[fa6e3a9222af9f8270524df4a8c73c70]
cluster stroom_all_dbs--><path d="M306,650.2344 C306,640.2344 431,640.2344 431,640.2344 C431,640.2344 556,640.2344 556,650.2344 L556,765.2344 C556,775.2344 431,775.2344 431,775.2344 C431,775.2344 306,775.2344 306,765.2344 L306,650.2344 " fill="#FFFFFF" filter="url(#fqkha2e02ud9j)" style="stroke:#000000;stroke-width:1.5;"/><path d="M306,650.2344 C306,660.2344 431,660.2344 431,660.2344 C431,660.2344 556,660.2344 556,650.2344 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="53" x="404.5" y="675.2295">«mysql»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="105" x="378.5" y="691.5264">stroom_all_dbs</text><!--MD5=[960860b3b3295bcd1d432a531990153b]
entity dataload_client_app--><polygon fill="#FEFECE" filter="url(#fqkha2e02ud9j)" points="78,116.2344,88,106.2344,218,106.2344,218,158.8281,208,168.8281,78,168.8281,78,116.2344" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="208" x2="218" y1="116.2344" y2="106.2344"/><line style="stroke:#000000;stroke-width:1.5;" x1="78" x2="208" y1="116.2344" y2="116.2344"/><line style="stroke:#000000;stroke-width:1.5;" x1="208" x2="208" y1="116.2344" y2="168.8281"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="84" x="101" y="139.2295">«application»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="93" y="155.5264">Event generator</text><!--MD5=[3677200128df26b0ab79a654f7c368fe]
entity ui_client_browser--><polygon fill="#FEFECE" filter="url(#fqkha2e02ud9j)" points="292.5,116.2344,302.5,106.2344,427.5,106.2344,427.5,158.8281,417.5,168.8281,292.5,168.8281,292.5,116.2344" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="417.5" x2="427.5" y1="116.2344" y2="106.2344"/><line style="stroke:#000000;stroke-width:1.5;" x1="292.5" x2="417.5" y1="116.2344" y2="116.2344"/><line style="stroke:#000000;stroke-width:1.5;" x1="417.5" x2="417.5" y1="116.2344" y2="168.8281"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="95" x="307.5" y="139.2295">«web browser»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="313" y="155.5264">Web browser</text><!--MD5=[fe6f05c8cee4bc5bf69b8554e9ede833]
entity remote_proxy--><polygon fill="#FEFECE" filter="url(#fqkha2e02ud9j)" points="502,116.2344,512,106.2344,628,106.2344,628,158.8281,618,168.8281,502,168.8281,502,116.2344" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="618" x2="628" y1="116.2344" y2="106.2344"/><line style="stroke:#000000;stroke-width:1.5;" x1="502" x2="618" y1="116.2344" y2="116.2344"/><line style="stroke:#000000;stroke-width:1.5;" x1="618" x2="618" y1="116.2344" y2="168.8281"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="84" x="518" y="139.2295">«application»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="517" y="155.5264">stroom-proxy</text><!--MD5=[8824c66cba45be527cf3dd56bcd70cd2]
entity nginx--><polygon fill="#FEFECE" filter="url(#fqkha2e02ud9j)" points="298,334.2344,308,324.2344,422,324.2344,422,376.8281,412,386.8281,298,386.8281,298,334.2344" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="412" x2="422" y1="334.2344" y2="324.2344"/><line style="stroke:#000000;stroke-width:1.5;" x1="298" x2="412" y1="334.2344" y2="334.2344"/><line style="stroke:#000000;stroke-width:1.5;" x1="412" x2="412" y1="334.2344" y2="386.8281"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="84" x="313" y="357.2295">«web server»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="34" x="338" y="373.5264">nginx</text><!--MD5=[86aea49c4f2a65fdacf06468b1745a8a]
entity stroom_dropwiz--><polygon fill="#FEFECE" filter="url(#fqkha2e02ud9j)" points="311,488.2344,321,478.2344,417,478.2344,417,530.8281,407,540.8281,311,540.8281,311,488.2344" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="407" x2="417" y1="488.2344" y2="478.2344"/><line style="stroke:#000000;stroke-width:1.5;" x1="311" x2="407" y1="488.2344" y2="488.2344"/><line style="stroke:#000000;stroke-width:1.5;" x1="407" x2="407" y1="488.2344" y2="540.8281"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="66" x="326" y="511.2295">«java app»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46" x="336" y="527.5264">stroom</text><!--MD5=[c975d85d39155e291a3db48688621a0f]
entity stroom_proxy_dropwiz--><polygon fill="#FEFECE" filter="url(#fqkha2e02ud9j)" points="473,488.2344,483,478.2344,599,478.2344,599,530.8281,589,540.8281,473,540.8281,473,488.2344" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="589" x2="599" y1="488.2344" y2="478.2344"/><line style="stroke:#000000;stroke-width:1.5;" x1="473" x2="589" y1="488.2344" y2="488.2344"/><line style="stroke:#000000;stroke-width:1.5;" x1="589" x2="589" y1="488.2344" y2="540.8281"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="66" x="498" y="511.2295">«java app»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="488" y="527.5264">stroom-proxy</text><!--MD5=[c3d424efc77a9e66034b64d0570dbfed]
entity stroom_log_sender_script--><polygon fill="#FEFECE" filter="url(#fqkha2e02ud9j)" points="477.5,334.2344,487.5,324.2344,636.5,324.2344,636.5,376.8281,626.5,386.8281,477.5,386.8281,477.5,334.2344" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="626.5" x2="636.5" y1="334.2344" y2="324.2344"/><line style="stroke:#000000;stroke-width:1.5;" x1="477.5" x2="626.5" y1="334.2344" y2="334.2344"/><line style="stroke:#000000;stroke-width:1.5;" x1="626.5" x2="626.5" y1="334.2344" y2="386.8281"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="50" x="527" y="357.2295">«script»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="492.5" y="373.5264">stroom-log-sender</text><!--MD5=[40b2f2205cc740157f5e31447dce3a90]
entity stroom_db--><rect fill="#FEFECE" filter="url(#fqkha2e02ud9j)" height="52.5938" rx="35" ry="35" style="stroke:#000000;stroke-width:1.5;" width="91" x="448.5" y="706.2344"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="71" x="458.5" y="729.2295">«database»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46" x="471" y="745.5264">stroom</text><!--MD5=[4556cb27c697ea38b95df37aa8ac3618]
entity stroom_stats_db--><rect fill="#FEFECE" filter="url(#fqkha2e02ud9j)" height="52.5938" rx="35" ry="35" style="stroke:#000000;stroke-width:1.5;" width="91" x="322.5" y="706.2344"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="71" x="332.5" y="729.2295">«database»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="352.5" y="745.5264">stats</text><!--MD5=[eff598a3d230a4b3fe1489c601efcf46]
link stroom_dropwiz to stroom_db--><path d="M402.84,541.5444 C412.96,550.9244 423.19,561.8044 431,573.2344 C458.5,613.5044 476.69,667.5544 486.17,700.9944 " fill="none" id="stroom_dropwiz-to-stroom_db" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="487.62,706.1744,489.0548,696.4306,486.2766,701.3582,481.349,698.58,487.62,706.1744" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[4f990febc6486ab9063d0139f8e9efdc]
link stroom_dropwiz to stroom_stats_db--><path d="M364.56,541.4644 C365.32,583.5444 366.68,658.6844 367.44,700.8444 " fill="none" id="stroom_dropwiz-to-stroom_stats_db" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="367.54,706.0744,371.3847,697.0069,367.4541,701.0751,363.3859,697.1445,367.54,706.0744" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[8066c330616ff30344d2bc14b3a7392c]
link stroom_dropwiz to nginx--><path d="M352.72,478.0244 C349.22,453.3144 348.13,418.5444 349.93,392.5644 " fill="none" id="stroom_dropwiz-to-nginx" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="350.33,387.4944,345.6477,396.159,349.9443,392.4795,353.6239,396.7761,350.33,387.4944" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[bf0769b61f4aa6b7ccd3d02a7a51964e]
link nginx to stroom_dropwiz--><path d="M371.91,387.4944 C375.56,412.2144 376.66,446.9844 374.71,472.9544 " fill="none" id="nginx-to-stroom_dropwiz" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="374.28,478.0244,379.0115,469.3865,374.694,473.0415,371.039,468.724,374.28,478.0244" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[7ba3628c1b5996396710a0aab81a7175]
link stroom_proxy_dropwiz to nginx--><path d="M516.63,478.0144 C498.91,460.7144 473.6,438.7344 451,419.2344 C440.31,410.0144 428.71,400.0644 417.33,390.8644 " fill="none" id="stroom_proxy_dropwiz-to-nginx" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="413.14,387.5144,417.6573,396.2662,417.0402,390.6431,422.6632,390.0259,413.14,387.5144" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[e2675319a6e5076e1cd90accd23bb7bc]
link nginx to stroom_proxy_dropwiz--><path d="M379.93,387.5144 C390.85,397.6044 404,408.8844 416,419.2344 C437.27,437.5844 460.94,458.1444 481.91,474.9244 " fill="none" id="nginx-to-stroom_proxy_dropwiz" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="486.07,478.2244,481.5176,469.4908,482.1573,475.1114,476.5367,475.7511,486.07,478.2244" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[c8e6ec0f1f08878e82bbe399425a6179]
reverse link nginx to stroom_log_sender_script--><path d="M427.49,355.7344 C444.09,355.7344 460.7,355.7344 477.3,355.7344 " fill="none" id="nginx-backto-stroom_log_sender_script" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="422.33,355.7344,431.33,359.7344,427.33,355.7344,431.33,351.7344,422.33,355.7344" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[989ef6e3dbf0f2cd69ae14acc8487b5d]
link ui_client_browser to nginx--><path d="M360,169.6844 C360,209.1744 360,277.3344 360,318.9944 " fill="none" id="ui_client_browser-to-nginx" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="360,324.1944,364,315.1944,360,319.1944,356,315.1944,360,324.1944" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[a4e1cfae1c63071152643add18806a87]
link dataload_client_app to nginx--><path d="M178.37,169.6844 C217.53,209.5744 285.4,278.7244 326.17,320.2644 " fill="none" id="dataload_client_app-to-nginx" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="330.02,324.1944,326.5587,314.9738,326.5131,320.6304,320.8564,320.5848,330.02,324.1944" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[fb1d713660c745da3a71d8c4842aab4b]
link remote_proxy to nginx--><path d="M504.62,169.3144 C489.76,178.4144 474.53,189.2144 462,201.2344 C425.7,236.0744 395.5,286.0444 377.61,319.3944 " fill="none" id="remote_proxy-to-nginx" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="375.06,324.1944,382.8043,318.1095,377.3981,319.7747,375.7329,314.3685,375.06,324.1944" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[4f53339d73a37c641a7d6e319709c5ba]
@startuml

title
    ==Stroom single-node deployment
    All services running in docker containers
end title

' define a style for the containers
skinparam rectangle {
	roundCorner<<container>> 25
}

' Client hosts
node "Datafeed client host" as dataload_client_host <<device>> {
    node "Event generator" as dataload_client_app <<application>>
}

node "User desktop host" as ui_client_host <<device>> {
    node "Web browser" as ui_client_browser <<web browser>>
}

node "Remote stroom-proxy host" as remote_proxy_host <<device>> {
    node "stroom-proxy" as remote_proxy <<application>>
}


' Single stroom node
node "stroom host" as stroom_host <<device>> {
    rectangle "nginx" as nginx_container <<container>>{
        node "nginx" as nginx <<web server>>
    }

    rectangle "stroom" as stroom_container <<container>>{
        node "stroom" as stroom_dropwiz <<java app>>
    }

    rectangle "stroom-proxy (local)" as stroom_proxy_container <<container>>{
        node "stroom-proxy" as stroom_proxy_dropwiz <<java app>>
    }

    rectangle "stroom-log-sender" as stroom_log_sender <<container>>{
        node "stroom-log-sender" as stroom_log_sender_script <<script>>
    }

    rectangle "Database" as database_container <<container>>{
        database stroom_all_dbs <<mysql>> {
            storage "stroom" as stroom_db <<database>>
            storage "stats" as stroom_stats_db <<database>>
        }
    }

    'DB connections
    stroom_dropwiz - -> stroom_db
    stroom_dropwiz - -> stroom_stats_db

    ' API calls
    stroom_dropwiz - -> nginx
    stroom_proxy_dropwiz - -> nginx
    stroom_log_sender_script -left-> nginx

    'Reverse proxy connections
    nginx - -> stroom_dropwiz
    nginx - -> stroom_proxy_dropwiz
}

'Client connections
ui_client_browser - -> nginx
dataload_client_app - -> nginx
remote_proxy - -> nginx

@enduml

@startuml

title
    ==Stroom single-node deployment
    All services running in docker containers
end title

skinparam rectangle {
	roundCorner<<container>> 25
}

node "Datafeed client host" as dataload_client_host <<device>> {
    node "Event generator" as dataload_client_app <<application>>
}

node "User desktop host" as ui_client_host <<device>> {
    node "Web browser" as ui_client_browser <<web browser>>
}

node "Remote stroom-proxy host" as remote_proxy_host <<device>> {
    node "stroom-proxy" as remote_proxy <<application>>
}


node "stroom host" as stroom_host <<device>> {
    rectangle "nginx" as nginx_container <<container>>{
        node "nginx" as nginx <<web server>>
    }

    rectangle "stroom" as stroom_container <<container>>{
        node "stroom" as stroom_dropwiz <<java app>>
    }

    rectangle "stroom-proxy (local)" as stroom_proxy_container <<container>>{
        node "stroom-proxy" as stroom_proxy_dropwiz <<java app>>
    }

    rectangle "stroom-log-sender" as stroom_log_sender <<container>>{
        node "stroom-log-sender" as stroom_log_sender_script <<script>>
    }

    rectangle "Database" as database_container <<container>>{
        database stroom_all_dbs <<mysql>> {
            storage "stroom" as stroom_db <<database>>
            storage "stats" as stroom_stats_db <<database>>
        }
    }

    stroom_dropwiz - -> stroom_db
    stroom_dropwiz - -> stroom_stats_db

    stroom_dropwiz - -> nginx
    stroom_proxy_dropwiz - -> nginx
    stroom_log_sender_script -left-> nginx

    nginx - -> stroom_dropwiz
    nginx - -> stroom_proxy_dropwiz
}

ui_client_browser - -> nginx
dataload_client_app - -> nginx
remote_proxy - -> nginx

@enduml

PlantUML version 1.2021.5(Sun Apr 25 11:20:28 GMT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>