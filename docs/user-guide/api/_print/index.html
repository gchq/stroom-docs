<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.95.0" />
<link rel="canonical" type="text/html" href="../../../../docs/user-guide/api/">
<meta name="robots" content="index, follow">


<link rel="shortcut icon" href="../../../../favicons/favicon.ico" >
<link rel="apple-touch-icon" href="../../../../favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="../../../../favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="../../../../favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="../../../../favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="../../../../favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="../../../../favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="../../../../favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="../../../../favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="../../../../favicons/android-192x192.png" sizes="192x192">

<title>Application Programming Interfaces (API) | Stroom</title>
<meta name="description" content="Stroom&#39; public REST APIs for querying and interacting with all aspects of Stroom.
">
<meta property="og:title" content="Application Programming Interfaces (API)" />
<meta property="og:description" content="Stroom&#39; public REST APIs for querying and interacting with all aspects of Stroom.
" />
<meta property="og:type" content="website" />
<meta property="og:url" content="/docs/user-guide/api/" /><meta property="og:site_name" content="Stroom" />

<meta itemprop="name" content="Application Programming Interfaces (API)">
<meta itemprop="description" content="Stroom&#39; public REST APIs for querying and interacting with all aspects of Stroom.
"><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Application Programming Interfaces (API)"/>
<meta name="twitter:description" content="Stroom&#39; public REST APIs for querying and interacting with all aspects of Stroom.
"/>




<link rel="preload" href="../../../../scss/main.min.2e61f3e70d0ef56da625d708444e9dc04314bc725456d7699d808b006bb8778c.css" as="style">
<link href="../../../../scss/main.min.2e61f3e70d0ef56da625d708444e9dc04314bc725456d7699d808b006bb8778c.css" rel="stylesheet" integrity="">


<script src='../../../../js/jquery-3.6.0.min.js'></script>


<script src='../../../../js/lunr.min.js'></script>
  
<link rel="stylesheet" href="../../../../css/prism.css"/>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-00000000-0', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  </head>
  <body class="td-section">
    <header>
      <nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
  <a class="navbar-brand" href="../../../../"><span class="navbar-brand__logo navbar-logo"><svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="110.61089" height="30.000004" viewBox="0 0 88.488641 23.999957" id="svg2" inkscape:version="0.91 r13725" sodipodi:docname="logo.svg"><defs id="defs20"/><sodipodi:namedview pagecolor="#989898" bordercolor="#666666" borderopacity="1" objecttolerance="10" gridtolerance="10" guidetolerance="10" inkscape:pageopacity="0" inkscape:pageshadow="2" inkscape:window-width="1920" inkscape:window-height="1137" id="namedview18" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:zoom="5.5951814" inkscape:cx="55.451414" inkscape:cy="16.275348" inkscape:window-x="0" inkscape:window-y="0" inkscape:window-maximized="1" inkscape:current-layer="svg2"/><g id="g4150" style="opacity:.97000002" transform="matrix(0.03883584,0,0,0.03883584,0,-3.1155874e-4)"><path id="path6" d="M121.99991 205.98497C54.999958 205.98497.0 259.98493.0 327.98487c0 66.99994 54.999958 121.99989 121.99991 121.99989h167.99987c24.99998.0 44.99996 20.99998 44.99996 44.99996.0 24.99998-19.99998 44.99996-44.99996 44.99996H109.20929C65.984126 553.87219 27.100843 581.57313.01093599 617.98462H289.99978c66.99994.0 121.99991-54.99996 121.99991-122.9999.0-66.99994-54.99997-121.99989-121.99991-121.99989H121.99991c-24.999984.0-44.999969-19.99999-44.999969-44.99996.0-24.99998 19.999985-44.99996 44.999969-44.99996h228.79045c26.9905-35.88325 65.47093-63.18547 108.21554-76.99994H121.99991z" style="fill:#fff" inkscape:connector-curvature="0"/><path id="path8" d="M601.44485-.00077860649C572.6583 8.3697982 546.49491 22.822962 524.44491 41.902305V205.78969l.002.19528h-.002c-65.11 48e-5-123.03145 30.0199-160.74675 76.99994h160.74675v334.99971h76.99994V282.98491h144.85298c27.16134-36.05885 65.96411-63.39275 109.02184-76.99994H601.44485v-205.98574860649z" style="fill:#fff" inkscape:connector-curvature="0"/><path id="path10" d="m919.42586 205.98497c-113.99519.0-205.99537 92.00648-206.00296 205.99982-15e-5 68.67178.0 137.32749.0 205.99983h77.99994c-.012-68.6493.0176-137.46869.0-205.99983.0846-70.92785 57.05747-128.99988 128.00462-128.99988 5.28623.0 10.49823.32864 15.62183.95311 18.2219-24.51229 41.78461-45.0838 68.42501-60.15146-25.65065-11.43799-54.08662-17.80159-84.04684-17.80159z" style="fill:#fff" inkscape:connector-curvature="0"/><path id="path12" d="m1109.4153 205.98457c-113.99994.0-205.99983 91.99993-205.99983 205.99984.0 112.9999 91.99989 205.9998 205.99983 205.9998 114 0 205.9999-92.9999 205.9999-205.9998.0-113.99991-91.9999-205.99984-205.9999-205.99984zm0 333.99974c-70.9999.0-128.99994-56.99996-128.99994-127.9999.0-70.99995 58.00004-128.9999 128.99994-128.9999 71 0 128.9999 57.99995 128.9999 128.9999.0 70.99994-57.9999 127.9999-128.9999 127.9999z" style="fill:#fff" inkscape:connector-curvature="0"/><path id="path14" d="m1444.4737 205.98457c-113.9999.0-205.9998 91.99993-205.9998 205.99984.0 112.9999 91.9999 205.9998 205.9998 205.9998s205.9999-92.9999 205.9999-205.9998c0-113.99991-92-205.99984-205.9999-205.99984zm0 333.99974c-70.9999.0-128.9999-56.99996-128.9999-127.9999.0-70.99995 58-128.9999 128.9999-128.9999 71 0 128.9999 57.99995 128.9999 128.9999.0 70.99994-57.9999 127.9999-128.9999 127.9999z" style="fill:#fff" inkscape:connector-curvature="0"/><path id="path16" d="m1738.5308 379.98447c0-53 43-97 95.9999-97 53 0 97 44 97 97v237.9997h76.9999v-237.9997c0-53 43-97 96.9999-97 53 0 95.9999 44 95.9999 97v237.9997h77v-237.9997c0-96-77-173.9999-172.9999-173.9999-54.9999.0-103.9999 24.99998-135.9999 64.99995-31.9999-39.99997-79.9999-64.99995-134.9999-64.99995-95.9999.0-173.9998 77.9999-173.9998 173.9999v237.9997h77.9999z" style="fill:#fff" inkscape:connector-curvature="0"/></g></svg></span><span class="navbar-brand__name">Stroom</span></a>
  <div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
    <ul class="navbar-nav mt-2 mt-lg-0">
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="../../../../about/about/"><span>About</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link active" href="../../../../docs/"><span class="active">Documentation</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="../../../../news/"><span>News / Releases</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="../../../../community/"><span>Community</span></a>
      </li>
      <li class="nav-item dropdown mr-4 d-none d-lg-block">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	Stroom Version (7.1)
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
	
	
	
	<a class="dropdown-item" href="../../../../">7.1 (Latest)</a>
	
	<a class="dropdown-item" href="../../../../7.0">7.0</a>
	
	<a class="dropdown-item" href="../../../../legacy">Legacy</a>
	
</div>
</li>
      </ul>
  </div>
  <div class="navbar-nav d-none d-lg-block">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="../../../../offline-search-index.0d5caaa6b3fc3c22ab7c28161b05d967.json"
    data-offline-search-base-href="../../../../"
    data-offline-search-max-results="50"
  >
</div>

  </div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This is the multi-page printable view of this section.
<a href="#" onclick="print();return false;">Click here to print</a>.
</p><p>
<a href="../../../../docs/user-guide/api/">Return to the regular view of this page</a>.
</p>
</div>



<h1 class="title">Application Programming Interfaces (API)</h1>
<div class="lead">Stroom&rsquo; public REST APIs for querying and interacting with all aspects of Stroom.</div>




    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-ebfd226579200a398d8590ddcf775ace">Query APIs</a></li>


    
  

    </ul>


<div class="content">
      <p><em>Stroom</em> has many public REST APIs to allow other systems to interact with <em>Stroom</em>.
Everything that can be done via the user interface can also be done using the API.</p>
<h2 id="swagger">Swagger</h2>
<p>The APIs are available as a <em>Swagger</em> Open API specification in the following forms:</p>
<ul>
<li>JSON - 






  

<span class="external-link">
  <a href="https://gchq.github.io/stroom/v7.1/stroom.json" target="_blank" class="" style="" title="stroom.json (external link)">
    <span>stroom.json</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
</li>
<li>YAML - 






  

<span class="external-link">
  <a href="https://gchq.github.io/stroom/v7.1/stroom.yaml" target="_blank" class="" style="" title="stroom.yaml (external link)">
    <span>stroom.yaml</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
</li>
</ul>
<p>A dynamic 






  

<span class="external-link">
  <a href="https://gchq.github.io/stroom/v7.1" target="_blank" class="" style="" title="Swagger user interface (external link)">
    <span>Swagger user interface</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
 is also available for viewing the API endpoints.</p>
<h2 id="authentication">Authentication</h2>
<p>In order to use the API endpoints you will need to authenticate.
Authentication is achieved using an 



<span class="glossary-link">
  <a href="../../../../docs/glossary/#api-key" title="Glossary entry for API Key">
    <span>API Key</span>
    <i class="glossary-link-icon fas fa-book fa-sm text-primary"></i>
  </a>
</span>
.</p>
<p>You will either need to create an API key for your personal Stroom user account or for a shared processing user account.
Whichever user account you use it will need to have the necessary permissions for each API endpoint it is to be used with.</p>
<p>To create an API key for a user:</p>
<ol>
<li>From the top menu, select:<br>





  <div class="stroom-menu">
    

      

      

  
  
  <div class="stroom-menu-item-background" style="margin-top: 0px;">
    <div class="stroom-menu-item">

      <div class="stroom-menu-item-text">Tools
      </div>
    </div>
  </div>

      

      

  
  
  <div class="stroom-menu-item-background" style="margin-top: 7px;">
    <div class="stroom-menu-item">
          <div class="stroom-menu-item-icon">
            <img 
              class="stroom-icon" 
              src="../../../../images/stroom-ui/key.svg" 
              alt="key.svg">
          </div>

      <div class="stroom-menu-item-text">API Keys
      </div>
    </div>
  </div>
  </div>


</li>
<li>Click <em>Create</em>.</li>
<li>Enter a suitable expiration date.
Short expiry periods are more secure in case the key is compromised.</li>
<li>Select the user account that you are creating the key for.</li>
<li>Click <em>OK</em>.</li>
<li>Select the newly created API Key from the list of keys and double click it to open it.</li>
<li>Click <em>Copy key</em> to copy the key to the clipboard.</li>
</ol>
<p>To make an authenticated API call using <code>curl</code> do the following:</p>

  






<div class="code-toolbar">
  <pre 
    class="command-line language-bash" 
    data-user="user" 
    data-host="localhost" 
    data-continuation-str="\"
    data-filter-output="(out)"><code class="language-bash">TOKEN=&#39;eyJhbG...TRUNCATED...t3-Lw&#39; \
curl -s -k -H &#34;Authorization:Bearer ${TOKEN}&#34; https://localhost/api/node/v1/info/node1a
(out){&#34;discoverTime&#34;:&#34;2022-02-16T17:28:37.710Z&#34;,&#34;buildInfo&#34;:{&#34;buildDate&#34;:&#34;2022-01-19T15:27:25.024677714Z&#34;,&#34;buildVersion&#34;:&#34;7.0-beta.175&#34;,&#34;upDate&#34;:&#34;2022-02-16T09:28:11.733Z&#34;},&#34;nodeName&#34;:&#34;node1a&#34;,&#34;endpointUrl&#34;:&#34;http://192.168.1.64:8080&#34;,&#34;itemList&#34;:[{&#34;nodeName&#34;:&#34;node1a&#34;,&#34;active&#34;:true,&#34;master&#34;:true}],&#34;ping&#34;:2}</code></pre>
</div>

<h2 id="handling-json">Handling JSON</h2>
<p>






  

<span class="external-link">
  <a href="https://stedolan.github.io/jq/" target="_blank" class="" style="" title="jq (external link)">
    <span>jq</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
 is a utility for processing JSON and is very useful when using the API methods.</p>
<p>For example to get just the build version from the node info endpoint:</p>

  






<div class="code-toolbar">
  <pre 
    class="command-line language-bash" 
    data-user="user" 
    data-host="localhost" 
    data-continuation-str="\"
    data-filter-output="(out)"><code class="language-bash">TOKEN=&#39;eyJhbG...TRUNCATED...t3-Lw&#39; \
curl -s -k -H &#34;Authorization:Bearer ${TOKEN}&#34; https://localhost/api/node/v1/info/node1a \
| jq -r &#39;.buildInfo.buildVersion&#39;
(out)7.0-beta.175</code></pre>
</div>


</div>
</div>


  
  
  
  

  
  

  
    
    
	
    



<div class="td-content" style="--base-section-num: '1.'; page-break-before: always">
    
  <h1 id="pg-ebfd226579200a398d8590ddcf775ace">1 - Query APIs</h1>
    <div class="lead">The APIs to allow other systems to query the data held in Stroom.</div>
	<p>The Query APIs use common request/response models and end points for querying each type of data source held in <em>Stroom</em>.
The request/response models are defined in 






  

<span class="external-link">
  <a href="https://github.com/gchq/stroom-query" target="_blank" class="" style="" title="stroom-query (external link)">
    <span>stroom-query</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
.</p>
<p>Currently <em>Stroom</em> exposes a set of query endpoints for the following data source types.
Each data source type will have its own endpoint due to differences in the way the data is queried and the restrictions imposed on the query terms.
However they all share the same API definition.</p>
<ul>
<li>









  <img 
    class="stroom-icon " 
    src="../../../../images/stroom-ui/document/Index.svg" 
    title="Index" 
    alt="document/Index.svg">









  

<span class="external-link">
  <a href="https://gchq.github.io/stroom/v7.1/#/Stroom-Index%20Queries" target="_blank" class="" style="" title="stroom-index Queries (external link)">
    <span>stroom-index Queries</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
 -
The Lucene based search indexes.</li>
<li>









  <img 
    class="stroom-icon " 
    src="../../../../images/stroom-ui/document/StatisticStore.svg" 
    title="SQL Statistics" 
    alt="document/StatisticStore.svg">









  

<span class="external-link">
  <a href="https://gchq.github.io/stroom/v7.1/#/Sql%20Statistics%20Query" target="_blank" class="" style="" title="Sql Statistics Query (external link)">
    <span>Sql Statistics Query</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
 -
Stroom&rsquo;s SQL Statistics store.</li>
<li>









  <img 
    class="stroom-icon " 
    src="../../../../images/stroom-ui/document/searchable.svg" 
    title="Searchable" 
    alt="document/searchable.svg">









  

<span class="external-link">
  <a href="https://gchq.github.io/stroom/v7.1/#/Searchable" target="_blank" class="" style="" title="Searchable (external link)">
    <span>Searchable</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
 -
Searchables are various data sources that allow you to search the internals of Stroom, e.g. local reference data store, annotations, processor tasks, etc.</li>
</ul>
<p>The detailed documentation for the request/responses is contained in the <em>Swagger</em> definition linked to above.</p>
<h2 id="common-endpoints">Common endpoints</h2>
<p>The standard query endpoints are</p>
<ul>
<li>/<a href="#datasource">datasource</a></li>
<li>/<a href="#destroy">destroy</a></li>
<li>/<a href="#keepalive">keepAlive</a></li>
<li>/<a href="#search">search</a></li>
</ul>
<h3 id="datasource">Datasource</h3>
<p>The 



<span class="glossary-link">
  <a href="../../../../docs/glossary/#data-source" title="Glossary entry for Data Source">
    <span>Data Source</span>
    <i class="glossary-link-icon fas fa-book fa-sm text-primary"></i>
  </a>
</span>
 endpoint is used to query <em>Stroom</em> for the details of a data source with a given 



<span class="glossary-link">
  <a href="../../../../docs/glossary/#docref" title="Glossary entry for DocRef">
    <span>DocRef</span>
    <i class="glossary-link-icon fas fa-book fa-sm text-primary"></i>
  </a>
</span>
.
The details will include such things as the fields available and any restrictions on querying the data.</p>
<h3 id="search">Search</h3>
<p>The search endpoint is used to initiate a search against a data source or to request more data for an active search.
A search request can be made using iterative mode, where it will perform the search and then only return the data it has immediately available.
Subsequent requests for the same <em>queryKey</em> will also return the data immediately available, expecting that more results will have been found by the query.
Requesting a search in non-iterative mode will result in the response being returned when the query has completed and all known results have been found.</p>
<p>The SearchRequest model is fairly complicated and contains not only the query terms but also a definition of how the data should be returned.
A single SearchRequest can include multiple ResultRequest sections to return the queried data in multiple ways, e.g. as flat data and in an alternative aggregated form.</p>
<h4 id="_stroom_-as-a-query-builder"><em>Stroom</em> as a query builder</h4>
<p><em>Stroom</em> is able to export the json form of a SearchRequest model from its dashboards.
This makes the dashboard a useful tool for building a query and the table settings to go with it.
You can use the dashboard to defined the data source, define the query terms tree and build a table definition (or definitions) to describe how the data should be returned.
The, clicking the download icon on the query pane of the dashboard will generate the SearchRequest json which can be immediately used with the /search API or modified to suit.</p>
<h3 id="destroy">Destroy</h3>
<p>This endpoint is used to kill an active query by supplying the <em>queryKey</em> for query in question.</p>
<h3 id="keep-alive">Keep alive</h3>
<p>Stroom will only hold search results from completed queries for a certain lenght of time.
It will also terminate running queries that are too old.
In order to prevent queries being aged off you can hit this endpoint to indicate to Stroom that you still have an interest in a particular query by supplying the query key.</p>

</div>




    
	
  



          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/gchq/stroom" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2023 Crown Copyright All Rights Reserved</small>
        
	
      </div>
    </div>
  </div>
</footer>


    </div>
    

<script src='../../../../js/popper.min.js'></script>
<script src='../../../../js/bootstrap.min.js'></script>






<script src='../../../../js/tabpane-persist.js'></script>




















<script src="../../../../js/main.min.cbc1d428d83561c4dec32da9374290554119d7483329f849251cb7153b2ecd07.js" integrity="sha256-y8HUKNg1YcTewy2pN0KQVUEZ10gzKfhJJRy3FTsuzQc=" crossorigin="anonymous"></script>



<script src='../../../../js/prism.js'></script>



  </body>
</html>
