<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.95.0" />
<link rel="canonical" type="text/html" href="../../../../docs/user-guide/data-receipt/">
<meta name="robots" content="noindex, nofollow">

<link rel="preload" href="../../../../fonts/google_open_sans_300.ttf" as="font" type="font/ttf" crossorigin >
<link rel="preload" href="../../../../fonts/google_open_sans_300i.ttf" as="font" type="font/ttf" crossorigin >
<link rel="preload" href="../../../../fonts/google_open_sans_400.ttf" as="font" type="font/ttf" crossorigin >
<link rel="preload" href="../../../../fonts/google_open_sans_400i.ttf" as="font" type="font/ttf" crossorigin >
<link rel="preload" href="../../../../fonts/google_open_sans_700.ttf" as="font" type="font/ttf" crossorigin >
<link rel="preload" href="../../../../fonts/google_open_sans_700i.ttf" as="font" type="font/ttf" crossorigin >
<link rel="preload" href="../../../../webfonts/fa-brands-400.ttf" as="font" type="font/ttf" crossorigin >
<link rel="preload" href="../../../../webfonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin >


<link rel="preload" href="../../../../webfonts/fa-solid-900.ttf" as="font" type="font/ttf" crossorigin >
<link rel="preload" href="../../../../webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin >






<link rel="shortcut icon" href="../../../../favicons/favicon.ico" >
<link rel="apple-touch-icon" href="../../../../favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="../../../../favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="../../../../favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="../../../../favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="../../../../favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="../../../../favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="../../../../favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="../../../../favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="../../../../favicons/android-192x192.png" sizes="192x192">

<title>Data Receipt | Stroom</title>
<meta name="description" content="Describes the varisous aspects of Stroom (&amp; Stroom Proxy) receiving data via its /datafeed or event endpoints.
">
<meta property="og:title" content="Data Receipt" />
<meta property="og:description" content="Describes the varisous aspects of Stroom (&amp; Stroom Proxy) receiving data via its /datafeed or event endpoints.
" />
<meta property="og:type" content="website" />
<meta property="og:url" content="/docs/user-guide/data-receipt/" /><meta property="og:site_name" content="Stroom" />

<meta itemprop="name" content="Data Receipt">
<meta itemprop="description" content="Describes the varisous aspects of Stroom (&amp; Stroom Proxy) receiving data via its /datafeed or event endpoints.
"><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Data Receipt"/>
<meta name="twitter:description" content="Describes the varisous aspects of Stroom (&amp; Stroom Proxy) receiving data via its /datafeed or event endpoints.
"/>




<link rel="preload" href="../../../../scss/main.min.19a9d77971ef076e7f36a69b116db9161f1555798a764c1957f191649bb9f382.css" as="style">
<link href="../../../../scss/main.min.19a9d77971ef076e7f36a69b116db9161f1555798a764c1957f191649bb9f382.css" rel="stylesheet" integrity="">


<script src='../../../../js/jquery-3.6.0.min.js'></script>




<link rel="stylesheet" href="../../../../css/prism.css"/>


<link rel="stylesheet" href="../../../../css/stroom-ui/icon-colours.min.c7f7492721ac22f5e69eb7c9e66ec2d6dda4fbb93805fdb5f383e323f347838d.css" integrity="sha256-x/dJJyGsIvXmnrfJ5m7C1t2k&#43;7k4Bf2184PjI/NHg40=">

<link rel="stylesheet" href="../../../../css/stroom-ui/material_design_colors.min.ab1318fe69a1013ff756090954c02c5364ff48d150dcc94468a73d2e3efd3fc0.css" integrity="sha256-qxMY/mmhAT/3VgkJVMAsU2T/SNFQ3MlEaKc9Lj79P8A=">

<link rel="stylesheet" href="../../../../css/stroom-ui/theme-root.min.bebaa7a01087d1ece8e812db2a1a91349b15556d04f84eea180c6d23491738c4.css" integrity="sha256-vrqnoBCH0ezo6BLbKhqRNJsVVW0E&#43;E7qGAxtI0kXOMQ=">

<link rel="stylesheet" href="../../../../css/stroom-ui/theme-dark.min.bc08bf14d505124d1eb4316e6df1348b0985e517e3cc0f5a590a03a968cc8c65.css" integrity="sha256-vAi/FNUFEk0etDFubfE0iwmF5RfjzA9aWQoDqWjMjGU=">




  </head>
  <body class="td-section">
    <header>
      <nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
  <a class="navbar-brand" href="../../../../"><span class="navbar-brand__logo navbar-logo"><svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="110.61089" height="30.000004" viewBox="0 0 88.488641 23.999957" id="svg2" inkscape:version="0.91 r13725" sodipodi:docname="logo.svg"><defs id="defs20"/><sodipodi:namedview pagecolor="#989898" bordercolor="#666666" borderopacity="1" objecttolerance="10" gridtolerance="10" guidetolerance="10" inkscape:pageopacity="0" inkscape:pageshadow="2" inkscape:window-width="1920" inkscape:window-height="1137" id="namedview18" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:zoom="5.5951814" inkscape:cx="55.451414" inkscape:cy="16.275348" inkscape:window-x="0" inkscape:window-y="0" inkscape:window-maximized="1" inkscape:current-layer="svg2"/><g id="g4150" style="opacity:.97000002" transform="matrix(0.03883584,0,0,0.03883584,0,-3.1155874e-4)"><path id="path6" d="M121.99991 205.98497C54.999958 205.98497.0 259.98493.0 327.98487c0 66.99994 54.999958 121.99989 121.99991 121.99989h167.99987c24.99998.0 44.99996 20.99998 44.99996 44.99996.0 24.99998-19.99998 44.99996-44.99996 44.99996H109.20929C65.984126 553.87219 27.100843 581.57313.01093599 617.98462H289.99978c66.99994.0 121.99991-54.99996 121.99991-122.9999.0-66.99994-54.99997-121.99989-121.99991-121.99989H121.99991c-24.999984.0-44.999969-19.99999-44.999969-44.99996.0-24.99998 19.999985-44.99996 44.999969-44.99996h228.79045c26.9905-35.88325 65.47093-63.18547 108.21554-76.99994H121.99991z" style="fill:#fff" inkscape:connector-curvature="0"/><path id="path8" d="M601.44485-.00077860649C572.6583 8.3697982 546.49491 22.822962 524.44491 41.902305V205.78969l.002.19528h-.002c-65.11 48e-5-123.03145 30.0199-160.74675 76.99994h160.74675v334.99971h76.99994V282.98491h144.85298c27.16134-36.05885 65.96411-63.39275 109.02184-76.99994H601.44485v-205.98574860649z" style="fill:#fff" inkscape:connector-curvature="0"/><path id="path10" d="m919.42586 205.98497c-113.99519.0-205.99537 92.00648-206.00296 205.99982-15e-5 68.67178.0 137.32749.0 205.99983h77.99994c-.012-68.6493.0176-137.46869.0-205.99983.0846-70.92785 57.05747-128.99988 128.00462-128.99988 5.28623.0 10.49823.32864 15.62183.95311 18.2219-24.51229 41.78461-45.0838 68.42501-60.15146-25.65065-11.43799-54.08662-17.80159-84.04684-17.80159z" style="fill:#fff" inkscape:connector-curvature="0"/><path id="path12" d="m1109.4153 205.98457c-113.99994.0-205.99983 91.99993-205.99983 205.99984.0 112.9999 91.99989 205.9998 205.99983 205.9998 114 0 205.9999-92.9999 205.9999-205.9998.0-113.99991-91.9999-205.99984-205.9999-205.99984zm0 333.99974c-70.9999.0-128.99994-56.99996-128.99994-127.9999.0-70.99995 58.00004-128.9999 128.99994-128.9999 71 0 128.9999 57.99995 128.9999 128.9999.0 70.99994-57.9999 127.9999-128.9999 127.9999z" style="fill:#fff" inkscape:connector-curvature="0"/><path id="path14" d="m1444.4737 205.98457c-113.9999.0-205.9998 91.99993-205.9998 205.99984.0 112.9999 91.9999 205.9998 205.9998 205.9998s205.9999-92.9999 205.9999-205.9998c0-113.99991-92-205.99984-205.9999-205.99984zm0 333.99974c-70.9999.0-128.9999-56.99996-128.9999-127.9999.0-70.99995 58-128.9999 128.9999-128.9999 71 0 128.9999 57.99995 128.9999 128.9999.0 70.99994-57.9999 127.9999-128.9999 127.9999z" style="fill:#fff" inkscape:connector-curvature="0"/><path id="path16" d="m1738.5308 379.98447c0-53 43-97 95.9999-97 53 0 97 44 97 97v237.9997h76.9999v-237.9997c0-53 43-97 96.9999-97 53 0 95.9999 44 95.9999 97v237.9997h77v-237.9997c0-96-77-173.9999-172.9999-173.9999-54.9999.0-103.9999 24.99998-135.9999 64.99995-31.9999-39.99997-79.9999-64.99995-134.9999-64.99995-95.9999.0-173.9998 77.9999-173.9998 173.9999v237.9997h77.9999z" style="fill:#fff" inkscape:connector-curvature="0"/></g></svg></span><span class="navbar-brand__name">Stroom</span></a>
  <div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
    <ul class="navbar-nav mt-2 mt-lg-0">
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="../../../../about/about/"><span>About</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link active" href="../../../../docs/"><span class="active">Documentation</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="../../../../releases/"><span>Releases Notes</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="../../../../community/"><span>Community</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="../../../../news/"><span>News</span></a>
      </li>
      <li class="nav-item dropdown mr-4 d-none d-lg-block">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	Stroom Version (7.11)
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
	
	
	
	<a class="dropdown-item" href="../../../../">7.11 (Latest)</a>
	
	<a class="dropdown-item" href="../../../../7.10">7.10</a>
	
	<a class="dropdown-item" href="../../../../7.9">7.9</a>
	
	<a class="dropdown-item" href="../../../../7.8">7.8</a>
	
	<a class="dropdown-item" href="../../../../7.7">7.7</a>
	
	<a class="dropdown-item" href="../../../../7.6">7.6</a>
	
	<a class="dropdown-item" href="../../../../7.5">7.5</a>
	
	<a class="dropdown-item" href="../../../../7.4">7.4</a>
	
	<a class="dropdown-item" href="../../../../7.3">7.3</a>
	
	<a class="dropdown-item" href="../../../../7.2">7.2</a>
	
	<a class="dropdown-item" href="../../../../7.1">7.1</a>
	
	<a class="dropdown-item" href="../../../../7.0">7.0</a>
	
	<a class="dropdown-item" href="../../../../legacy">Legacy</a>
	
</div>
</li>
      </ul>
  </div>
  <div class="navbar-nav d-none d-lg-block">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="../../../../offline-search-index.38e5b29f2b8df6994799acec29bf7369.json"
    data-offline-search-base-href="../../../../"
    data-offline-search-max-results="50"
  >
</div>

  </div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This is the multi-page printable view of this section.
<a href="#" onclick="print();return false;">Click here to print</a>.
</p><p>
<a href="../../../../docs/user-guide/data-receipt/">Return to the regular view of this page</a>.
</p>
</div>



<h1 class="title">Data Receipt</h1>
<div class="lead">Describes the varisous aspects of Stroom (&amp; Stroom Proxy) receiving data via its /datafeed or event endpoints.</div>




    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-2b101b5ca1288ab24caf691e9e36fd07">Data Receipt Rules</a></li>


    
  
    
    
	
<li>2: <a href="#pg-a272a7abf1e40870e90d5d05dde60d5d">Content Auto-Generation</a></li>


    
  
    
    
	
<li>3: <a href="#pg-04a18bd56981b37648970368b15c0047">Data Feed Keys</a></li>


    
  
    
    
	
<li>4: <a href="#pg-94cc8bf01b6d96fcfd8ba217d143fb57">Feed Status Checking</a></li>


    
  

    </ul>


<div class="content">
      
</div>
</div>


  
  
  
  

  
  

  
    
    
	
    



<div class="td-content" style="--base-section-num: '1.'; ">
    
  <h1 id="pg-2b101b5ca1288ab24caf691e9e36fd07">1 - Data Receipt Rules</h1>
    <div class="lead">Describes the process of creating Data Receipt Rules to control whether data received by Stroom or Stroom Proxy is Accepted, Rejected or Dropped.</div>
	<p>Data Receipt Rules serves as an alternative to the legacy <a href="../../../../docs/user-guide/data-receipt/feed-status/">Feed status</a> checking performed by Stroom Proxy and Stroom.
It provides a much richer mechanism for controlling which received data streams are Received, Rejected or Dropped.
It allows anyone with the <em>Manage Data Receipt Rules</em> Application Permission to create one or more rules to controls the receipt of data.</p>
<p>Data Receipt Rules can be accessed as follows:</p>





  <div class="stroom-theme-dark stroom-menu">
    
    

      

      
      


      

  
  
  <div class="stroom-menu-item-background" style="margin-top: 0px;">
    
    <div class="stroom-menu-item " >

      <div class="stroom-menu-item-text">Administration
      </div>
        <div class="stroom-menu-item-arrow">
          <span class="stroom-icon inline-svg-button icon-button  " >
    <span class="face" title="Arrow right"><svg xmlns="http://www.w3.org/2000/svg" width="1427.7665" height="1427.7665" viewBox="0 0 1427.7665 1427.7665"><g style="stroke:currentColor;stroke-width:167.567"><path d="m 415.05387,83.70929 c -39.92654,0.4303 -75.41463,48.3887 -40.0468,81.9121 C 567.552,348.69899 760.75555,531.15431 953.73208,713.82391 760.75555,896.49341 567.552,1078.9486 375.00707,1262.0262 c -46.19471,43.7855 28.48812,112.1966 76.0571,67.1681 195.93558,-185.823 392.95261,-370.82479 587.98693,-557.52749 5.6117,-4.8034 10.4633,-10.2473 14.4855,-16.1231 9.643,-12.4844 13.9638,-27.0796 13.6909,-41.7198 0.2729,-14.6402 -4.0479,-29.2354 -13.6909,-41.7198 -4.0222,-5.8758 -8.8738,-11.3198 -14.4855,-16.1231 C 844.01678,469.27821 646.99975,284.27629 451.06417,98.45319 439.91519,87.89979 427.27628,83.57749 415.05387,83.70929 Z"/></g></svg> </span>
  </span>
        </div>
    </div>
  </div>

      

      
      
        
      


      

  
  
  <div class="stroom-menu-item-background" style="margin-top: 7px;">
    
    <div class="stroom-menu-item stroom-menu-item-leaf" >
        <div class="stroom-menu-item-icon">
          <span class="stroom-icon inline-svg-button icon-button  " >
    <span class="face" title="Shield"><svg xmlns="http://www.w3.org/2000/svg" width="1792" height="1792" viewBox="0 0 1792 1792" ><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><path style="fill:currentColor" d="m 896.00002,44.728762 c 15.38039,0 30.76078,3.343564 44.80375,9.696335 L 1570.3968,321.57582 c 73.5583,31.09514 128.3928,103.65046 128.0584,191.25183 -1.6717,331.68149 -138.0891,938.53835 -714.1851,1214.38225 -55.83751,26.7485 -120.70265,26.7485 -176.54016,0 C 231.63396,1451.366 95.216565,844.50914 93.544783,512.82765 93.210427,425.22628 148.04487,352.67096 221.60327,321.57582 L 851.53063,54.425097 c 13.70861,-6.352771 29.089,-9.696335 44.46939,-9.696335 z m 0,223.350038 v 1263.867 C 1357.4118,1308.5958 1481.458,814.08272 1484.4672,517.50864 Z" /></svg> </span>
  </span>
        </div>

      <div class="stroom-menu-item-text">Data Receipt Rules
      </div>
    </div>
  </div>
  </div>



<p>Each rule is defined by a boolean expression (as used in Dashboards and Stream filtering) and the <em>Action</em> (Receive, Reject, Drop_ that will be performed if the data matches the rule.
Rules are evaluated in ascending order by Rule Number.
The action is taken from the first rule to match.</p>
<p>If no rules match then the data will be rejected by default, i.e. the rules are include rather than exclude filters.
If you want data to be received if no rules match then you can create a rule at the end of the list with an <em>Action</em> of <code>Receive</code> and no expression terms.</p>
<p>If a stream matches a rule that has an <code>Accept</code> action, it will still be subject to a check to see if the <em>Feed</em> actually exists.
This means that the rules do not need to contain an <code>Accept</code> rule to cover all of the Feeds in the system.
They only need to cover
The client will receive a <code>101</code> <code>Feed is not defined</code> error if it does not exist.</p>







  
  
  
  
  







  
  



<div class="card rounded shadow-stroom p-2 td-post-card mb-4 mt-4" style="max-width: 710px">

  <a title="images/user-guide/data-receipt/ReceiptRules.png" href="../../../../images/user-guide/data-receipt/ReceiptRules.png">
    <figure style="margin-block-end: 0px" >
      
      <img class="card-img-top" src="../../../../images/user-guide/data-receipt/ReceiptRules.png" style="max-width:700" alt="images/user-guide/data-receipt/ReceiptRules.png">
      

      
    </figure>
  </a>
</div>

<p>The screen operates in a similar way to Data Retention Rules in that rules can be moved up/down to change their importance, or enabled/disabled.</p>
<h2 id="fields">Fields</h2>
<p>The fields available to use in the expression terms can be defined in the <em>Fields</em> tab.
The terms will be evaluated against the stream&rsquo;s meta data, i.e. a combination of the HTTP headers sent by the client and any that have been populated by Stroom Proxy or Stroom.
This allows for the use of custom headers to aid in the filtering of data into Stroom.</p>







  
  
  
  
  







  
  



<div class="card rounded shadow-stroom p-2 td-post-card mb-4 mt-4" style="max-width: 310px">

  <a title="images/user-guide/data-receipt/ReceiptRuleFields.png" href="../../../../images/user-guide/data-receipt/ReceiptRuleFields.png">
    <figure style="margin-block-end: 0px" >
      
      <img class="card-img-top" src="../../../../images/user-guide/data-receipt/ReceiptRuleFields.png" style="max-width:300" alt="images/user-guide/data-receipt/ReceiptRuleFields.png">
      

      
    </figure>
  </a>
</div>

<p>Dictionaries are supported for use with the <code>in dictionary</code> condition.
The contents of the dictionary and any of the dictionaries that it inherits will be included in the data fetched by Stroom Proxy.</p>

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Note</h4>


    <p>You cannot use the same dictionary for multiple fields if any one of those fields is obfuscated.</p>
<p>Should you need to use the same dictionary for an obfuscated and a non-obfuscated field, you can create one empty dictionary for each and make them both import from the same source dictionary.</p>


</div>


<h2 id="stroom-configuration">Stroom Configuration</h2>
<p>Data Receipt Rules are controlled by the following configuration:</p>
<pre><code class="language-yaml">appConfig:
  receiptPolicy:
    # List of fields whose values will be obfuscated when the rules
    # are fetched by Stroom Proxy
    obfuscatedFields:
    - &quot;AccountId&quot;
    - &quot;AccountName&quot;
    - &quot;Component&quot;
      # ... truncated
    - &quot;UploadUserId&quot;
    - &quot;UploadUsername&quot;
    - &quot;X-Forwarded-For&quot;
    # The hash algorithm used to hash obfuscated values, one of:
    # * SHA3_256
    # * SHA2_256
    # * BCRYPT
    # * ARGON_2
    # * SHA2_512
    obfuscationHashAlgorithm: &quot;SHA2_512&quot;
    # The initial list of fields to bootstrap a Stroom environment.
    # Changing this has no effect one an environment has been started up.
    receiptRulesInitialFields:
      AccountId: &quot;Text&quot;
      Component: &quot;Text&quot;
      Compression: &quot;Text&quot;
      content-length: &quot;Text&quot;
      # ... truncated
      Type: &quot;Text&quot;
      UploadUsername: &quot;Text&quot;
      UploadUserId: &quot;Text&quot;
      user-agent: &quot;Text&quot;
      X-Forwarded-For: &quot;Text&quot;
  receive:
    # The action to take if there is a problem with the data receipt rules, e.g.
    # Stroom Proxy has been unable to contact Stroom to fetch the rules.
    fallbackReceiveAction: &quot;RECEIVE&quot;
    # The data receipt checking mode, one of:
    # * FEED_STATUS - Use the legacy Feed Status Check method
    # * RECEIPT_POLICY - Use the new Data Receipt Rules
    # * RECEIVE_ALL - Receive ALL data with no checks
    # * DROP_ALL - Drop ALL data with no checks
    # * REJECT_ALL - Reject ALL data with no checks
    receiptCheckMode: &quot;RECEIPT_POLICY&quot;
</code></pre>
<h2 id="stroom-proxy-configuration">Stroom Proxy Configuration</h2>
<pre><code class="language-yaml">appConfig:
  receiptPolicy:
    # Only set this if you need to supply a non-standard full url
    # By default Proxy will used the known path for the Data Receipt Rules resource
    # combined with the host/port/scheme from the `downstreamHost` config property.
    receiveDataRulesUrl: null
    # The frequency that the rules will be fetched from the downstream Stroom instance.
    syncFrequency: &quot;PT1M&quot;

  # Identical configuration to Stroom as described above.
  # Stroom and Stroom Proxy can use different `receiptCheckMode` values, but typically
  # they will be the same.
  receiptPolicy:
</code></pre>
<h2 id="stroom-proxy-rule-synchronisation">Stroom Proxy Rule Synchronisation</h2>
<p>If Stroom Proxy is configured with <code>receiptCheckMode</code> set to <code>RECEIPT_POLICY</code> and has <code>downstreamHost</code> configured, then it will periodically send a request to Stroom to fetch the latest copy of the Data Receipt Rules.
If Stroom Proxy is unable to contact Stroom it will use the latest copy of the rules that it has.</p>
<p>Given that Stroom Proxy will only synchronise periodically, once a change is made to the rule set, there will be a delay before the new rules take effect.</p>
<h3 id="term-value-obfuscation">Term Value Obfuscation</h3>
<p>As a Stroom administrator you may not want the values used in the Data Receipt Rule expression terms to be visible when they are fetched by a remote Stroom Proxy (that may be maintained by another team).
It is therefore possible to obfuscate the values used for the expression terms for certain configured fields.
The fields that are obfuscated are controlled by the property <code>stroom.receiptPolicy.obfuscatedFields</code>.</p>
<p>For example, in the default configuration, <code>Feed</code> is an obfuscated field.
Thus a term like <code>Feed != FEED_XYZ</code> would have its value obfuscated when fetched by Stroom Proxy.
Stroom Proxy is able to similarly obfuscated meta data values for obfuscated fields in the same way to allow it to test the rule expression.</p>

<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Warning</h4>

    Due to the way obfuscation works, you are limited by the expression conditions that can be used, e.g. <code>contains</code>, <code>&gt;</code>, <code>&lt;</code> etc. are not allowed, but <code>==</code> and <code>!=</code> are.
Stroom will tell you if you are using an unsupported condition for the field.

</div>


<p>This prevents the Stroom Proxy administrator from being able to see the values used in the rules as they are not in plain text.
Each value is salted with its own unique salt then hashed.
The hash algorithm can be configured using <code>stroom.receiptPolicy.obfuscationHashAlgorithm</code>.</p>

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Note</h4>


    Obfuscation is not encryption.
The fetched data includes the salt values and given enough compute/time it would be possible to brute force the reversal of the hashing.
Strong hashing algorithms such as BCrypt or Argon2 can mitigate against this but not remove the risk.
If the rule values are too sensitive then you will have to let the Stroom Proxy accept the data and have Stroom do the full rule based checking.

</div>



</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '2.'; page-break-before: always">
    
  <h1 id="pg-a272a7abf1e40870e90d5d05dde60d5d">2 - Content Auto-Generation</h1>
    <div class="lead">Describes how Stroom can auto-generate Feed names and content upon receipt of new data.</div>
	
<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">TODO</h4>


    <p>This is an experimental feature that is described in more detail in the <a href="../../../../releases/v07.09/preview-features/#content-auto-generation">v7.9 Release Notes</a>.</p>


</div>


</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '3.'; page-break-before: always">
    
  <h1 id="pg-04a18bd56981b37648970368b15c0047">3 - Data Feed Keys</h1>
    <div class="lead">Data Feed Keys is an authentication mechanism designed specifically for the <code>/datafeed</code> API.</div>
	
<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">TODO</h4>


    <p>This is an experimental feature that is described in more detail in the <a href="../../../../releases/v07.09/preview-features/#data-feed-keys">v7.9 Release Notes</a>.</p>


</div>


</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '4.'; page-break-before: always">
    
  <h1 id="pg-94cc8bf01b6d96fcfd8ba217d143fb57">4 - Feed Status Checking</h1>
    <div class="lead">The process of checking a Feed&rsquo;s status on data receipt to determine what to do with that data.</div>
	<p>Feed status checking is Stroom&rsquo;s legacy method for controlling data receipt.
For a richer method of controlling data receipt, see <a href="../../../../docs/user-guide/data-receipt/data-receipt-rules/">Data Receipt Rules</a></p>
<p>If the property <code>stroom.receive.receiptCheckMode</code> is set to <code>FEED_STATUS</code>, the <em>Feed Status</em> value that has been set on the <span class="stroom-icon inline-svg-button icon-button  " >
    <span class="face" title="Feed"><svg xmlns="http://www.w3.org/2000/svg" width="1792" height="1792" viewBox="0 0 1792 1792"><path style="fill:var(--icon-colour__green)" d="m 938.50195,211.41007 c -5.56299,0.0388 -11.74705,1.29983 -18.55468,3.7832 -18.1537,6.6223 -30.41561,18.62426 -36.78321,36.00781 L 781.2832,529.3378 l -636.59961,0 c -11.58903,0 -22.47327,3.72569 -32.65234,11.17578 -10.17907,7.4501 -17.391684,16.96956 -21.636719,28.5586 L 3.0683594,807.47452 c -4.2450584,11.5891 -4.00823944,21.10849 0.7128906,28.55859 4.72114,7.4501 12.877765,11.17578 24.466797,11.17578 358.940143,-0.86657 728.661783,-0.53744 1037.093753,-0.52148 l 192.0293,-132.33789 c 11.3101,-8.27788 19.0869,-18.21175 23.332,-29.80078 3.9418,-10.76125 3.2906,-20.28072 -1.9551,-28.5586 L 961.13086,221.4003 c -5.81425,-6.72578 -13.35726,-10.05491 -22.62891,-9.99023 z m 509.37505,415.625 c -5.563,0.0388 -11.7471,1.29983 -18.5547,3.7832 -18.1537,6.6223 -30.4156,18.62426 -36.7832,36.00781 l -101.8809,278.13672 -762.55273,0 c -11.58903,0 -22.47327,3.72569 -32.65235,11.17578 -10.17906,7.4501 -17.39165,16.96957 -21.63671,28.5586 l -87.32618,238.40232 c -4.24506,11.5891 -4.00824,21.1085 0.71289,28.5586 4.72113,7.4501 12.87777,11.1758 24.4668,11.1758 l 762.55278,0 -101.8809,278.1367 c -6.0644,16.5558 -2.5987,28.5577 10.4004,36.0078 13.3022,6.6223 28.6997,4.1399 46.1894,-7.4492 l 637.8145,-439.5547 c 11.3101,-8.2779 19.0869,-18.2117 23.332,-29.8008 3.9418,-10.7612 3.2906,-20.2807 -1.9551,-28.5586 L 1470.5059,637.0253 c -5.8143,-6.72578 -13.3573,-10.05491 -22.6289,-9.99023 z"/></svg></span>
  </span> Feed is used to determine the action to perform on that data.</p>
<h2 id="feed-status-values">Feed Status Values</h2>
<p>A <span class="stroom-icon inline-svg-button icon-button  " >
    <span class="face" title="Feed"><svg xmlns="http://www.w3.org/2000/svg" width="1792" height="1792" viewBox="0 0 1792 1792"><path style="fill:var(--icon-colour__green)" d="m 938.50195,211.41007 c -5.56299,0.0388 -11.74705,1.29983 -18.55468,3.7832 -18.1537,6.6223 -30.41561,18.62426 -36.78321,36.00781 L 781.2832,529.3378 l -636.59961,0 c -11.58903,0 -22.47327,3.72569 -32.65234,11.17578 -10.17907,7.4501 -17.391684,16.96956 -21.636719,28.5586 L 3.0683594,807.47452 c -4.2450584,11.5891 -4.00823944,21.10849 0.7128906,28.55859 4.72114,7.4501 12.877765,11.17578 24.466797,11.17578 358.940143,-0.86657 728.661783,-0.53744 1037.093753,-0.52148 l 192.0293,-132.33789 c 11.3101,-8.27788 19.0869,-18.21175 23.332,-29.80078 3.9418,-10.76125 3.2906,-20.28072 -1.9551,-28.5586 L 961.13086,221.4003 c -5.81425,-6.72578 -13.35726,-10.05491 -22.62891,-9.99023 z m 509.37505,415.625 c -5.563,0.0388 -11.7471,1.29983 -18.5547,3.7832 -18.1537,6.6223 -30.4156,18.62426 -36.7832,36.00781 l -101.8809,278.13672 -762.55273,0 c -11.58903,0 -22.47327,3.72569 -32.65235,11.17578 -10.17906,7.4501 -17.39165,16.96957 -21.63671,28.5586 l -87.32618,238.40232 c -4.24506,11.5891 -4.00824,21.1085 0.71289,28.5586 4.72113,7.4501 12.87777,11.1758 24.4668,11.1758 l 762.55278,0 -101.8809,278.1367 c -6.0644,16.5558 -2.5987,28.5577 10.4004,36.0078 13.3022,6.6223 28.6997,4.1399 46.1894,-7.4492 l 637.8145,-439.5547 c 11.3101,-8.2779 19.0869,-18.2117 23.332,-29.8008 3.9418,-10.7612 3.2906,-20.2807 -1.9551,-28.5586 L 1470.5059,637.0253 c -5.8143,-6.72578 -13.3573,-10.05491 -22.6289,-9.99023 z"/></svg></span>
  </span> Feed can have the following <em>Feed Status</em> values:</p>
<ul>
<li>
<p><strong>Receive</strong> - All data for this Feed will be received into Stroom / Stroom Proxy.</p>
</li>
<li>
<p><strong>Reject</strong> - All data for this feed will be rejected.
The client will get HTTP <code>406</code> error with the message <code>110 - Feed is not set to receive data</code>.</p>
</li>
<li>
<p><strong>Drop</strong> -  All data for this Feed will be silently dropped by Stroom / Stroom Proxy, i.e. discarded and not stored.
The client will receive a HTTP <code>200</code> response as if the data had been successfully received.
This is for use if you do not want the client to know their data is being discarded.</p>
</li>
</ul>
<h2 id="stroom-proxy">Stroom Proxy</h2>
<p>Stroom Proxy is also able to perform Feed status checking.
Stroom Proxy does not have direct access to the Feed settings so has to perform the Feed status check by making a request to a downstream Stroom Proxy or Stroom.
If a Stroom Proxy receives a Feed status check it will proxy that request to its own downstream Stroom / Stroom Proxy.</p>
<p>Stroom Proxy will cache the response it gets from the downstream, so that it doesn&rsquo;t need to make a call for every stream received.</p>
<p>To configure Stroom Proxy for Feed status checking you need to set the following properties:</p>
<pre><code class="language-yaml">proxyConfig:

  receive:
    # The action to take if there is a problem with the data receipt rules, e.g.
    # Stroom Proxy has been unable to contact Stroom to fetch the rules.
    fallbackReceiveAction: &quot;RECEIVE&quot;
    receiptCheckMode: &quot;FEED_STATUS&quot;

  downstreamHost:
    # The API key to use for authentication (unless OpenID Connect is being used)
    apiKey: null
    # The hostname of the downstream
    hostname: null
    # The port to connect to the downstream on
    # If not set, will default to 80/443 depending on scheme.
    port: null
    # The scheme to connect to the downstream on
    scheme: &quot;https&quot;
</code></pre>

</div>




    
	
  



          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/gchq/stroom" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2026 Crown Copyright All Rights Reserved</small>
        
	
      </div>
    </div>
  </div>
</footer>


    </div>
    

<script src='../../../../js/popper.min.js'></script>
<script src='../../../../js/bootstrap.min.js'></script>






    <script src='../../../../js/lunr.min.js'></script>
  


<script src='../../../../js/tabpane-persist.js'></script>




















<script src="../../../../js/main.min.cbc1d428d83561c4dec32da9374290554119d7483329f849251cb7153b2ecd07.js" integrity="sha256-y8HUKNg1YcTewy2pN0KQVUEZ10gzKfhJJRy3FTsuzQc=" crossorigin="anonymous"></script>



<script src='../../../../js/prism.js'></script>



  </body>
</html>
