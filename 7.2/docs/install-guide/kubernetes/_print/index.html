<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.95.0" />
<link rel="canonical" type="text/html" href="../../../../docs/install-guide/kubernetes/">
<meta name="robots" content="noindex, nofollow">


<link rel="shortcut icon" href="../../../../favicons/favicon.ico" >
<link rel="apple-touch-icon" href="../../../../favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="../../../../favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="../../../../favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="../../../../favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="../../../../favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="../../../../favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="../../../../favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="../../../../favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="../../../../favicons/android-192x192.png" sizes="192x192">

<title>Kubernetes Cluster | Stroom</title>
<meta name="description" content="How to deploy and administer a container based Stroom cluster using Kubernetes.
">
<meta property="og:title" content="Kubernetes Cluster" />
<meta property="og:description" content="How to deploy and administer a container based Stroom cluster using Kubernetes.
" />
<meta property="og:type" content="website" />
<meta property="og:url" content="/docs/install-guide/kubernetes/" /><meta property="og:site_name" content="Stroom" />

<meta itemprop="name" content="Kubernetes Cluster">
<meta itemprop="description" content="How to deploy and administer a container based Stroom cluster using Kubernetes.
"><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Kubernetes Cluster"/>
<meta name="twitter:description" content="How to deploy and administer a container based Stroom cluster using Kubernetes.
"/>




<link rel="preload" href="../../../../scss/main.min.7cb4dee93241f67b6c7428dfa726e02dafeee6283fbdc32ae0d83869b00c0a35.css" as="style">
<link href="../../../../scss/main.min.7cb4dee93241f67b6c7428dfa726e02dafeee6283fbdc32ae0d83869b00c0a35.css" rel="stylesheet" integrity="">


<script src='../../../../js/jquery-3.6.0.min.js'></script>


<script src='../../../../js/lunr.min.js'></script>
  
<link rel="stylesheet" href="../../../../css/prism.css"/>
<link rel="stylesheet" href="../../../../css/stroom-ui/icon-colours.css"/>
<link rel="stylesheet" href="../../../../css/stroom-ui/material_design_colors.css"/>
<link rel="stylesheet" href="../../../../css/stroom-ui/theme-root.css"/>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-00000000-0', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  </head>
  <body class="td-section">
    <header>
      <nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
  <a class="navbar-brand" href="../../../../"><span class="navbar-brand__logo navbar-logo"><svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="110.61089" height="30.000004" viewBox="0 0 88.488641 23.999957" id="svg2" inkscape:version="0.91 r13725" sodipodi:docname="logo.svg"><defs id="defs20"/><sodipodi:namedview pagecolor="#989898" bordercolor="#666666" borderopacity="1" objecttolerance="10" gridtolerance="10" guidetolerance="10" inkscape:pageopacity="0" inkscape:pageshadow="2" inkscape:window-width="1920" inkscape:window-height="1137" id="namedview18" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:zoom="5.5951814" inkscape:cx="55.451414" inkscape:cy="16.275348" inkscape:window-x="0" inkscape:window-y="0" inkscape:window-maximized="1" inkscape:current-layer="svg2"/><g id="g4150" style="opacity:.97000002" transform="matrix(0.03883584,0,0,0.03883584,0,-3.1155874e-4)"><path id="path6" d="M121.99991 205.98497C54.999958 205.98497.0 259.98493.0 327.98487c0 66.99994 54.999958 121.99989 121.99991 121.99989h167.99987c24.99998.0 44.99996 20.99998 44.99996 44.99996.0 24.99998-19.99998 44.99996-44.99996 44.99996H109.20929C65.984126 553.87219 27.100843 581.57313.01093599 617.98462H289.99978c66.99994.0 121.99991-54.99996 121.99991-122.9999.0-66.99994-54.99997-121.99989-121.99991-121.99989H121.99991c-24.999984.0-44.999969-19.99999-44.999969-44.99996.0-24.99998 19.999985-44.99996 44.999969-44.99996h228.79045c26.9905-35.88325 65.47093-63.18547 108.21554-76.99994H121.99991z" style="fill:#fff" inkscape:connector-curvature="0"/><path id="path8" d="M601.44485-.00077860649C572.6583 8.3697982 546.49491 22.822962 524.44491 41.902305V205.78969l.002.19528h-.002c-65.11 48e-5-123.03145 30.0199-160.74675 76.99994h160.74675v334.99971h76.99994V282.98491h144.85298c27.16134-36.05885 65.96411-63.39275 109.02184-76.99994H601.44485v-205.98574860649z" style="fill:#fff" inkscape:connector-curvature="0"/><path id="path10" d="m919.42586 205.98497c-113.99519.0-205.99537 92.00648-206.00296 205.99982-15e-5 68.67178.0 137.32749.0 205.99983h77.99994c-.012-68.6493.0176-137.46869.0-205.99983.0846-70.92785 57.05747-128.99988 128.00462-128.99988 5.28623.0 10.49823.32864 15.62183.95311 18.2219-24.51229 41.78461-45.0838 68.42501-60.15146-25.65065-11.43799-54.08662-17.80159-84.04684-17.80159z" style="fill:#fff" inkscape:connector-curvature="0"/><path id="path12" d="m1109.4153 205.98457c-113.99994.0-205.99983 91.99993-205.99983 205.99984.0 112.9999 91.99989 205.9998 205.99983 205.9998 114 0 205.9999-92.9999 205.9999-205.9998.0-113.99991-91.9999-205.99984-205.9999-205.99984zm0 333.99974c-70.9999.0-128.99994-56.99996-128.99994-127.9999.0-70.99995 58.00004-128.9999 128.99994-128.9999 71 0 128.9999 57.99995 128.9999 128.9999.0 70.99994-57.9999 127.9999-128.9999 127.9999z" style="fill:#fff" inkscape:connector-curvature="0"/><path id="path14" d="m1444.4737 205.98457c-113.9999.0-205.9998 91.99993-205.9998 205.99984.0 112.9999 91.9999 205.9998 205.9998 205.9998s205.9999-92.9999 205.9999-205.9998c0-113.99991-92-205.99984-205.9999-205.99984zm0 333.99974c-70.9999.0-128.9999-56.99996-128.9999-127.9999.0-70.99995 58-128.9999 128.9999-128.9999 71 0 128.9999 57.99995 128.9999 128.9999.0 70.99994-57.9999 127.9999-128.9999 127.9999z" style="fill:#fff" inkscape:connector-curvature="0"/><path id="path16" d="m1738.5308 379.98447c0-53 43-97 95.9999-97 53 0 97 44 97 97v237.9997h76.9999v-237.9997c0-53 43-97 96.9999-97 53 0 95.9999 44 95.9999 97v237.9997h77v-237.9997c0-96-77-173.9999-172.9999-173.9999-54.9999.0-103.9999 24.99998-135.9999 64.99995-31.9999-39.99997-79.9999-64.99995-134.9999-64.99995-95.9999.0-173.9998 77.9999-173.9998 173.9999v237.9997h77.9999z" style="fill:#fff" inkscape:connector-curvature="0"/></g></svg></span><span class="navbar-brand__name">Stroom</span></a>
  <div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
    <ul class="navbar-nav mt-2 mt-lg-0">
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="../../../../about/about/"><span>About</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link active" href="../../../../docs/"><span class="active">Documentation</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="../../../../releases/"><span>Releases Notes</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="../../../../community/"><span>Community</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="../../../../news/"><span>News</span></a>
      </li>
      <li class="nav-item dropdown mr-4 d-none d-lg-block">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	Stroom Version (7.2)
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
	
	
	
	<a class="dropdown-item" href="../../../../../">7.2 (Latest)</a>
	
	<a class="dropdown-item" href="../../../../../7.1">7.1</a>
	
	<a class="dropdown-item" href="../../../../7.0">7.0</a>
	
	<a class="dropdown-item" href="../../../../legacy">Legacy</a>
	
</div>
</li>
      </ul>
  </div>
  <div class="navbar-nav d-none d-lg-block">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="../../../../offline-search-index.7bcdb31d7639c4171eff61f0319351cd.json"
    data-offline-search-base-href="../../../../"
    data-offline-search-max-results="50"
  >
</div>

  </div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This is the multi-page printable view of this section.
<a href="#" onclick="print();return false;">Click here to print</a>.
</p><p>
<a href="../../../../docs/install-guide/kubernetes/">Return to the regular view of this page</a>.
</p>
</div>



<h1 class="title">Kubernetes Cluster</h1>
<div class="lead">How to deploy and administer a container based Stroom cluster using Kubernetes.</div>




    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-ca95eefd1a4d9ee57e159bf1e8628042">Introduction</a></li>


    
  
    
    
	
<li>2: <a href="#pg-05f10dc925729e909b808bad4073ad2b">Install Operator</a></li>


    
  
    
    
	
<li>3: <a href="#pg-0507fe5566061e6ceaad9054e4e5d301">Upgrade Operator</a></li>


    
  
    
    
	
<li>4: <a href="#pg-c8eeddcab75a955590d58d0c4350b4bc">Remove Operator</a></li>


    
  
    
    
	
<li>5: <a href="#pg-721b26717d1f73ea1eb3ecfc16a7a16d">Configure Database</a></li>


    
  
    
    
	
<li>6: <a href="#pg-fb65f82f056e9f1601c353119678b6a6">Configure a cluster</a></li>


    
  
    
    
	
<li>7: <a href="#pg-27477f3276848d8ef7a8896dec8ac3f9">Auto Scaler</a></li>


    
  
    
    
	
<li>8: <a href="#pg-f1fcf284925090030b347c6d04e9d8a0">Stop Stroom Cluster</a></li>


    
  
    
    
	
<li>9: <a href="#pg-3603d04935fa22b34e672359e6b24a4a">Restart Node</a></li>


    
  

    </ul>


<div class="content">
      
</div>
</div>


  
  
  
  

  
  

  
    
    
	
    



<div class="td-content" style="--base-section-num: '1.'; ">
    
  <h1 id="pg-ca95eefd1a4d9ee57e159bf1e8628042">1 - Introduction</h1>
    <div class="lead">Introduction to using Stroom on Kubernetes.</div>
	<p>






  

<span class="external-link">
  <a href="https://kubernetes.io/" target="_blank" class="" style="" title="Kubernetes (external link)">
    <span>Kubernetes</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
 is an open-source system for automating deployment scaling and management of containerised applications.</p>
<p>Stroom is a distributed application designed to handle large-scale dataflows.
As such, it is ideally suited to a Kubernetes deployment, especially when operated at scale.
Features standard to Kubernetes, like 






  

<span class="external-link">
  <a href="https://kubernetes.io/docs/concepts/services-networking/ingress/" target="_blank" class="" style="" title="Ingress (external link)">
    <span>Ingress</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
 and 






  

<span class="external-link">
  <a href="https://kubernetes.io/docs/concepts/cluster-administration/networking/" target="_blank" class="" style="" title="Cluster Networking (external link)">
    <span>Cluster Networking</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
, simplify the installation and ongoing operation of Stroom.</p>
<p>Running applications in K8s can be challenging for applications not designed to operate in a K8s cluster natively.
A purpose-built Kubernetes Operator (






  

<span class="external-link">
  <a href="https://github.com/p-kimberley/stroom-k8s-operator" target="_blank" class="" style="" title="stroom-k8s-operator (external link)">
    <span>stroom-k8s-operator</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
) has been developed to make deployment easier, while taking advantage of several key Kubernetes features to further automate Stroom cluster management.</p>
<p>The concept of Kubernetes operators is discussed 






  

<span class="external-link">
  <a href="https://kubernetes.io/docs/concepts/extend-kubernetes/operator/" target="_blank" class="" style="" title="here (external link)">
    <span>here</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
.</p>
<h2 id="key-features">Key features</h2>
<p>The Stroom K8s Operator provides the following key features:</p>
<h3 id="deployment">Deployment</h3>
<ol>
<li>Simplified configuration, enabling administrators to define the entire state of a Stroom cluster in one file</li>
<li>Designate separate processing and UI nodes, to ensure the Stroom user interface remains responsive, regardless of processing load</li>
<li>Automatic secrets management</li>
</ol>
<h3 id="operations">Operations</h3>
<ol>
<li>Scheduled database backups</li>
<li>Stroom node audit log shipping</li>
<li>Automatically drain Stroom tasks before node shutdown</li>
<li>Automatic Stroom task limit tuning, to attempt to keep CPU usage within configured parameters</li>
<li>Rolling Stroom version upgrades</li>
</ol>
<h2 id="next-steps">Next steps</h2>
<p>Install the <a href="../../../../docs/install-guide/kubernetes/install-operator/">Stroom K8s Operator</a></p>

</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '2.'; page-break-before: always">
    
  <h1 id="pg-05f10dc925729e909b808bad4073ad2b">2 - Install Operator</h1>
    <div class="lead">How to install the Stroom Kubernetes operator.</div>
	<h2 id="prerequisites">Prerequisites</h2>
<ol>
<li>Kubernetes cluster, version &gt;= 1.20.2</li>
<li>






  

<span class="external-link">
  <a href="https://github.com/kubernetes-sigs/metrics-server" target="_blank" class="" style="" title="metrics-server (external link)">
    <span>metrics-server</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
 (pre-installed with some K8s distributions)</li>
<li><code>kubectl</code> and cluster-wide admin access</li>
</ol>
<h2 id="preparation">Preparation</h2>
<p>Stage the following images in a locally-accessible container registry:</p>
<ol>
<li>All images listed in: 






  

<span class="external-link">
  <a href="https://github.com/p-kimberley/stroom-k8s-operator/blob/master/deploy/images.txt" target="_blank" class="" style="" title="https://github.com/p-kimberley/stroom-k8s-operator/blob/master/deploy/images.txt (external link)">
    <span>https://github.com/p-kimberley/stroom-k8s-operator/blob/master/deploy/images.txt</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
</li>
<li>MySQL (e.g. <code>mysql/mysql-server:8.0.25</code>)</li>
<li>Stroom (e.g. <code>gchq/stroom:v7-LATEST</code>)</li>
<li><code>gchq/stroom-log-sender:v2.2.0</code> (only required if log forwarding is enabled)</li>
</ol>
<h2 id="install-the-stroom-k8s-operator">Install the Stroom K8s Operator</h2>
<ol>
<li>
<p>Clone the repository</p>

  






<div class="code-toolbar">
  <pre 
    class="command-line language-bash" 
    data-user="user" 
    data-host="localhost" 
    data-continuation-str="\"
    data-filter-output="(out)"><code class="language-bash">git clone https://github.com/p-kimberley/stroom-k8s-operator.git</code></pre>
</div>

</li>
<li>
<p>Edit <code>./deploy/all-in-one.yaml</code>, prefixing any referenced images with your private registry URL.
For example, if your private registry is <code>my-registry.example.com</code>, the image <code>gcr.io/kubebuilder/kube-rbac-proxy:v0.8.0</code> will become: <code>my-registry.example.com:5000/gcr.io/kubebuilder/kube-rbac-proxy:v0.8.0</code>.</p>
</li>
<li>
<p>Deploy the Operator</p>

  






<div class="code-toolbar">
  <pre 
    class="command-line language-bash" 
    data-user="user" 
    data-host="localhost" 
    data-continuation-str="\"
    data-filter-output="(out)"><code class="language-bash">kubectl apply -f ./deploy/all-in-one.yaml</code></pre>
</div>

</li>
</ol>
<p>The Stroom K8s Operator is now deployed to namespace <code>stroom-operator-system</code>.
You can monitor its progress by watching the Pod named <code>stroom-operator-controller-manager</code>.
Once it reaches <code>Ready</code> state, you can deploy a Stroom cluster.</p>
<h2 id="allocating-more-resources">Allocating more resources</h2>
<p>If the Operator Pod is killed due to running out of memory, you may want to increase the amount allocated to it.</p>
<p>This can be done by:</p>
<ol>
<li>Editing the <code>resources.limits</code> settings of the controller Pod in <code>all-in-one.yaml</code></li>
<li><code>kubectl apply -f all-in-one.yaml</code></li>
</ol>

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Note</h4>


    The Operator retains CPU and memory metrics for all <code>StroomCluster</code> Pods for a 60-minute window.
In very large deployments, this may cause it to run out of memory.

</div>


<h2 id="next-steps">Next steps</h2>
<p><a href="../../../../docs/install-guide/kubernetes/configure-database-server/">Configure</a> a Stroom database server<br>
<a href="../../../../docs/install-guide/kubernetes/upgrade-operator/">Upgrade</a><br>
<a href="../../../../docs/install-guide/kubernetes/remove-operator/">Remove</a></p>

</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '3.'; page-break-before: always">
    
  <h1 id="pg-0507fe5566061e6ceaad9054e4e5d301">3 - Upgrade Operator</h1>
    <div class="lead">How to upgrade the Stroom Kubernetes Operator.</div>
	<p>Upgrading the Operator can be performed without disrupting any resources it controls, including Stroom clusters.</p>
<p>To perform the upgrade, follow the same steps in <a href="../../../../docs/install-guide/kubernetes/install-operator/">Installing the Stroom K8s Operator</a>.</p>

<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Warning</h4>

    Ensure you do NOT delete the operator first (i.e. <code>kubectl delete ...</code>)

</div>


<p>Once you have initiated the update (by executing <code>kubectl apply -f all-in-one.yaml</code>), an instance of the new Operator version will be created.
Once it starts up successfully, the old instance will be removed.</p>
<p>You can check whether the update succeeded by inspecting the image tag of the Operator Pod: <code>stroom-operator-system/stroom-operator-controller-manager</code>.
The tag should correspond to the release number that was downloaded (e.g. <code>1.0.0</code>)</p>
<p>If the upgrade failed, the existing Operator should still be running.</p>

</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '4.'; page-break-before: always">
    
  <h1 id="pg-c8eeddcab75a955590d58d0c4350b4bc">4 - Remove Operator</h1>
    <div class="lead">How to remove the Stroom Kubernetes operator.</div>
	<p>Removing the Stroom K8s Operator must be done with caution, as it causes all resources it manages, including <code>StroomCluster</code>, <code>DatabaseServer</code> and <code>StroomTaskAutoscaler</code> to be deleted.</p>
<p>While the Stroom clusters under its control <em>will</em> be gracefully terminated, they will become inaccessible until re-deployed.</p>
<p>It is good practice to first delete any dependent resources <em>before</em> deleting the Operator.</p>
<h2 id="deleting-the-operator">Deleting the Operator</h2>
<p>Execute this command against the <strong>same version</strong> of manifest that was used to deploy the Operator currently running.</p>

  






<div class="code-toolbar">
  <pre 
    class="command-line language-bash" 
    data-user="user" 
    data-host="localhost" 
    data-continuation-str="\"
    data-filter-output="(out)"><code class="language-bash">kubectl delete -f all-in-one.yaml</code></pre>
</div>


</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '5.'; page-break-before: always">
    
  <h1 id="pg-721b26717d1f73ea1eb3ecfc16a7a16d">5 - Configure Database</h1>
    <div class="lead">How to configure the database server for a Stroom cluster.</div>
	<p>Before creating a Stroom cluster, a database server must first be configured.</p>
<p>There are two options for deploying a MySQL database for Stroom:</p>
<h2 id="managed-by-stroom-k8s-operator">Managed by Stroom K8s Operator</h2>
<p>A Database server can be created and managed by the Operator.
This is the recommended option, as the Operator will take care of the creation and storage of database credentials, which are shared securely with the Pod via the use of a <code>Secret</code> cluster resource.</p>
<h3 id="create-a-databaseserver-resource-manifest">Create a <code>DatabaseServer</code> resource manifest</h3>
<p>Use the example at 






  

<span class="external-link">
  <a href="https://github.com/p-kimberley/stroom-k8s-operator/blob/master/samples/database-server.yaml" target="_blank" class="" style="" title="database-server.yaml (external link)">
    <span>database-server.yaml</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
.</p>
<p>See the <code>DatabaseServer</code> Custom Resource Definition (CRD) 






  

<span class="external-link">
  <a href="https://doc.crds.dev/github.com/p-kimberley/stroom-k8s-operator/stroom.gchq.github.io/DatabaseServer/v1" target="_blank" class="" style="" title="API documentation (external link)">
    <span>API documentation</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
 for an explanation of the various CRD fields.</p>
<p>By default, MySQL imposes a limit of 151 concurrent connections.
If your Stroom cluster is larger than a few nodes, it is likely you will exceed this limit.
Therefore, it is recommended to set the MySQL property <code>max_connections</code> to a suitable value.</p>
<p>Bear in mind the Operator generally consumes one connection per <code>StroomCluster</code> it manages, so be sure to include some headroom in your allocation.</p>
<p>You can specify this value via the <code>spec.additionalConfig</code> property as in the example below:</p>
<pre><code class="language-yaml">apiVersion: stroom.gchq.github.io/v1
kind: DatabaseServer
...
spec:
  additionalConfig:
    - max_connections=1000
...
</code></pre>
<h3 id="provision-a-persistentvolume-for-the-databaseserver">Provision a <code>PersistentVolume</code> for the <code>DatabaseServer</code></h3>
<p>General instructions on creating a Kubernetes Persistent Volume (PV) are explained 






  

<span class="external-link">
  <a href="https://kubernetes.io/docs/concepts/storage/persistent-volumes/" target="_blank" class="" style="" title="here (external link)">
    <span>here</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
.</p>
<p>The Operator will create <code>StatefulSet</code> when the <code>DatabaseServer</code> is deployed, which will attempt to claim a <code>PersistentVolume</code> matching the specification provided in <code>DatabaseServer.spec.volumeClaim</code>.</p>
<p>Fast, low-latency storage should be used for the Stroom database</p>
<h3 id="deploy-the-databaseserver-to-the-cluster">Deploy the <code>DatabaseServer</code> to the cluster</h3>

  






<div class="code-toolbar">
  <pre 
    class="command-line language-bash" 
    data-user="user" 
    data-host="localhost" 
    data-continuation-str="\"
    data-filter-output="(out)"><code class="language-bash">kubectl apply -f database-server.yaml</code></pre>
</div>

<p>Observe the Pod <code>stroom-&lt;database server name&gt;-db</code> start up.
Once it&rsquo;s reached <code>Ready</code> state, the server has started, and the databases you specified have been created.</p>
<h3 id="backup-the-created-credentials">Backup the created credentials</h3>
<p>The Operator generates a <code>Secret</code> containing the passwords of the users <code>root</code> and <code>stroomuser</code> when it initially creates the <code>DatabaseServer</code> resource.
These credentials should be backed up to a secure location, in the event the <code>Secret</code> is inadvertently deleted.</p>
<p>The <code>Secret</code> is named using the format: <code>stroom-&lt;db server name&gt;-db</code> (e.g. <code>stroom-dev-db</code>).</p>
<h2 id="external">External</h2>
<p>You may alternatively provide the connection details of an existing MySQL (or compatible) database server.
This may be desirable if you have for instance, a replication-enabled MySQL InnoDB cluster.</p>
<h3 id="provision-the-server-and-stroom-databases">Provision the server and Stroom databases</h3>

<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">TODO</h4>

    Complete this secion.

</div>

<h3 id="store-credentials-in-a-secret">Store credentials in a <code>Secret</code></h3>
<p>Create a <code>Secret</code> in the same namespace as the <code>StroomCluster</code>, containing the key <code>stroomuser</code>, with the value set to the password of that user.</p>

<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Warning</h4>

    If at any time the MySQL password is updated, the value of the <code>Secret</code> must also be changed.
Otherwise, Stroom will stop functioning.

</div>


<h2 id="upgrading-or-removing-a-databaseserver">Upgrading or removing a <code>DatabaseServer</code></h2>
<p>A <code>DatabaseServer</code> cannot shut down while its dependent <code>StroomCluster</code> is running.
This is a necessary safeguard to prevent database connectivity from being lost.</p>
<p>Upgrading or removing a <code>DatabaseServer</code> requires the <code>StroomCluster</code> be <a href="../../../../docs/install-guide/kubernetes/stop-stroom-cluster/">removed</a> first.</p>
<h2 id="next-steps">Next steps</h2>
<p><a href="configure-stroom-cluster.md">Configure</a> a Stroom cluster</p>

</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '6.'; page-break-before: always">
    
  <h1 id="pg-fb65f82f056e9f1601c353119678b6a6">6 - Configure a cluster</h1>
    <div class="lead">How to configure a Stroom cluster.</div>
	<p>A <code>StroomCluster</code> resource defines the topology and behaviour of a collection of Stroom nodes.</p>
<p>The following key concepts should be understood in order to optimally configure a cluster.</p>
<h2 id="concepts">Concepts</h2>
<h3 id="nodeset">NodeSet</h3>
<p>A logical grouping of nodes intended to together, fulfil a common role.
There are three possible roles, as defined by <code>ProcessingNodeRole</code>:</p>
<ol>
<li>Undefined (default).
Each node in the <code>NodeSet</code> can receive and process data, as well as service web frontend requests.</li>
<li><code>Processing</code>
Node can receive and process data, but not service web frontend requests.</li>
<li><code>Frontend</code>
Node services web frontend requests only.</li>
</ol>
<p>There is no imposed limit to the number of <code>NodeSet</code>s, however it generally doesn&rsquo;t make sense to have more than one assigned to either <code>Processing</code> or <code>Frontend</code> roles.
In clusters where nodes are not very busy, it should not be necessary to have dedicated <code>Frontend</code> nodes.
In cases where load is prone to spikes, such nodes can greatly help improve the responsiveness of the Stroom user interface.</p>
<blockquote>
<p>It is important to ensure there is at least one <code>NodeSet</code> for each role in the <code>StroomCluster</code>
The Operator automatically wires up traffic routing to ensure that only non-<code>Frontend</code> nodes receive event data.
Additionally, <code>Frontend</code>-only nodes have server tasks disabled automatically on startup, effectively preventing them from participating in stream processing.</p>
</blockquote>
<h3 id="ingress">Ingress</h3>
<p>Kubernetes <code>Ingress</code> resources determine how requests are routed to an application.
<code>Ingress</code> resources are configured by the Operator based on the <code>NodeSet</code> roles and the provided <code>StroomCluster.spec.ingress</code> parameters.</p>
<p>It is possible to disable <code>Ingress</code> for a given <code>NodeSet</code>, which excludes nodes within that group from receiving any traffic via the public endpoint.
This can be useful when creating nodes dedicated to data processing, which do not receive data.</p>
<h3 id="stroomtaskautoscaler">StroomTaskAutoscaler</h3>
<p><code>StroomTaskAutoscaler</code> is an optional resource that if defined, activates &ldquo;auto-pilot&rdquo; features for an associated <code>StroomCluster</code>.
See <a href="../../../../docs/install-guide/kubernetes/configure-stroomtaskautoscaler/">this guide</a> on how to configure.</p>
<h2 id="creating-a-stroom-cluster">Creating a Stroom cluster</h2>
<h3 id="create-a-stroomcluster-resource-manifest">Create a <code>StroomCluster</code> resource manifest</h3>
<p>Use the example 






  

<span class="external-link">
  <a href="https://github.com/p-kimberley/stroom-k8s-operator/blob/master/samples/stroom-cluster.yaml" target="_blank" class="" style="" title="stroom-cluster.yaml (external link)">
    <span>stroom-cluster.yaml</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
.</p>
<p>If you chose to create an Operator-managed <code>DatabaseServer</code>, the <code>StroomCluster.spec.databaseServerRef</code> should point to the name of the <code>DatabaseServer</code>.</p>

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">See Also</h4>


    <p>See the <code>StroomCluster</code> Custom Resource Definition (CRD)</p>
<span class="external-link">
  <a href="https://doc.crds.dev/github.com/p-kimberley/stroom-k8s-operator/stroom.gchq.github.io/StroomCluster/v1" target="_blank" class="" style="" title="API documentation (external link)">
    <span>API documentation</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
 for an explanation of the various CRD fields


</div>


<h3 id="provision-a-persistentvolume-for-each-stroom-node">Provision a <code>PersistentVolume</code> for each Stroom node</h3>
<p>Each <code>PersistentVolume</code> provides persistent local storage for a Stroom node.
The amount of storage doesn&rsquo;t generally need to be large, as stream data is stored on another volume.
When deciding on a storage quota, be sure to consider the needs of log and reference data, in particular.</p>
<p>This volume should ideally be backed by fast, low-latency storage in order to maximise the performance of LMDB.</p>
<h3 id="deploy-the-stroomcluster-resource">Deploy the <code>StroomCluster</code> resource</h3>

  






<div class="code-toolbar">
  <pre 
    class="command-line language-bash" 
    data-user="user" 
    data-host="localhost" 
    data-continuation-str="\"
    data-filter-output="(out)"><code class="language-bash">kubectl apply -f stroom-cluster.yaml</code></pre>
</div>

<p>If the <code>StroomCluster</code> configuration is valid, the Operator will deploy a <code>StatefulSet</code> for each <code>NodeSet</code> defined in <code>StroomCluster.spec.nodeSets</code>.
Once these <code>StatefulSet</code>s reach <code>Ready</code> state, you are ready to access the Stroom UI.</p>

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Note</h4>


    If the <code>StatefulSet</code>s don&rsquo;t deploy, there is probably something wrong with your configuration. Check the logs of the pod <code>stroom-operator-system/stroom-operator-controller-manager</code> for any errors.

</div>


<h3 id="log-into-stroom">Log into Stroom</h3>
<p>Access the Stroom UI at: <code>https://&lt;ingress hostname&gt;</code>.
The initial credentials are:</p>
<ul>
<li>Username: <code>admin</code></li>
<li>Password: <code>admin</code></li>
</ul>
<h2 id="further-customisation-optional">Further customisation (optional)</h2>
<p>The configuration bundled with the Operator provides enough customisation for most use cases, via explicit properties and environment variables.</p>
<p>If you need to further customise Stroom, you have the following methods available:</p>
<h3 id="override-the-stroom-configuration-file">Override the Stroom configuration file</h3>
<p>Deploy a <code>ConfigMap</code> separately.
You can then specify the <code>ConfigMap</code> <code>name</code> and key (<code>itemName</code>) containing the configuration file to be mounted into each Stroom node container.</p>
<h3 id="provide-additional-environment-variables">Provide additional environment variables</h3>
<p>Specify custom environment variables in <code>StroomCluster.spec.extraEnv</code>.
You can reference these in the Stroom configuration file.</p>
<h3 id="mount-additional-files">Mount additional files</h3>
<p>You can also define additional <code>Volume</code>s and <code>VolumeMount</code>s to be injected into each Stroom node.
This can be useful when providing files like certificates for Kafka integration.</p>
<h2 id="reconfiguring-the-cluster">Reconfiguring the cluster</h2>
<p>Some <code>StroomCluster</code> configuration properties can be reconfigured while the cluster is still running:</p>
<ol>
<li><code>spec.image</code> Change this to deploy a newer (or different) Stroom version</li>
<li><code>spec.terminationGracePeriodSecs</code> Applies the next time a node or cluster is deleted</li>
<li><code>spec.nodeSets.count</code> If changed, the <code>NodeSet</code>&rsquo;s <code>StatefulSet</code> will be scaled (up or down) to match the corresponding number of replicas</li>
</ol>
<p>After changing any of the above properties, re-apply the manifest:</p>

  






<div class="code-toolbar">
  <pre 
    class="command-line language-bash" 
    data-user="user" 
    data-host="localhost" 
    data-continuation-str="\"
    data-filter-output="(out)"><code class="language-bash">kubectl apply -f stroom-cluster.yaml</code></pre>
</div>

<p>If any other changes need to be made, <a href="../../../../docs/install-guide/kubernetes/stop-stroom-cluster/">delete</a> then <a href="../../../../docs/install-guide/kubernetes/configure-stroom-cluster/">re-create</a> the <code>StroomCluster</code>.</p>
<h2 id="next-steps">Next steps</h2>
<p><a href="../../../../docs/install-guide/kubernetes/configure-stroomtaskautoscaler/">Configure Stroom task autoscaling</a><br>
<a href="../../../../docs/install-guide/kubernetes/stop-stroom-cluster/">Stop</a> a Stroom cluster</p>

</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '7.'; page-break-before: always">
    
  <h1 id="pg-27477f3276848d8ef7a8896dec8ac3f9">7 - Auto Scaler</h1>
    <div class="lead">How to configure Stroom task auto scaling.</div>
	<h2 id="motivation">Motivation</h2>
<p>Setting optimal Stroom stream processor task limits is a crucial factor in running a healthy, performant cluster.
If a node is allocated too many tasks, it may become unresponsive or crash.
Conversely, if allocated too few tasks, it may have CPU cycles to spare.</p>
<p>The optimal number of tasks is often time-dependent, as load will usually fluctuate during the day and night.
In large deployments, it&rsquo;s not ideal to set static limits, as doing so risks over-committing nodes during intense spikes in activity (such as backlog processing or multiple concurrent searches).
Therefore an automated solution, factoring in system load, is called for.</p>
<h2 id="stroom-task-autoscaling">Stroom task autoscaling</h2>
<p>When a <code>StroomTaskAutoscaler</code> resource is deployed to a linked <code>StroomCluster</code>, the Operator will periodically compare each Stroom node&rsquo;s average Pod CPU usage against user-defined thresholds.</p>
<h2 id="enabling-autoscaling">Enabling autoscaling</h2>
<h3 id="create-an-stroomtaskautoscaler-resource-manifest">Create an <code>StroomTaskAutoscaler</code> resource manifest</h3>
<p>Use the example 






  

<span class="external-link">
  <a href="https://github.com/p-kimberley/stroom-k8s-operator/blob/master/samples/autoscaler.yaml" target="_blank" class="" style="" title="autoscaler.yaml (external link)">
    <span>autoscaler.yaml</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
.</p>
<p>Below is an explanation of some of the main parameters.
The rest are documented 






  

<span class="external-link">
  <a href="https://doc.crds.dev/github.com/p-kimberley/stroom-k8s-operator/stroom.gchq.github.io/StroomTaskAutoscaler/v1" target="_blank" class="" style="" title="here (external link)">
    <span>here</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
.</p>
<ul>
<li><code>adjustmentIntervalMins</code> Determines how often the Operator will check whether a node has exceeded its CPU parameters.
It should be often enough to catch brief load spikes, but not too often as to overload the Operator and Kubernetes cluster through excessive API calls and other overhead.</li>
<li><code>metricsSlidingWindowMin</code> is the window of time over which CPU usage is averaged.
Should not be too small, otherwise momentary load spikes could cause task limits to be reduced unnecessarily.
Too large and spikes may not cause throttling to occur.</li>
<li><code>minCpuPercent</code> and <code>maxCpuPercent</code> should be set to a reasonably tight range, in order to keep the task limit as close to optimal as possible.</li>
<li><code>minTaskLimit</code> and <code>maxTaskLimit</code> are considered safeguards to avoid nodes ever being allocated an unreasonable number of task.
Setting <code>maxTaskLimit</code> to be equal to the number of assigned CPUs would be a reasonable starting point.</li>
</ul>

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Note</h4>


    A node&rsquo;s task limits will only be adjusted while its task queue is full.
That is, unless a node is fully-committed, it will not be scaled.
This is to avoid continually downscaling each node to the minimum during periods of inactivity.
Because of this, be realistic with setting <code>maxTaskLimit</code> to ensure the node is actually capable of hitting that maximum.
If it can&rsquo;t, the autoscaler will continue adjusting upwards, potentially causing the node to become unresponsive.

</div>


<h3 id="deploy-the-resource-manifest">Deploy the resource manifest</h3>

  






<div class="code-toolbar">
  <pre 
    class="command-line language-bash" 
    data-user="user" 
    data-host="localhost" 
    data-continuation-str="\"
    data-filter-output="(out)"><code class="language-bash">kubectl apply -f autoscaler.yaml</code></pre>
</div>

<h2 id="disable-autoscaling">Disable autoscaling</h2>
<p>Delete the <code>StroomTaskAutoscaler</code> resource</p>

  






<div class="code-toolbar">
  <pre 
    class="command-line language-bash" 
    data-user="user" 
    data-host="localhost" 
    data-continuation-str="\"
    data-filter-output="(out)"><code class="language-bash">kubectl delete -f autoscaler.yaml</code></pre>
</div>


</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '8.'; page-break-before: always">
    
  <h1 id="pg-f1fcf284925090030b347c6d04e9d8a0">8 - Stop Stroom Cluster</h1>
    <div class="lead">How to stop the whole Stroom cluster.</div>
	<p>A Stroom cluster can be stopped by deleting the <code>StroomCluster</code> resource that was deployed.
When this occurs, the Operator will perform the following actions for each node, in sequence:</p>
<ol>
<li>Disable processing of all tasks.</li>
<li>Wait for all processing tasks to be completed.
This check is performed once every minute, so there may be a brief delay between a node completed its tasks before being shut down.</li>
<li>Terminate the container.</li>
</ol>
<p>The <code>StroomCluster</code> resource will be removed from the Kubernetes cluster once all nodes have finished processing tasks.</p>

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Note</h4>


    The <code>StroomCluster.spec.nodeTerminationGracePeriodSecs</code> is an important setting that determines how long the Operator will wait for each node&rsquo;s tasks to complete before terminating it.
Ensure this is set to a reasonable value, otherwise long-running tasks may not have enough time to finish if the <code>StroomCluster</code> is taken down (e.g. for maintenance).

</div>


<h2 id="stopping-the-cluster">Stopping the cluster</h2>

  






<div class="code-toolbar">
  <pre 
    class="command-line language-bash" 
    data-user="user" 
    data-host="localhost" 
    data-continuation-str="\"
    data-filter-output="(out)"><code class="language-bash">kubectl delete -f stroom-cluster.yaml
kubectl delete -f database-server.yaml</code></pre>
</div>

<p>If a <code>StroomTaskAutoscaler</code> was created, remove that as well.</p>
<p>If any of these commands appear to hang with no response, that&rsquo;s normal; the Operator is likely waiting for tasks to drain.
You may press <code>Ctrl+C</code> to return to the shell and task termination will continue in the background.</p>

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Note</h4>


    If the <code>StroomCluster</code> deletion appears to be hung, you can inspect the Operator logs to see which nodes are holding up deletion due to outstanding tasks.
You will see a list of one or more node names, with the number of tasks outstanding in brackets (e.g. <code>StroomCluster deletion waiting on task completing for 1 nodes: stroom-dev-node-data-0 (5)</code>).

</div>


<p>Once the <code>StroomCluster</code> is removed, it can be reconfigured (if required) and redeployed, using the same process as in <a href="../../../../docs/install-guide/kubernetes/configure-stroom-cluster/">Configure a Stroom cluster</a>.</p>
<h2 id="persistentvolumeclaim-deletion"><code>PersistentVolumeClaim</code> deletion</h2>
<p>When a Stroom node is shut down, by default its <code>PersistentVolumeClaim</code> will remain.
This ensures it gets re-assigned the same <code>PersistentVolume</code> when it starts up again.</p>
<p>This behaviour should satisfy most use cases.
However the operator may be configured to delete the PVC in certain situations, by specifying the <code>StroomCluster.spec.volumeClaimDeletePolicy</code>:</p>
<ol>
<li><code>DeleteOnScaledownOnly</code> deletes a node&rsquo;s PVC where the number of nodes in the <code>NodeSet</code> is reduced and as a result, the node Pod is no longer part of the <code>NodeSet</code></li>
<li><code>DeleteOnScaledownAndClusterDeletion</code> deletes the PVC if the node Pod is removed.</li>
</ol>
<h2 id="next-steps">Next steps</h2>
<p><a href="../../../../docs/install-guide/kubernetes/remove-operator/">Removing</a> the Stroom K8s Operator</p>

</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '9.'; page-break-before: always">
    
  <h1 id="pg-3603d04935fa22b34e672359e6b24a4a">9 - Restart Node</h1>
    <div class="lead">How to restart a Stroom node.</div>
	<p>Stroom nodes may occasionally hang or become unresponsive.
In these situations, it may be necessary to terminate the Pod.</p>
<p>After you identify the unresponsive Pod (e.g. by finding a node not responding to cluster ping):</p>

  






<div class="code-toolbar">
  <pre 
    class="command-line language-bash" 
    data-user="user" 
    data-host="localhost" 
    data-continuation-str="\"
    data-filter-output="(out)"><code class="language-bash">kubectl delete pod -n &lt;Stroom cluster namespace&gt; &lt;pod name&gt;</code></pre>
</div>

<p>This will attempt to drain tasks for the node.
After the termination grace period has elapsed, the Pod will be killed and a new one will automatically respawn to take its place.
Once the new Pod finishes starting up, if functioning correct it should begin responding to cluster ping.</p>

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Note</h4>


    Prior to a Stroom node being stopped (for whatever reason), task processing for that node is disabled and it is drained of all active tasks.
Task processing is resumed once the node starts up again.

</div>


<h2 id="force-deletion">Force deletion</h2>
<p>If waiting for the grace period to elapse is unacceptable and you are willing to risk shutting down the node without draining it first (or you are <strong>sure</strong> it has no active tasks), you can force delete the Pod using the procedure outline in the 






  

<span class="external-link">
  <a href="https://kubernetes.io/docs/tasks/run-application/force-delete-stateful-set-pod/" target="_blank" class="" style="" title="Kubernetes documentation (external link)">
    <span>Kubernetes documentation</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
:</p>

  






<div class="code-toolbar">
  <pre 
    class="command-line language-bash" 
    data-user="user" 
    data-host="localhost" 
    data-continuation-str="\"
    data-filter-output="(out)"><code class="language-bash">kubectl delete pod -n &lt;Stroom cluster namespace&gt; &lt;pod name&gt; --grace-period=0 --force</code></pre>
</div>


</div>




    
	
  



          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/gchq/stroom" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2023 Crown Copyright All Rights Reserved</small>
        
	
      </div>
    </div>
  </div>
</footer>


    </div>
    

<script src='../../../../js/popper.min.js'></script>
<script src='../../../../js/bootstrap.min.js'></script>






<script src='../../../../js/tabpane-persist.js'></script>




















<script src="../../../../js/main.min.cbc1d428d83561c4dec32da9374290554119d7483329f849251cb7153b2ecd07.js" integrity="sha256-y8HUKNg1YcTewy2pN0KQVUEZ10gzKfhJJRy3FTsuzQc=" crossorigin="anonymous"></script>



<script src='../../../../js/prism.js'></script>



  </body>
</html>
