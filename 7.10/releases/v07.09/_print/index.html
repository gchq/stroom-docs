<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.95.0" />
<link rel="canonical" type="text/html" href="../../../releases/v07.09/">
<meta name="robots" content="noindex, nofollow">

<link rel="preload" href="../../../fonts/google_open_sans_300.ttf" as="font" type="font/ttf" crossorigin >
<link rel="preload" href="../../../fonts/google_open_sans_300i.ttf" as="font" type="font/ttf" crossorigin >
<link rel="preload" href="../../../fonts/google_open_sans_400.ttf" as="font" type="font/ttf" crossorigin >
<link rel="preload" href="../../../fonts/google_open_sans_400i.ttf" as="font" type="font/ttf" crossorigin >
<link rel="preload" href="../../../fonts/google_open_sans_700.ttf" as="font" type="font/ttf" crossorigin >
<link rel="preload" href="../../../fonts/google_open_sans_700i.ttf" as="font" type="font/ttf" crossorigin >
<link rel="preload" href="../../../webfonts/fa-brands-400.ttf" as="font" type="font/ttf" crossorigin >
<link rel="preload" href="../../../webfonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin >


<link rel="preload" href="../../../webfonts/fa-solid-900.ttf" as="font" type="font/ttf" crossorigin >
<link rel="preload" href="../../../webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin >






<link rel="shortcut icon" href="../../../favicons/favicon.ico" >
<link rel="apple-touch-icon" href="../../../favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="../../../favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="../../../favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="../../../favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="../../../favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="../../../favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="../../../favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="../../../favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="../../../favicons/android-192x192.png" sizes="192x192">

<title>Version 7.9 | Stroom</title>
<meta name="description" content="Key new features and changes present in v7.9 of Stroom and Stroom-Proxy.
">
<meta property="og:title" content="Version 7.9" />
<meta property="og:description" content="Key new features and changes present in v7.9 of Stroom and Stroom-Proxy.
" />
<meta property="og:type" content="website" />
<meta property="og:url" content="/releases/v07.09/" /><meta property="og:site_name" content="Stroom" />

<meta itemprop="name" content="Version 7.9">
<meta itemprop="description" content="Key new features and changes present in v7.9 of Stroom and Stroom-Proxy.
"><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Version 7.9"/>
<meta name="twitter:description" content="Key new features and changes present in v7.9 of Stroom and Stroom-Proxy.
"/>




<link rel="preload" href="../../../scss/main.min.c9c2acb16647e4c0a24660355bfca96b0ec94226f4c0568ac7b0913f56303345.css" as="style">
<link href="../../../scss/main.min.c9c2acb16647e4c0a24660355bfca96b0ec94226f4c0568ac7b0913f56303345.css" rel="stylesheet" integrity="">


<script src='../../../js/jquery-3.6.0.min.js'></script>




<link rel="stylesheet" href="../../../css/prism.css"/>


<link rel="stylesheet" href="../../../css/stroom-ui/icon-colours.min.c7f7492721ac22f5e69eb7c9e66ec2d6dda4fbb93805fdb5f383e323f347838d.css" integrity="sha256-x/dJJyGsIvXmnrfJ5m7C1t2k&#43;7k4Bf2184PjI/NHg40=">

<link rel="stylesheet" href="../../../css/stroom-ui/material_design_colors.min.ab1318fe69a1013ff756090954c02c5364ff48d150dcc94468a73d2e3efd3fc0.css" integrity="sha256-qxMY/mmhAT/3VgkJVMAsU2T/SNFQ3MlEaKc9Lj79P8A=">

<link rel="stylesheet" href="../../../css/stroom-ui/theme-root.min.bebaa7a01087d1ece8e812db2a1a91349b15556d04f84eea180c6d23491738c4.css" integrity="sha256-vrqnoBCH0ezo6BLbKhqRNJsVVW0E&#43;E7qGAxtI0kXOMQ=">

<link rel="stylesheet" href="../../../css/stroom-ui/theme-dark.min.bc08bf14d505124d1eb4316e6df1348b0985e517e3cc0f5a590a03a968cc8c65.css" integrity="sha256-vAi/FNUFEk0etDFubfE0iwmF5RfjzA9aWQoDqWjMjGU=">




  </head>
  <body class="td-section">
    <header>
      <nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
  <a class="navbar-brand" href="../../../"><span class="navbar-brand__logo navbar-logo"><svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="110.61089" height="30.000004" viewBox="0 0 88.488641 23.999957" id="svg2" inkscape:version="0.91 r13725" sodipodi:docname="logo.svg"><defs id="defs20"/><sodipodi:namedview pagecolor="#989898" bordercolor="#666666" borderopacity="1" objecttolerance="10" gridtolerance="10" guidetolerance="10" inkscape:pageopacity="0" inkscape:pageshadow="2" inkscape:window-width="1920" inkscape:window-height="1137" id="namedview18" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:zoom="5.5951814" inkscape:cx="55.451414" inkscape:cy="16.275348" inkscape:window-x="0" inkscape:window-y="0" inkscape:window-maximized="1" inkscape:current-layer="svg2"/><g id="g4150" style="opacity:.97000002" transform="matrix(0.03883584,0,0,0.03883584,0,-3.1155874e-4)"><path id="path6" d="M121.99991 205.98497C54.999958 205.98497.0 259.98493.0 327.98487c0 66.99994 54.999958 121.99989 121.99991 121.99989h167.99987c24.99998.0 44.99996 20.99998 44.99996 44.99996.0 24.99998-19.99998 44.99996-44.99996 44.99996H109.20929C65.984126 553.87219 27.100843 581.57313.01093599 617.98462H289.99978c66.99994.0 121.99991-54.99996 121.99991-122.9999.0-66.99994-54.99997-121.99989-121.99991-121.99989H121.99991c-24.999984.0-44.999969-19.99999-44.999969-44.99996.0-24.99998 19.999985-44.99996 44.999969-44.99996h228.79045c26.9905-35.88325 65.47093-63.18547 108.21554-76.99994H121.99991z" style="fill:#fff" inkscape:connector-curvature="0"/><path id="path8" d="M601.44485-.00077860649C572.6583 8.3697982 546.49491 22.822962 524.44491 41.902305V205.78969l.002.19528h-.002c-65.11 48e-5-123.03145 30.0199-160.74675 76.99994h160.74675v334.99971h76.99994V282.98491h144.85298c27.16134-36.05885 65.96411-63.39275 109.02184-76.99994H601.44485v-205.98574860649z" style="fill:#fff" inkscape:connector-curvature="0"/><path id="path10" d="m919.42586 205.98497c-113.99519.0-205.99537 92.00648-206.00296 205.99982-15e-5 68.67178.0 137.32749.0 205.99983h77.99994c-.012-68.6493.0176-137.46869.0-205.99983.0846-70.92785 57.05747-128.99988 128.00462-128.99988 5.28623.0 10.49823.32864 15.62183.95311 18.2219-24.51229 41.78461-45.0838 68.42501-60.15146-25.65065-11.43799-54.08662-17.80159-84.04684-17.80159z" style="fill:#fff" inkscape:connector-curvature="0"/><path id="path12" d="m1109.4153 205.98457c-113.99994.0-205.99983 91.99993-205.99983 205.99984.0 112.9999 91.99989 205.9998 205.99983 205.9998 114 0 205.9999-92.9999 205.9999-205.9998.0-113.99991-91.9999-205.99984-205.9999-205.99984zm0 333.99974c-70.9999.0-128.99994-56.99996-128.99994-127.9999.0-70.99995 58.00004-128.9999 128.99994-128.9999 71 0 128.9999 57.99995 128.9999 128.9999.0 70.99994-57.9999 127.9999-128.9999 127.9999z" style="fill:#fff" inkscape:connector-curvature="0"/><path id="path14" d="m1444.4737 205.98457c-113.9999.0-205.9998 91.99993-205.9998 205.99984.0 112.9999 91.9999 205.9998 205.9998 205.9998s205.9999-92.9999 205.9999-205.9998c0-113.99991-92-205.99984-205.9999-205.99984zm0 333.99974c-70.9999.0-128.9999-56.99996-128.9999-127.9999.0-70.99995 58-128.9999 128.9999-128.9999 71 0 128.9999 57.99995 128.9999 128.9999.0 70.99994-57.9999 127.9999-128.9999 127.9999z" style="fill:#fff" inkscape:connector-curvature="0"/><path id="path16" d="m1738.5308 379.98447c0-53 43-97 95.9999-97 53 0 97 44 97 97v237.9997h76.9999v-237.9997c0-53 43-97 96.9999-97 53 0 95.9999 44 95.9999 97v237.9997h77v-237.9997c0-96-77-173.9999-172.9999-173.9999-54.9999.0-103.9999 24.99998-135.9999 64.99995-31.9999-39.99997-79.9999-64.99995-134.9999-64.99995-95.9999.0-173.9998 77.9999-173.9998 173.9999v237.9997h77.9999z" style="fill:#fff" inkscape:connector-curvature="0"/></g></svg></span><span class="navbar-brand__name">Stroom</span></a>
  <div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
    <ul class="navbar-nav mt-2 mt-lg-0">
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="../../../about/about/"><span>About</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="../../../docs/"><span>Documentation</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link active" href="../../../releases/"><span class="active">Releases Notes</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="../../../community/"><span>Community</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="../../../news/"><span>News</span></a>
      </li>
      <li class="nav-item dropdown mr-4 d-none d-lg-block">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	Stroom Version (7.10)
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
	
	
	
	<a class="dropdown-item" href="../../../">7.10 (Latest)</a>
	
	<a class="dropdown-item" href="../../../7.9">7.9</a>
	
	<a class="dropdown-item" href="../../../7.8">7.8</a>
	
	<a class="dropdown-item" href="../../../7.7">7.7</a>
	
	<a class="dropdown-item" href="../../../7.6">7.6</a>
	
	<a class="dropdown-item" href="../../../7.5">7.5</a>
	
	<a class="dropdown-item" href="../../../7.4">7.4</a>
	
	<a class="dropdown-item" href="../../../7.3">7.3</a>
	
	<a class="dropdown-item" href="../../../7.2">7.2</a>
	
	<a class="dropdown-item" href="../../../7.1">7.1</a>
	
	<a class="dropdown-item" href="../../../7.0">7.0</a>
	
	<a class="dropdown-item" href="../../../legacy">Legacy</a>
	
</div>
</li>
      </ul>
  </div>
  <div class="navbar-nav d-none d-lg-block">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="../../../offline-search-index.2c561d229e7e62c366021cd68bc64eb6.json"
    data-offline-search-base-href="../../../"
    data-offline-search-max-results="50"
  >
</div>

  </div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This is the multi-page printable view of this section.
<a href="#" onclick="print();return false;">Click here to print</a>.
</p><p>
<a href="../../../releases/v07.09/">Return to the regular view of this page</a>.
</p>
</div>



<h1 class="title">Version 7.9</h1>
<div class="lead">Key new features and changes present in v7.9 of Stroom and Stroom-Proxy.</div>




    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-e8f8712a1779312f0cd0c44356349d72">New Features</a></li>


    
  
    
    
	
<li>2: <a href="#pg-c9249fc5c4ed2f3396bba3209b741fb7">Preview Features (experimental)</a></li>


    
  
    
    
	
<li>3: <a href="#pg-25bbffbf87202b6cb0e90e4d92ac7eb8">Breaking Changes</a></li>


    
  
    
    
	
<li>4: <a href="#pg-8174de695453ccb970b6a127dac8f49a">Upgrade Notes</a></li>


    
  
    
    
	
<li>5: <a href="#pg-ffbaa4ef82febf249850f2f1ed8fcacf">Change Log</a></li>


    
  

    </ul>


<div class="content">
      
</div>
</div>


  
  
  
  

  
  

  
    
    
	
    



<div class="td-content" style="--base-section-num: '1.'; ">
    
  <h1 id="pg-e8f8712a1779312f0cd0c44356349d72">1 - New Features</h1>
    <div class="lead">New features in Stroom version 7.9.</div>
	
</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '2.'; page-break-before: always">
    
  <h1 id="pg-c9249fc5c4ed2f3396bba3209b741fb7">2 - Preview Features (experimental)</h1>
    <div class="lead">Preview features in Stroom version 7.9. Preview features are somewhat experimental in nature and are therefore subject to breaking changes in future releases.</div>
	<h2 id="data-feed-keys">Data Feed Keys</h2>
<p>Data Feed Keys are a new authentication mechanism for data receipt into both Stroom-Proxy and Stroom.
They allow for a set of hashed short life keys to be placed in a directory accessible to Stroom-Proxy/Stroom for receipt requests to be authenticated against.</p>
<p>The following is an example of a Data Feed Key file:</p>
<pre><code class="language-json">{
  &quot;dataFeedKeys&quot; : [ {
    &quot;expiryDateEpochMs&quot; : 1744279266584,
    &quot;hash&quot; : &quot;4KP8qRFigfKHAMQgWVHCvgXtf293wsETMwWbaUJcgC2JSqP6qF1YHacyUe8C7CrAAa&quot;,
    &quot;hashAlgorithmId&quot; : &quot;000&quot;,
    &quot;streamMetaData&quot; : {
      &quot;AccountId&quot; : &quot;1000&quot;,
      &quot;MetaKey2&quot; : &quot;MetaKey2Val-1000&quot;,
      &quot;MetaKey1&quot; : &quot;MetaKey1Val-1000&quot;
    }
  }, {
    &quot;expiryDateEpochMs&quot; : 1744279266584,
    &quot;hash&quot; : &quot;8U7roYFWcj3Ht8cGbAavemQPm2P93xEC9QnvdUCuth4EKmbvEjVM2NWje1bPkKWx7s&quot;,
    &quot;hashAlgorithmId&quot; : &quot;000&quot;,
    &quot;streamMetaData&quot; : {
      &quot;AccountId&quot; : &quot;1001&quot;,
      &quot;MetaKey2&quot; : &quot;MetaKey2Val-1001&quot;,
      &quot;MetaKey1&quot; : &quot;MetaKey1Val-1001&quot;
    }
  }
}
</code></pre>
<p>A file can contain many hashed keys.
One or more files of this format are placed in the directory defined by the Stroom-Proxy/Stroom config property <code>.receive.dataFeedKeysDir</code>.
This allows for generating Data Feed Keys with a life of say 26hrs, adding a new file every day and deleting files older than 2 days.</p>
<p>The file(s) will be read on boot and all hashed keys will be stored in memory for receipt authentication.
Files added to this directory while Stoom-Proxy/Stroom is running will be read and added to the in-memory store of hashed keys.
Files deleted from this directory will result in all entries associated with the file path being removed from the in-memory store of hashed keys.</p>
<p>The <code>accountId</code> is typically an identifier for a client team that may have one or more systems that require one or more Feeds in Stroom.
This JSON key, which identifies the ownership of the Data Feed Key, is configured via the property <code>.receive.dataFeedKeyOwnerMetaKey</code>.</p>
<p>Data Feed Keys have an expiry date after which they will no longer work.
An <code>accountID</code> can have many active Data Feed Keys.
Multiple files can be placed in the directory and all valid keys will be loaded.</p>
<p>The <code>hashAlgorithmId</code> is the identifier for the hash algorithm used to hash the key.
The system creating the hashed data feed keys must use the same hash algorithm and parameters when hashing the key as Stroom will use when it hashes the key used in data receipt to validate them.</p>
<p><code>streamMetaData</code> provides a means to add meta attributes to data received with a Data Feed Key.
The attributes in <code>streamMetaData</code> will overwrite any matching attribute keys in the received data.</p>
<p>Currently the only hash algorithm available for use is Argon2 with an ID of <code>000</code> and the following parameters:</p>
<ul>
<li>Hash length: 48</li>
<li>Iterations: 2</li>
<li>Memory KB: 65536</li>
</ul>
<p>A Data Feed Key takes the following form:</p>
<pre><code class="language-text">sdk_&lt;3 char hash algorithm ID&gt;_&lt;128 char random Base58 string&gt;
</code></pre>
<p>The regular expression pattern for a Data Feed Key is</p>
<pre><code class="language-regex">^sdk_[0-9]{3}_[A-HJ-NP-Za-km-z1-9]{128}$
</code></pre>
<p>Data Feed Keys are used in the same way as API Keys or OAuth2 tokens, i.e. using the Header <code>Authorization: Bearer &lt;data feed key&gt;</code>.</p>
<h2 id="content-auto-generation">Content Auto-Generation</h2>
<p>In an effort to streamline the process of getting client systems to send data to Stroom we have added auto-generation of content and removed the need to supply a feed name.
The aim is that client systems can provide a number of mandatory headers with their data that will then be used to auto-generate a feed name, create the feed and create content from a template to process that feed&rsquo;s data.</p>

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Note</h4>


    This feature is optional and controlled with configuration.
If not enabled, the Feed header will be mandatory as before.

</div>


<p>The default Stroom configuration for controlling Data Feed Keys, auto content creation and feed name generation is:</p>
<pre><code class="language-yaml">appConfig:

  autoContentCreation:
    additionalGroupTemplate: &quot;grp-${accountid}-sandbox&quot;
    createAsSubjectId: &quot;Administrators&quot;
    createAsType: &quot;GROUP&quot;
    destinationExplorerPathTemplate: &quot;/Feeds/${accountid}&quot;
    enabled: false
    groupTemplate: &quot;grp-${accountid}&quot;
    templateMatchFields:
    - &quot;accountid&quot;
    - &quot;accountname&quot;
    - &quot;component&quot;
    - &quot;feed&quot;
    - &quot;format&quot;
    - &quot;schema&quot;
    - &quot;schemaversion&quot;

  receive: # applicable to both appConfig: and proxyConfig:
    allowedCertificateProviders: []
    authenticatedDataFeedKeyCache:
      #...
    authenticationRequired: true
    dataFeedKeyOwnerMetaKey: &quot;AccountId&quot;
    dataFeedKeysDir: &quot;data_feed_keys&quot;
    enabledAuthenticationTypes: # Also DATA_FEED_KEY and TOKEN
    - &quot;CERTIFICATE&quot;
    feedNameGenerationEnabled: false
    feedNameGenerationMandatoryHeaders:
    - &quot;AccountId&quot;
    - &quot;Component&quot;
    - &quot;Format&quot;
    - &quot;Schema&quot;
    feedNameTemplate: &quot;${accountid}-${component}-${format}-${schema}&quot;
    metaTypes:
      # ...
</code></pre>
<h3 id="feed-name-generation">Feed Name Generation</h3>
<p>When the property <code>.receive.feedNameGenerationEnabled</code> is set to <code>true</code>, the <code>Feed</code> header is no longer required.
When data is supplied without the <code>Feed</code> header, the meta keys specified in <code>.receive.feedNameGenerationMandatoryHeaders</code> become mandatory.
The property <code>.receive.feedNameTemplate</code> is used to control the format of the generated Feed name.
The template uses values from the headers, so should be configured in tandem with <code>.receive.feedNameGenerationMandatoryHeaders</code>.
If the template parameter is not in the headers, then it will be replaced with nothing.</p>
<p>If enabled, Feed name generation happens on data receipt in both Stroom-Proxy and Stroom.</p>
<h3 id="feed-and-group-creation">Feed and Group Creation</h3>
<p>The <code>.autoContentCreation.enabled</code> property controls whether auto-generation of content will take place on data receipt.
Content auto-generation happens as part of the feed status check, so will either be triggered when Stroom-Proxy requests a feed status check from Stroom or Stroom receives data directly.</p>
<p>If the generated Feed name does not exist then it will be created in the explorer path as defined by the template in <code>.receive.destinationExplorerPathTemplate</code>.
If the Feed name does exist then no further content creation will happen.</p>
<p>One or two user groups will be created and be granted permissions on the created content.
This is to provide user groups for users of the client system to be able to access the data.
The name of these groups is controlled by <code>groupTemplate</code> and <code>additionalGroupTemplate</code> respectively.</p>
<p>The former group only has <code>VIEW</code> permission, while the latter has <code>EDIT</code> permission on the created content.
The latter group is intended for clients to be able to manage the translation of their data while it is going through a take-on-work style process.</p>
<p>If the <code>/datafeed</code> request was authenticated (e.g. using a token, certificate, API key or Data Feed Key) then the identifier of the subject will be set in the <code>UploadUserId</code> header.
It will also ensure that a user exists in Stroom for this identity and that the user is added to the two groups created above.</p>
<h3 id="content-templates">Content Templates</h3>
<p>In Stroom a new Content Templates screen has been added, accessible from the menu.</p>





  <div class="stroom-theme-dark stroom-menu">
    
    

      

      
      


      

  
  
  <div class="stroom-menu-item-background" style="margin-top: 0px;">
    
    <div class="stroom-menu-item " >

      <div class="stroom-menu-item-text">Administration
      </div>
        <div class="stroom-menu-item-arrow">
          <span class="stroom-icon inline-svg-button icon-button  " >
    <span class="face" title="Arrow right"><svg xmlns="http://www.w3.org/2000/svg" width="1427.7665" height="1427.7665" viewBox="0 0 1427.7665 1427.7665"><g style="stroke:currentColor;stroke-width:167.567"><path d="m 415.05387,83.70929 c -39.92654,0.4303 -75.41463,48.3887 -40.0468,81.9121 C 567.552,348.69899 760.75555,531.15431 953.73208,713.82391 760.75555,896.49341 567.552,1078.9486 375.00707,1262.0262 c -46.19471,43.7855 28.48812,112.1966 76.0571,67.1681 195.93558,-185.823 392.95261,-370.82479 587.98693,-557.52749 5.6117,-4.8034 10.4633,-10.2473 14.4855,-16.1231 9.643,-12.4844 13.9638,-27.0796 13.6909,-41.7198 0.2729,-14.6402 -4.0479,-29.2354 -13.6909,-41.7198 -4.0222,-5.8758 -8.8738,-11.3198 -14.4855,-16.1231 C 844.01678,469.27821 646.99975,284.27629 451.06417,98.45319 439.91519,87.89979 427.27628,83.57749 415.05387,83.70929 Z"/></g></svg> </span>
  </span>
        </div>
    </div>
  </div>

      

      
      
        
      


      

  
  
  <div class="stroom-menu-item-background" style="margin-top: 7px;">
    
    <div class="stroom-menu-item stroom-menu-item-leaf" >
        <div class="stroom-menu-item-icon">
          <span class="stroom-icon inline-svg-button icon-button  " >
    <span class="face" title="Stamp"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path style="fill:currentColor" d="m 302.83409,210.6713 c 0,-14.55202 7.69416,-27.76592 16.64281,-39.30718 10.53767,-13.63206 16.81009,-30.69304 16.81009,-49.17578 0,-44.325112 -35.96188,-80.286995 -80.287,-80.286995 -44.32511,0 -80.28699,35.961883 -80.28699,80.286995 0,18.48274 6.27242,35.54372 16.81009,49.17578 8.94865,11.54126 16.64282,24.75516 16.64282,39.30718 0,25.00605 -20.32264,45.32869 -45.3287,45.32869 h -28.2677 c -51.768389,0 -93.668165,41.89978 -93.668165,93.66818 0,17.47914 11.206726,32.36569 26.762332,37.88541 v 42.40157 c 0,22.16256 17.980942,40.1435 40.143503,40.1435 h 294.38564 c 22.16256,0 40.1435,-17.98093 40.1435,-40.1435 v -42.40157 c 15.55561,-5.51972 26.76233,-20.40627 26.76233,-37.88541 C 470.09865,297.89977 428.19887,256 376.43049,256 h -28.26772 c -25.00605,0 -45.32868,-20.32265 -45.32868,-45.3287 z m 86.97757,179.14035 v 26.76234 H 122.18834 v -26.76234 z"/></svg> </span>
  </span>
        </div>

      <div class="stroom-menu-item-text">Content Templates
      </div>
    </div>
  </div>
  </div>










  
  
  
  
  







  
  



<div class="card rounded shadow-stroom p-2 td-post-card mb-4 mt-4" style="max-width: 910px">

  <a title="images/releases/07.09/ContentTemplates.png" href="../../../images/releases/07.09/ContentTemplates.png">
    <figure style="margin-block-end: 0px" >
      
      <img class="card-img-top" src="../../../images/releases/07.09/ContentTemplates.png" style="max-width:900" alt="images/releases/07.09/ContentTemplates.png">
      

      
      <div class="card-body px-0 pt-2 pb-0">
        <hr style="border-top: 1px solid #ddd; margin-top: 0px; margin-bottom:4px;">
        <figcaption class="card-text" style="font-size: smaller; text-align: center;">The Content Templates screen</figcaption>
      </div>
      
    </figure>
  </a>
</div>

<p>This screen allows a user with the <code>Manage Content Templates</code> application permission to create a number of content templates.
Each template has an expression that will be used to match on the headers when auto-generation of content has been triggered.
The template expressions are evaluated in order from the top.</p>
<p>If a template&rsquo;s expression matches, content will be created according to the template.
A template currently has two modes:</p>
<ul>
<li><code>INHERIT_PIPELINE</code> - A new pipeline will be created that inherits from the existing pipeline specified in the template.
The new pipeline will be created in the folder defined by <code>.receive.destinationExplorerPathTemplate</code>.</li>
<li><code>PROCESSOR_FILTER</code> - A new processor filter will be added to the existing pipeline specified in the template.</li>
</ul>

</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '3.'; page-break-before: always">
    
  <h1 id="pg-25bbffbf87202b6cb0e90e4d92ac7eb8">3 - Breaking Changes</h1>
    <div class="lead">Changes in Stroom version 7.9 that may break existing processing or ways of working.</div>
	
<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Warning</h4>

    Please read this section carefully in case any of the changes affect you.

</div>


<h2 id="stroom">Stroom</h2>
<h3 id="feed-status-check">Feed Status Check</h3>
<p>If any proxy instances call into Stroom to make a feed status check using an API key, then the owner of those API keys will now need to be granted the <code>Check Receipt Status</code> application permission.</p>
<h2 id="stroom-proxy">Stroom-Proxy</h2>

</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '4.'; page-break-before: always">
    
  <h1 id="pg-8174de695453ccb970b6a127dac8f49a">4 - Upgrade Notes</h1>
    <div class="lead">Required actions and information relating to upgrading to Stroom version 7.9.</div>
	
<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Warning</h4>

    Please read this section carefully in case any of it is relevant to your Stroom instance.

</div>


<h2 id="java-version">Java Version</h2>
<p>Stroom v7.9 requires Java 21.
This is the same java version as Stroom v7.8.
Ensure the Stroom and Stroom-Proxy hosts are running the latest patch release of Java v21.</p>
<h2 id="configuration-file-changes">Configuration File Changes</h2>
<!--
Check changes using something like this:
old_ver=7.6
new_ver=7.7
git diff origin/${old_ver}..origin/${new_ver} stroom-config/stroom-config-app/src/test/resources/stroom/config/app/expected.yaml
git diff origin/${old_ver}..origin/${new_ver} stroom-proxy/stroom-proxy-app/src/test/resources/stroom/dist/proxy-expected.yaml
-->
<h3 id="strooms-configyml">Stroom&rsquo;s <code>config.yml</code></h3>
<h4 id="cache-config">Cache Config</h4>
<p>A new property <code>statisticsMode</code> has been added to the standard cache config structure as used by all caches.
This controls whether and how cache statistics should be record.
Possible values are:</p>
<ul>
<li><code>NONE</code> - Do not capture any statistics on cache usage.
This means no statistics will be available for this cache in the Stroom UI.
Capturing statistics has a minor performance penalty.</li>
<li><code>INTERNAL</code> - Uses the internal mechanism for capturing statistics.
This is only suitable for Stroom as these can be viewed through the UI.</li>
<li><code>DROPWIZARD_METRICS</code> - Uses Dropwizard Metrics for capturing statistics.
This allows the cache stats to be accessed via tools such as Graphite/Collectd in addition to the Stroom UI.
This adds a very slight performance overhead over <code>INTERNAL</code>.
This is suitable for both Stroom and Stroom-Proxy.</li>
</ul>
<h4 id="annotations">Annotations</h4>
<p>The following standard cache configuration blocks have been added for annotations, along with retention configuration.</p>
<pre><code class="language-yaml">appConfig:
  annotation:
    annotationFeedCache:
      expireAfterAccess: &quot;PT10M&quot;
      expireAfterWrite: null
      maximumSize: 1000
      refreshAfterWrite: null
      statisticsMode: &quot;INTERNAL&quot;
    annotationTagCache:
      expireAfterAccess: &quot;PT10M&quot;
      expireAfterWrite: null
      maximumSize: 1000
      refreshAfterWrite: null
      statisticsMode: &quot;INTERNAL&quot;
    defaultRetentionPeriod: &quot;5y&quot;
    physicalDeleteAge: &quot;P7D&quot;
</code></pre>
<h4 id="content-auto-generation">Content Auto-Generation</h4>
<p>A new branch <code>autoContentCreation</code> has been added for content auto-generation, <a href="../../../releases/v07.09/preview-features/#content-auto-generation">see</a></p>
<pre><code class="language-yaml">appConfig:
  autoContentCreation:
    additionalGroupTemplate: &quot;grp-${accountid}-sandbox&quot;
    createAsSubjectId: &quot;Administrators&quot;
    createAsType: &quot;GROUP&quot;
    destinationExplorerPathTemplate: &quot;/Feeds/${accountid}&quot;
    enabled: false
    groupTemplate: &quot;grp-${accountid}&quot;
    templateMatchFields:
    - &quot;accountid&quot;
    - &quot;accountname&quot;
    - &quot;component&quot;
    - &quot;feed&quot;
    - &quot;format&quot;
    - &quot;schema&quot;
    - &quot;schemaversion&quot;
</code></pre>
<h4 id="data-formats">Data Formats</h4>
<p>A new property has been added to control the list of data format names that can be assigned to a feed.
The property must include at least the values below.</p>
<pre><code class="language-yaml">appConfig:
  data:
    meta:
      dataFormats:
      - &quot;FIXED_WIDTH_NO_HEADER&quot;
      - &quot;INI&quot;
      - &quot;CSV&quot;
      - &quot;JSON&quot;
      - &quot;TEXT&quot;
      - &quot;XML_FRAGMENT&quot;
      - &quot;YAML&quot;
      - &quot;PSV_NO_HEADER&quot;
      - &quot;PSV&quot;
      - &quot;CSV_NO_HEADER&quot;
      - &quot;XML&quot;
      - &quot;TSV&quot;
      - &quot;SYSLOG&quot;
      - &quot;TSV_NO_HEADER&quot;
      - &quot;FIXED_WIDTH&quot;
      - &quot;TOML&quot;
</code></pre>
<h4 id="data-receipt">Data Receipt</h4>
<p>The following properties have been added.</p>
<pre><code class="language-yaml">appConfig:
  receive:
    allowedCertificateProviders: []
    authenticatedDataFeedKeyCache:
      expireAfterAccess: null
      expireAfterWrite: &quot;PT5M&quot;
      maximumSize: 1000
      refreshAfterWrite: null
      statisticsMode: &quot;DROPWIZARD_METRICS&quot;
    authenticationRequired: true
    dataFeedKeyOwnerMetaKey: &quot;AccountId&quot;
    dataFeedKeysDir: &quot;data_feed_keys&quot;
    enabledAuthenticationTypes:
    - &quot;CERTIFICATE&quot;
    - &quot;TOKEN&quot;
    - &quot;DATA_FEED_KEY&quot;
    feedNameGenerationEnabled: false
    feedNameGenerationMandatoryHeaders:
    - &quot;AccountId&quot;
    - &quot;Component&quot;
    - &quot;Format&quot;
    - &quot;Schema&quot;
    feedNameTemplate: &quot;${accountid}-${component}-${format}-${schema}&quot;
    x509CertificateDnHeader: &quot;X-SSL-CLIENT-S-DN&quot;
    x509CertificateHeader: &quot;X-SSL-CERT&quot;
</code></pre>
<p>The following properties have been removed.</p>
<pre><code class="language-yaml">appConfig:
  receive:
    tokenAuthenticationEnabled: false
    certificateAuthenticationEnabled: true
</code></pre>
<h4 id="content-security-policy">Content Security Policy</h4>
<p>The default value for the <code>contentSecurityPolicy</code> property has changed from this:</p>
<pre><code class="language-yaml">appConfig:
  security:
    webContent:
      contentSecurityPolicy: &quot;default-src 'self'; script-src 'self' 'unsafe-eval'\
        \ 'unsafe-inline'; img-src 'self' data:; style-src 'self' 'unsafe-inline';\
        \ connect-src 'self' wss:; frame-ancestors 'self';&quot;
</code></pre>
<p>To this:</p>
<pre><code class="language-yaml">appConfig:
  security:
    webContent:
      contentSecurityPolicy: &quot;default-src 'self'; script-src 'self' 'unsafe-eval'\
        \ 'unsafe-inline'; img-src 'self' data:; style-src 'self' 'unsafe-inline';\
        \ frame-ancestors 'self';&quot;
</code></pre>
<h3 id="stroom-proxys-configyml">Stroom-Proxy&rsquo;s <code>config.yml</code></h3>
<h4 id="cache-config-1">Cache Config</h4>
<p>A new property <code>statisticsMode</code> has been added to the standard cache config structure as used by all caches.
This controls whether and how cache statistics should be record.
Possible values are:</p>
<ul>
<li><code>NONE</code> - Do not capture any statistics on cache usage.
This means no statistics will be available for this cache in the Stroom UI.
Capturing statistics has a minor performance penalty.</li>
<li><code>DROPWIZARD_METRICS</code> - Uses Dropwizard Metrics for capturing statistics.
This allows the cache stats to be accessed via tools such as Graphite/Collectd in addition to the Stroom UI.
This adds a very slight performance overhead over <code>INTERNAL</code>.
This is suitable for both Stroom and Stroom-Proxy.</li>
</ul>
<h4 id="aggregation">Aggregation</h4>
<p>The default aggregation frequency has changed from <code>PT1M</code> to <code>PT10M</code>.</p>
<pre><code class="language-yaml">proxyConfig:
  aggregator:
    aggregationFrequency: &quot;PT10M&quot;
</code></pre>
<p>The property <code>maxOpenFiles</code> has been replaced with a standard cache configuration branch.</p>
<pre><code class="language-yaml">proxyConfig:
  aggregator:
    openFilesCache:
      expireAfterAccess: null
      expireAfterWrite: null
      maximumSize: 100
      refreshAfterWrite: null
      statisticsMode: &quot;DROPWIZARD_METRICS&quot;
</code></pre>
<h4 id="data-receipt-1">Data Receipt</h4>
<p>Proxy uses the same data receipt config structure as Stroom, so see <a href="#data-receipt">above</a> for details of the changes.</p>
<h2 id="database-migrations">Database Migrations</h2>
<p>When Stroom boots for the first time with a new version it will run any required database migrations to bring the database schema up to the correct version.</p>

<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Warning</h4>

    It is highly recommended to ensure you have a database backup in place before booting stroom with a new version.
This is to mitigate against any problems with the migration.
It is also recommended to test the migration against a copy of your database to ensure that there are no problems when you do it for real.

</div>


<p>On boot, Stroom will ensure that the migrations are only run by a single node in the cluster.
This will be the node that reaches that point in the boot process first.
All other nodes will wait until that is complete before proceeding with the boot process.</p>
<p>It is recommended however to use a single node to execute the migration.
To avoid Stroom starting up and beginning processing you can use the <code>migrage</code> command to just migrate the database and not fully boot Stroom.
See <a href="../../../docs/user-guide/tools/command-line/#migrate"><code>migrage</code> command</a> for more details.</p>
<!-- 
Run stroom.db.migration.TestListDbMigrations.listDbMigrationsForLatestVersion() to generate the content for
this section
-->
<h3 id="migration-scripts">Migration Scripts</h3>
<!--
#############################################################################################
#                                                                                           #
#  This section is auto-generated by TestListDbMigrations.listDbMigrationsForLatestVersion  #
#                                                                                           #
#############################################################################################
-->
<p>For information purposes only, the following are the database migrations that will be run when upgrading to 7.9.0 from the previous minor version.</p>
<p>Note, the <code>legacy</code> module will run first (if present) then the other module will run in no particular order.</p>
<h4 id="module-stroom-annotation">Module <code>stroom-annotation</code></h4>
<h5 id="script-v07_09_00_001__annotation2sql">Script <code>V07_09_00_001__annotation2.sql</code></h5>
<p><strong>Path</strong>: <code>stroom-annotation/stroom-annotation-impl-db/src/main/resources/stroom/annotation/impl/db/migration/V07_09_00_001__annotation2.sql</code></p>
<pre><code class="language-sql">-- ------------------------------------------------------------------------
-- Copyright 2023 Crown Copyright
--
-- Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
-- you may not use this file except in compliance with the License.
-- You may obtain a copy of the License at
--
--     http://www.apache.org/licenses/LICENSE-2.0
--
-- Unless required by applicable law or agreed to in writing, software
-- distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
-- WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-- See the License for the specific language governing permissions and
-- limitations under the License.
-- ------------------------------------------------------------------------

-- Stop NOTE level warnings about objects (not)? existing
SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0;

CREATE TABLE IF NOT EXISTS annotation_tag (
  id                    int(11) NOT NULL AUTO_INCREMENT,
  uuid                  varchar(255) NOT NULL,
  type_id               tinyint NOT NULL,
  name                  varchar(255) NOT NULL,
  style_id              tinyint DEFAULT NULL,
  deleted               tinyint NOT NULL DEFAULT '0',
  PRIMARY KEY           (id),
  UNIQUE KEY            `annotation_tag_type_id_name_idx` (`type_id`, `name`),
  UNIQUE KEY            `annotation_tag_uuid_idx` (`uuid`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE IF NOT EXISTS annotation_tag_link (
  id                    bigint(20) NOT NULL AUTO_INCREMENT,
  fk_annotation_id      bigint(20) NOT NULL,
  fk_annotation_tag_id  int(11) NOT NULL,
  PRIMARY KEY           (id),
  UNIQUE KEY            fk_annotation_id_fk_annotation_tag_id (fk_annotation_id, fk_annotation_tag_id),
  CONSTRAINT            annotation_tag_link_fk_annotation_id FOREIGN KEY (fk_annotation_id) REFERENCES annotation (id),
  CONSTRAINT            annotation_tag_link_fk_annotation_tag_id FOREIGN KEY (fk_annotation_tag_id) REFERENCES annotation_tag (id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE IF NOT EXISTS annotation_link (
  id                    bigint(20) NOT NULL AUTO_INCREMENT,
  fk_annotation_src_id  bigint(20) NOT NULL,
  fk_annotation_dst_id  bigint(20) NOT NULL,
  PRIMARY KEY           (id),
  UNIQUE KEY            fk_annotation_src_id_fk_annotation_dst_id (fk_annotation_src_id, fk_annotation_dst_id),
  CONSTRAINT            annotation_link_fk_annotation_src_id FOREIGN KEY (fk_annotation_src_id) REFERENCES annotation (id),
  CONSTRAINT            annotation_link_fk_annotation_dst_id FOREIGN KEY (fk_annotation_dst_id) REFERENCES annotation (id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE IF NOT EXISTS annotation_subscription (
  id                    bigint(20) NOT NULL AUTO_INCREMENT,
  fk_annotation_id      bigint(20) NOT NULL,
  user_uuid             varchar(255) NOT NULL,
  PRIMARY KEY           (id),
  UNIQUE KEY            fk_annotation_id_user_uuid (fk_annotation_id, user_uuid),
  CONSTRAINT            annotation_subscription_fk_annotation_id FOREIGN KEY (fk_annotation_id) REFERENCES annotation (id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE IF NOT EXISTS `annotation_feed` (
  `id` int NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `annotation_feed_name` (`name`)
) ENGINE=InnoDB DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci;

DROP PROCEDURE IF EXISTS V07_09_00_001_annotation;

DELIMITER $$

CREATE PROCEDURE V07_09_00_001_annotation ()
BEGIN
    DECLARE object_count integer;

    --
    -- Add logical delete
    --
    SELECT COUNT(1)
    INTO object_count
    FROM information_schema.columns
    WHERE table_schema = database()
    AND table_name = 'annotation'
    AND column_name = 'deleted';

    IF object_count = 0 THEN
        ALTER TABLE `annotation` ADD COLUMN `deleted` tinyint NOT NULL DEFAULT '0';
    END IF;

    --
    -- Add description
    --
    SELECT COUNT(1)
    INTO object_count
    FROM information_schema.columns
    WHERE table_schema = database()
    AND table_name = 'annotation'
    AND column_name = 'description';

    IF object_count = 0 THEN
        ALTER TABLE `annotation`
        ADD COLUMN `description` longtext;
    END IF;

    --
    -- Add data retention time
    --
    SELECT COUNT(1)
    INTO object_count
    FROM information_schema.columns
    WHERE table_schema = database()
    AND table_name = 'annotation'
    AND column_name = 'retention_time';

    IF object_count = 0 THEN
        ALTER TABLE `annotation` ADD COLUMN `retention_time` bigint(20) DEFAULT NULL;
    END IF;

    --
    -- Add data retention unit
    --
    SELECT COUNT(1)
    INTO object_count
    FROM information_schema.columns
    WHERE table_schema = database()
    AND table_name = 'annotation'
    AND column_name = 'retention_unit';

    IF object_count = 0 THEN
        ALTER TABLE `annotation` ADD COLUMN `retention_unit` tinyint DEFAULT NULL;
    END IF;

    --
    -- Add data retention until
    --
    SELECT COUNT(1)
    INTO object_count
    FROM information_schema.columns
    WHERE table_schema = database()
    AND table_name = 'annotation'
    AND column_name = 'retain_until_ms';

    IF object_count = 0 THEN
        ALTER TABLE `annotation`
        ADD COLUMN `retain_until_ms` bigint DEFAULT NULL;
    END IF;

    --
    -- Add parent id
    --
    SELECT COUNT(1)
    INTO object_count
    FROM information_schema.columns
    WHERE table_schema = database()
    AND table_name = 'annotation'
    AND column_name = 'parent_id';

    IF object_count = 0 THEN
        ALTER TABLE `annotation`
        ADD COLUMN `parent_id` bigint(20) DEFAULT NULL;
    END IF;

    --
    -- Add entry type id
    --
    SELECT COUNT(1)
    INTO object_count
    FROM information_schema.columns
    WHERE table_schema = database()
    AND table_name = 'annotation_entry'
    AND column_name = 'type_id';

    IF object_count = 0 THEN
        ALTER TABLE annotation_entry ADD COLUMN type_id tinyint NOT NULL;
        UPDATE annotation_entry SET type_id = 0 WHERE type = &quot;Title&quot;;
        UPDATE annotation_entry SET type_id = 1 WHERE type = &quot;Subject&quot;;
        UPDATE annotation_entry SET type_id = 2 WHERE type = &quot;Status&quot;;
        UPDATE annotation_entry SET type_id = 3 WHERE type = &quot;Assigned&quot;;
        UPDATE annotation_entry SET type_id = 4 WHERE type = &quot;Comment&quot;;
        UPDATE annotation_entry SET type_id = 5 WHERE type = &quot;Link&quot;;
        UPDATE annotation_entry SET type_id = 6 WHERE type = &quot;Unlink&quot;;
        ALTER TABLE annotation_entry DROP COLUMN type;
    END IF;

    --
    -- Add entry logical delete
    --
    SELECT COUNT(1)
    INTO object_count
    FROM information_schema.columns
    WHERE table_schema = database()
    AND table_name = 'annotation_entry'
    AND column_name = 'deleted';

    IF object_count = 0 THEN
        ALTER TABLE `annotation_entry` ADD COLUMN `deleted` tinyint NOT NULL DEFAULT '0';
    END IF;

    --
    -- Remove status
    --
    SELECT COUNT(1)
    INTO object_count
    FROM information_schema.columns
    WHERE table_schema = database()
    AND table_name = 'annotation'
    AND column_name = 'status';

    IF object_count &gt; 0 THEN
        INSERT INTO annotation_tag (uuid, type_id, name, style_id, deleted)
        SELECT uuid(), 0, status, null, 0
        FROM annotation
        WHERE status NOT IN (SELECT name FROM annotation_tag WHERE type_id = 0)
        GROUP BY status;

        INSERT INTO annotation_tag_link (fk_annotation_id, fk_annotation_tag_id)
        SELECT a.id, at.id
        FROM annotation a
        JOIN annotation_tag at ON (a.status = at.name AND at.type_id = 0)
        WHERE a.id NOT IN (SELECT fk_annotation_id FROM annotation_tag_link);

        ALTER TABLE `annotation` DROP COLUMN `status`;
    END IF;

    --
    -- Remove comment
    --
    SELECT COUNT(1)
    INTO object_count
    FROM information_schema.columns
    WHERE table_schema = database()
    AND table_name = 'annotation'
    AND column_name = 'comment';

    IF object_count &gt; 0 THEN
        ALTER TABLE `annotation` DROP COLUMN `comment`;
    END IF;

    --
    -- Remove history
    --
    SELECT COUNT(1)
    INTO object_count
    FROM information_schema.columns
    WHERE table_schema = database()
    AND table_name = 'annotation'
    AND column_name = 'history';

    IF object_count &gt; 0 THEN
        ALTER TABLE `annotation` DROP COLUMN `history`;
    END IF;

    --
    -- Add feed
    --
    SELECT COUNT(1)
    INTO object_count
    FROM information_schema.columns
    WHERE table_schema = database()
    AND table_name = 'annotation_data_link'
    AND column_name = 'feed_id';

    IF object_count = 0 THEN
        ALTER TABLE `annotation_data_link` ADD COLUMN `feed_id` int DEFAULT NULL;
    END IF;

END $$

DELIMITER ;

CALL V07_09_00_001_annotation;

DROP PROCEDURE IF EXISTS V07_09_00_001_annotation;

SET SQL_NOTES=@OLD_SQL_NOTES;

-- vim: set shiftwidth=4 tabstop=4 expandtab:

</code></pre>

</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '5.'; page-break-before: always">
    
  <h1 id="pg-ffbaa4ef82febf249850f2f1ed8fcacf">5 - Change Log</h1>
    <div class="lead">Full list of changes in this release.</div>
	<!--
To build this list run diff_changelog.sh in the root of the stroom repo.
E.g. ./diff_changelog.sh 7.4 7.5 | sed -E -e 's/^/\n/' -e 's|Issue \*\*#([0-9]+)\*\*|Issue **







  
  

<span class="external-link">
  <a href="https://github.com/gchq/stroom/issues/%5c1" target="_blank" class="" style="" title="#\1 (external link to https://github.com/gchq/stroom/issues/\1)">
    <span>#\1</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
**|g'
-->
<ul>
<li>
<p>Fix primitive value conversion of query field types.</p>
</li>
<li>
<p>Issue <strong>







  
  

<span class="external-link">
  <a href="https://github.com/gchq/stroom/issues/4940" target="_blank" class="" style="" title="#4940 (external link to https://github.com/gchq/stroom/issues/4940)">
    <span>#4940</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
</strong> : Fix duplicate store error log.</p>
</li>
<li>
<p>Issue <strong>







  
  

<span class="external-link">
  <a href="https://github.com/gchq/stroom/issues/4941" target="_blank" class="" style="" title="#4941 (external link to https://github.com/gchq/stroom/issues/4941)">
    <span>#4941</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
</strong> : Fix annotation data retention.</p>
</li>
<li>
<p>Issue <strong>







  
  

<span class="external-link">
  <a href="https://github.com/gchq/stroom/issues/4968" target="_blank" class="" style="" title="#4968 (external link to https://github.com/gchq/stroom/issues/4968)">
    <span>#4968</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
</strong> : Improve Plan B file receipt.</p>
</li>
<li>
<p>Issue <strong>







  
  

<span class="external-link">
  <a href="https://github.com/gchq/stroom/issues/4956" target="_blank" class="" style="" title="#4956 (external link to https://github.com/gchq/stroom/issues/4956)">
    <span>#4956</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
</strong> : Add error handling to duplicate check deletion.</p>
</li>
<li>
<p>Issue <strong>







  
  

<span class="external-link">
  <a href="https://github.com/gchq/stroom/issues/4967" target="_blank" class="" style="" title="#4967 (external link to https://github.com/gchq/stroom/issues/4967)">
    <span>#4967</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
</strong> : Fix SQL deadlock.</p>
</li>
<li>
<p>Fix compile issues.</p>
</li>
<li>
<p>Issue <strong>







  
  

<span class="external-link">
  <a href="https://github.com/gchq/stroom/issues/4875" target="_blank" class="" style="" title="#4875 (external link to https://github.com/gchq/stroom/issues/4875)">
    <span>#4875</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
</strong> : Fix select *.</p>
</li>
<li>
<p>Issue <strong>







  
  

<span class="external-link">
  <a href="https://github.com/gchq/stroom/issues/3928" target="_blank" class="" style="" title="#3928 (external link to https://github.com/gchq/stroom/issues/3928)">
    <span>#3928</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
</strong> : Add merge filter for deeply nested data.</p>
</li>
<li>
<p>Issue <strong>







  
  

<span class="external-link">
  <a href="https://github.com/gchq/stroom/issues/4211" target="_blank" class="" style="" title="#4211 (external link to https://github.com/gchq/stroom/issues/4211)">
    <span>#4211</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
</strong> : Prevent stream status in processing filters.</p>
</li>
<li>
<p>Issue <strong>







  
  

<span class="external-link">
  <a href="https://github.com/gchq/stroom/issues/4927" target="_blank" class="" style="" title="#4927 (external link to https://github.com/gchq/stroom/issues/4927)">
    <span>#4927</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
</strong> : Fix TOKEN data feed auth when DATA_FEED_KEY is enabled.</p>
</li>
<li>
<p>Issue <strong>







  
  

<span class="external-link">
  <a href="https://github.com/gchq/stroom/issues/4862" target="_blank" class="" style="" title="#4862 (external link to https://github.com/gchq/stroom/issues/4862)">
    <span>#4862</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
</strong> : Add select * to StroomQL.</p>
</li>
<li>
<p>Annotations 2.0.</p>
</li>
<li>
<p>Uplift BCrypt lib to 0.4.3.</p>
</li>
<li>
<p>Add BCrypt as a hashing algorithm to data feed keys. Change Data feed key auth to require the header as configured by <code>dataFeedKeyOwnerMetaKey</code>. Change <code>hashAlgorithmId</code> to <code>hashAlgorithm</code> in the data feed keys json file.</p>
</li>
<li>
<p>Issue <strong>







  
  

<span class="external-link">
  <a href="https://github.com/gchq/stroom/issues/4109" target="_blank" class="" style="" title="#4109 (external link to https://github.com/gchq/stroom/issues/4109)">
    <span>#4109</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
</strong> : Add <code>receive</code> config properties <code>x509CertificateHeader</code>, <code>x509CertificateDnHeader</code> and <code>allowedCertificateProviders</code> to control the use of certificates and DNs placed in the request headers by load balancers or reverse proxies that are doing the TLS termination. Header keys were previously hard coded. <code>allowedCertificateProviders</code> is an allow list of FQDN/IPs that are allowed to use the cert/DN headers.</p>
</li>
<li>
<p>Add Dropwizard Metrics to proxy.</p>
</li>
<li>
<p>Change proxy to use the same caching as stroom.</p>
</li>
<li>
<p>Remove unused proxy config property <code>maxAggregateAge</code>. <code>aggregationFrequency</code> controls the aggregation age/frequency.</p>
</li>
<li>
<p>Stroom-Proxy instances that are making remote feed status requests using an API key or token, will now need to hold the application permission <code>Check Receipt Status</code> in Stroom. This prevents anybody with an API key from checking feed statuses.</p>
</li>
<li>
<p>Issue <strong>







  
  

<span class="external-link">
  <a href="https://github.com/gchq/stroom/issues/4312" target="_blank" class="" style="" title="#4312 (external link to https://github.com/gchq/stroom/issues/4312)">
    <span>#4312</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
</strong> : Add Data Feed Keys to proxy and stroom to allow their use in data receipt authentication. Replace <code>proxyConfig.receive.(certificateAuthenticationEnabled|tokenAuthenticationEnabled)</code> with <code>proxyConfig.receive.enabledAuthenticationTypes</code> that takes values: <code>DATA_FEED_KEY|TOKEN|CERTIFICATE</code> (where <code>TOKEN</code> means an oauth token or an API key). The feed status check endpoint <code>/api/feedStatus/v1</code> has been deprecated. Proxies with a version &gt;=v7.9 should now use <code>/api/feedStatus/v2</code>.</p>
</li>
<li>
<p>Replace proxy config prop <code>proxyConfig.eventStore.maxOpenFiles</code> with <code>proxyConfig.eventStore.openFilesCache</code>.</p>
</li>
<li>
<p>Add optional auto-generation of the <code>Feed</code> attribute using property <code>proxyConfig.receive.feedNameGenerationEnabled</code>. This is used alongside properties <code>proxyConfig.receive.feedNameTemplate</code> (which defines a template for the auto-generated feed name using meta keys and their values) and <code>feedNameGenerationMandatoryHeaders</code> which defines the mandatory meta headers that must be present for a auto-generation of the feed name to be possible.</p>
</li>
<li>
<p>Add a new <em>Content Templates</em> screen to stroom (requires <code>Manage Content Templates</code> application permission). This screen is used to define rules for matching incoming data where the feed does not exist and creating content to process data for that feed.</p>
</li>
<li>
<p>Feed status check calls made by a proxy into stroom now require the application permission <code>Check Receipt Status</code>. This is to stop anyone with an API key from discovering the feeds available in stroom. Any existing API keys used for feed status checks on proxy will need to have <code>Check Receipt Status</code> granted to the owner of the key.</p>
</li>
<li>
<p>Issue <strong>







  
  

<span class="external-link">
  <a href="https://github.com/gchq/stroom/issues/4839" target="_blank" class="" style="" title="#4839 (external link to https://github.com/gchq/stroom/issues/4839)">
    <span>#4839</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
</strong> : Change record count filter to allow counting of records at a custom depth to match split filter.</p>
</li>
<li>
<p>Issue <strong>







  
  

<span class="external-link">
  <a href="https://github.com/gchq/stroom/issues/4828" target="_blank" class="" style="" title="#4828 (external link to https://github.com/gchq/stroom/issues/4828)">
    <span>#4828</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
</strong> : Fix recursive cache invalidation for index load.</p>
</li>
<li>
<p>Issue <strong>







  
  

<span class="external-link">
  <a href="https://github.com/gchq/stroom/issues/4827" target="_blank" class="" style="" title="#4827 (external link to https://github.com/gchq/stroom/issues/4827)">
    <span>#4827</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
</strong> : Fix NPE when opening the Nodes screen.</p>
</li>
<li>
<p>Issue <strong>







  
  

<span class="external-link">
  <a href="https://github.com/gchq/stroom/issues/4733" target="_blank" class="" style="" title="#4733 (external link to https://github.com/gchq/stroom/issues/4733)">
    <span>#4733</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
</strong> : Fix report shutdown error.</p>
</li>
<li>
<p>Issue <strong>







  
  

<span class="external-link">
  <a href="https://github.com/gchq/stroom/issues/4778" target="_blank" class="" style="" title="#4778 (external link to https://github.com/gchq/stroom/issues/4778)">
    <span>#4778</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
</strong> : Improve menu text rendering.</p>
</li>
<li>
<p>Issue <strong>







  
  

<span class="external-link">
  <a href="https://github.com/gchq/stroom/issues/4552" target="_blank" class="" style="" title="#4552 (external link to https://github.com/gchq/stroom/issues/4552)">
    <span>#4552</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
</strong> : Update dynamic index fields via the UI.</p>
</li>
<li>
<p>Issue <strong>







  
  

<span class="external-link">
  <a href="https://github.com/gchq/stroom/issues/3921" target="_blank" class="" style="" title="#3921 (external link to https://github.com/gchq/stroom/issues/3921)">
    <span>#3921</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
</strong> : Make QuickFilterPredicateFactory produce an expression tree.</p>
</li>
<li>
<p>Issue <strong>







  
  

<span class="external-link">
  <a href="https://github.com/gchq/stroom/issues/3820" target="_blank" class="" style="" title="#3820 (external link to https://github.com/gchq/stroom/issues/3820)">
    <span>#3820</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
</strong> : Add OR conditions to quick filter.</p>
</li>
<li>
<p>Issue <strong>







  
  

<span class="external-link">
  <a href="https://github.com/gchq/stroom/issues/3551" target="_blank" class="" style="" title="#3551 (external link to https://github.com/gchq/stroom/issues/3551)">
    <span>#3551</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
</strong> : Fix character escape in quick filter.</p>
</li>
<li>
<p>Issue <strong>







  
  

<span class="external-link">
  <a href="https://github.com/gchq/stroom/issues/4553" target="_blank" class="" style="" title="#4553 (external link to https://github.com/gchq/stroom/issues/4553)">
    <span>#4553</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
</strong> : Fix word boundary matching.</p>
</li>
<li>
<p>Issue <strong>







  
  

<span class="external-link">
  <a href="https://github.com/gchq/stroom/issues/4776" target="_blank" class="" style="" title="#4776 (external link to https://github.com/gchq/stroom/issues/4776)">
    <span>#4776</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
</strong> : Fix column value <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code>, <code>&lt;=</code>, filtering.</p>
</li>
<li>
<p>Issue <strong>







  
  

<span class="external-link">
  <a href="https://github.com/gchq/stroom/issues/4772" target="_blank" class="" style="" title="#4772 (external link to https://github.com/gchq/stroom/issues/4772)">
    <span>#4772</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
</strong> : Uplift GWT to version 2.12.1.</p>
</li>
<li>
<p>Issue <strong>







  
  

<span class="external-link">
  <a href="https://github.com/gchq/stroom/issues/4773" target="_blank" class="" style="" title="#4773 (external link to https://github.com/gchq/stroom/issues/4773)">
    <span>#4773</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
</strong> : Improve cookie config.</p>
</li>
<li>
<p>Issue <strong>







  
  

<span class="external-link">
  <a href="https://github.com/gchq/stroom/issues/4692" target="_blank" class="" style="" title="#4692 (external link to https://github.com/gchq/stroom/issues/4692)">
    <span>#4692</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
</strong> : Add table column filtering by unique value selection.</p>
</li>
</ul>

</div>




    
	
  



          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/gchq/stroom" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2025 Crown Copyright All Rights Reserved</small>
        
	
      </div>
    </div>
  </div>
</footer>


    </div>
    

<script src='../../../js/popper.min.js'></script>
<script src='../../../js/bootstrap.min.js'></script>






    <script src='../../../js/lunr.min.js'></script>
  


<script src='../../../js/tabpane-persist.js'></script>




















<script src="../../../js/main.min.cbc1d428d83561c4dec32da9374290554119d7483329f849251cb7153b2ecd07.js" integrity="sha256-y8HUKNg1YcTewy2pN0KQVUEZ10gzKfhJJRy3FTsuzQc=" crossorigin="anonymous"></script>



<script src='../../../js/prism.js'></script>



  </body>
</html>
