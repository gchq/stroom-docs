<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.95.0" />
<link rel="canonical" type="text/html" href="../../../../docs/sending-data/example-clients/">
<meta name="robots" content="noindex, nofollow">


<link rel="shortcut icon" href="../../../../favicons/favicon.ico" >
<link rel="apple-touch-icon" href="../../../../favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="../../../../favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="../../../../favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="../../../../favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="../../../../favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="../../../../favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="../../../../favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="../../../../favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="../../../../favicons/android-192x192.png" sizes="192x192">

<title>Example Clients | Stroom</title>
<meta name="description" content="A collection of example client applications for sending data to Stroom or one of its proxies.
">
<meta property="og:title" content="Example Clients" />
<meta property="og:description" content="A collection of example client applications for sending data to Stroom or one of its proxies.
" />
<meta property="og:type" content="website" />
<meta property="og:url" content="/docs/sending-data/example-clients/" /><meta property="og:site_name" content="Stroom" />

<meta itemprop="name" content="Example Clients">
<meta itemprop="description" content="A collection of example client applications for sending data to Stroom or one of its proxies.
"><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Example Clients"/>
<meta name="twitter:description" content="A collection of example client applications for sending data to Stroom or one of its proxies.
"/>




<link rel="preload" href="../../../../scss/main.min.3b6e69e7cc89c8276c76586be0d33ea26f06759dc5e79fb60f3d7487f7dc87bd.css" as="style">
<link href="../../../../scss/main.min.3b6e69e7cc89c8276c76586be0d33ea26f06759dc5e79fb60f3d7487f7dc87bd.css" rel="stylesheet" integrity="">


<script src='../../../../js/jquery-3.6.0.min.js'></script>


<script src='../../../../js/lunr.min.js'></script>
  
<link rel="stylesheet" href="../../../../css/prism.css"/>
<link rel="stylesheet" href="../../../../css/stroom-ui/icon-colours.css"/>
<link rel="stylesheet" href="../../../../css/stroom-ui/material_design_colors.css"/>
<link rel="stylesheet" href="../../../../css/stroom-ui/theme-root.css"/>
<link rel="stylesheet" href="../../../../css/stroom-ui/theme-dark.css"/>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-00000000-0', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  </head>
  <body class="td-section">
    <header>
      <nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
  <a class="navbar-brand" href="../../../../"><span class="navbar-brand__logo navbar-logo"><svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="110.61089" height="30.000004" viewBox="0 0 88.488641 23.999957" id="svg2" inkscape:version="0.91 r13725" sodipodi:docname="logo.svg"><defs id="defs20"/><sodipodi:namedview pagecolor="#989898" bordercolor="#666666" borderopacity="1" objecttolerance="10" gridtolerance="10" guidetolerance="10" inkscape:pageopacity="0" inkscape:pageshadow="2" inkscape:window-width="1920" inkscape:window-height="1137" id="namedview18" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:zoom="5.5951814" inkscape:cx="55.451414" inkscape:cy="16.275348" inkscape:window-x="0" inkscape:window-y="0" inkscape:window-maximized="1" inkscape:current-layer="svg2"/><g id="g4150" style="opacity:.97000002" transform="matrix(0.03883584,0,0,0.03883584,0,-3.1155874e-4)"><path id="path6" d="M121.99991 205.98497C54.999958 205.98497.0 259.98493.0 327.98487c0 66.99994 54.999958 121.99989 121.99991 121.99989h167.99987c24.99998.0 44.99996 20.99998 44.99996 44.99996.0 24.99998-19.99998 44.99996-44.99996 44.99996H109.20929C65.984126 553.87219 27.100843 581.57313.01093599 617.98462H289.99978c66.99994.0 121.99991-54.99996 121.99991-122.9999.0-66.99994-54.99997-121.99989-121.99991-121.99989H121.99991c-24.999984.0-44.999969-19.99999-44.999969-44.99996.0-24.99998 19.999985-44.99996 44.999969-44.99996h228.79045c26.9905-35.88325 65.47093-63.18547 108.21554-76.99994H121.99991z" style="fill:#fff" inkscape:connector-curvature="0"/><path id="path8" d="M601.44485-.00077860649C572.6583 8.3697982 546.49491 22.822962 524.44491 41.902305V205.78969l.002.19528h-.002c-65.11 48e-5-123.03145 30.0199-160.74675 76.99994h160.74675v334.99971h76.99994V282.98491h144.85298c27.16134-36.05885 65.96411-63.39275 109.02184-76.99994H601.44485v-205.98574860649z" style="fill:#fff" inkscape:connector-curvature="0"/><path id="path10" d="m919.42586 205.98497c-113.99519.0-205.99537 92.00648-206.00296 205.99982-15e-5 68.67178.0 137.32749.0 205.99983h77.99994c-.012-68.6493.0176-137.46869.0-205.99983.0846-70.92785 57.05747-128.99988 128.00462-128.99988 5.28623.0 10.49823.32864 15.62183.95311 18.2219-24.51229 41.78461-45.0838 68.42501-60.15146-25.65065-11.43799-54.08662-17.80159-84.04684-17.80159z" style="fill:#fff" inkscape:connector-curvature="0"/><path id="path12" d="m1109.4153 205.98457c-113.99994.0-205.99983 91.99993-205.99983 205.99984.0 112.9999 91.99989 205.9998 205.99983 205.9998 114 0 205.9999-92.9999 205.9999-205.9998.0-113.99991-91.9999-205.99984-205.9999-205.99984zm0 333.99974c-70.9999.0-128.99994-56.99996-128.99994-127.9999.0-70.99995 58.00004-128.9999 128.99994-128.9999 71 0 128.9999 57.99995 128.9999 128.9999.0 70.99994-57.9999 127.9999-128.9999 127.9999z" style="fill:#fff" inkscape:connector-curvature="0"/><path id="path14" d="m1444.4737 205.98457c-113.9999.0-205.9998 91.99993-205.9998 205.99984.0 112.9999 91.9999 205.9998 205.9998 205.9998s205.9999-92.9999 205.9999-205.9998c0-113.99991-92-205.99984-205.9999-205.99984zm0 333.99974c-70.9999.0-128.9999-56.99996-128.9999-127.9999.0-70.99995 58-128.9999 128.9999-128.9999 71 0 128.9999 57.99995 128.9999 128.9999.0 70.99994-57.9999 127.9999-128.9999 127.9999z" style="fill:#fff" inkscape:connector-curvature="0"/><path id="path16" d="m1738.5308 379.98447c0-53 43-97 95.9999-97 53 0 97 44 97 97v237.9997h76.9999v-237.9997c0-53 43-97 96.9999-97 53 0 95.9999 44 95.9999 97v237.9997h77v-237.9997c0-96-77-173.9999-172.9999-173.9999-54.9999.0-103.9999 24.99998-135.9999 64.99995-31.9999-39.99997-79.9999-64.99995-134.9999-64.99995-95.9999.0-173.9998 77.9999-173.9998 173.9999v237.9997h77.9999z" style="fill:#fff" inkscape:connector-curvature="0"/></g></svg></span><span class="navbar-brand__name">Stroom</span></a>
  <div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
    <ul class="navbar-nav mt-2 mt-lg-0">
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="../../../../about/about/"><span>About</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link active" href="../../../../docs/"><span class="active">Documentation</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="../../../../releases/"><span>Releases Notes</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="../../../../community/"><span>Community</span></a>
      </li>
      <li class="nav-item dropdown mr-4 d-none d-lg-block">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	Stroom Version (7.4)
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
	
	
	
	<a class="dropdown-item" href="../../../../../">7.6 (Latest)</a>
	
	<a class="dropdown-item" href="../../../../../7.5">7.5</a>
	
	<a class="dropdown-item" href="../../../../">7.4</a>
	
	<a class="dropdown-item" href="../../../../7.3">7.3</a>
	
	<a class="dropdown-item" href="../../../../7.2">7.2</a>
	
	<a class="dropdown-item" href="../../../../7.1">7.1</a>
	
	<a class="dropdown-item" href="../../../../7.0">7.0</a>
	
	<a class="dropdown-item" href="../../../../legacy">Legacy</a>
	
</div>
</li>
      </ul>
  </div>
  <div class="navbar-nav d-none d-lg-block">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="../../../../offline-search-index.082dda76e996cab3f58e1873fe451b4e.json"
    data-offline-search-base-href="../../../../"
    data-offline-search-max-results="50"
  >
</div>

  </div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This is the multi-page printable view of this section.
<a href="#" onclick="print();return false;">Click here to print</a>.
</p><p>
<a href="../../../../docs/sending-data/example-clients/">Return to the regular view of this page</a>.
</p>
</div>



<h1 class="title">Example Clients</h1>
<div class="lead">A collection of example client applications for sending data to Stroom or one of its proxies.</div>




    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-f8a034cc20afebf36e739b2f5b101c66">curl (Linux)</a></li>


    
  
    
    
	
<li>2: <a href="#pg-63790e65a84e97fcd55409e23aa7964b">curl (Windows)</a></li>


    
  
    
    
	
<li>3: <a href="#pg-166a5e5a02228e4ece5fed9278250e81">event-logging (Java library)</a></li>


    
  
    
    
	
<li>4: <a href="#pg-295b677760e8a81324ed677a90fafcb1">send_to_stroom.sh (Linux)</a></li>


    
  
    
    
	
<li>5: <a href="#pg-12691c821995ef3fad858d48ad731b0c">Simple C# Client</a></li>


    
  
    
    
	
<li>6: <a href="#pg-1e4e762a6a08dea73db4452a6a130840">Simple Java Client</a></li>


    
  
    
    
	
<li>7: <a href="#pg-5816a31f40b44194fbd5c9e1249594ad">stroom-log-sender (Docker)</a></li>


    
  
    
    
	
<li>8: <a href="#pg-c8c3de6aa6d5f3bfe0f2cc34d6e7e5c9">VBScript (Windows)</a></li>


    
  
    
    
	
<li>9: <a href="#pg-859ebc81ca735b3aef6548c958a0a8a4">wget (Windows)</a></li>


    
  

    </ul>


<div class="content">
      <p>The following article provides examples to help data providers send data to Stroom via the HTTPS interface.
The code for the clients is in the <em>stroom-clients</em> repository 







  
  

<span class="external-link">
  <a href="https://github.com/gchq/stroom-clients" target="_blank" class="" style="" title="stroom-clients (external link to https://github.com/gchq/stroom-clients)">
    <span>stroom-clients</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
.</p>

</div>
</div>


  
  
  
  

  
  

  
    
    
	
    



<div class="td-content" style="--base-section-num: '1.'; ">
    
  <h1 id="pg-f8a034cc20afebf36e739b2f5b101c66">1 - curl (Linux)</h1>
    <div class="lead">How to use the <code>curl</code> command to send data to Stroom.</div>
	<p>Curl is a standard unix tool to send data to or from a server.
In the following examples -H is used to specify the header arguments required by Stroom, see <a href="../../../../docs/sending-data/header-arguments/">Header Arguments</a>.</p>
<p>Notes:</p>
<ul>
<li>The <code>@</code> character must be used in front of the file being posted.
If it is not then curl will post the file name instead of it&rsquo;s contents.</li>
<li>The <code>--data-binary</code> argument must always be used even for text formats, in order to prevent data corruption by curl stripping out newlines.</li>
</ul>
<h2 id="example-https-post-without-authentication">Example HTTPS post without authentication:</h2>

  






<div class="code-toolbar">
  <pre 
    class="command-line language-bash" 
    data-user="user" 
    data-host="localhost" 
    data-continuation-str="\"
    data-filter-output="(out)"><code class="language-bash">curl -k --data-binary @file.dat &#34;https://&lt;Stroom_HOST&gt;/stroom/datafeed&#34; \
-H &#34;Feed:EXAMPLE_FEED&#34; \
-H &#34;System:EXAMPLE_SYSTEM&#34; \
-H &#34;Environment:EXAMPLE_ENVIRONMENT&#34;</code></pre>
</div>

<p>In the above example -k is required to stop curl from authenticating the server.
The next example must be used to supply the necessary CA to authenticate the server if this is required.</p>
<h2 id="example-https-with-1-way-ssl-authentication">Example HTTPS With 1 way SSL authentication:</h2>

  






<div class="code-toolbar">
  <pre 
    class="command-line language-bash" 
    data-user="user" 
    data-host="localhost" 
    data-continuation-str="\"
    data-filter-output="(out)"><code class="language-bash">curl --cacert root_ca.crt --data-binary @file.dat &#34;https://&lt;Stroom_HOST&gt;/stroom/datafeed&#34; \
-H &#34;Feed:EXAMPLE_FEED&#34; \
-H &#34;System:EXAMPLE_SYSTEM&#34; \
-H &#34;Environment:EXAMPLE_ENVIRONMENT&#34;</code></pre>
</div>

<p>The above example verifies that the certificate presented by Stroom is signed by the CA.
The CA is provided to curl using the &lsquo;&ndash;cacert root_ca.crt&rsquo; parameter.</p>
<p>For step by step instructions for creating, configuring and testing the PKI authentication, see the <a href="../../../../docs/sending-data/ssl/">SSL Guide</a></p>
<h2 id="example-https-with-2-way-ssl-authentication">Example HTTPS With 2 way SSL authentication:</h2>

  






<div class="code-toolbar">
  <pre 
    class="command-line language-bash" 
    data-user="user" 
    data-host="localhost" 
    data-continuation-str="\"
    data-filter-output="(out)"><code class="language-bash">curl --cert example.pem --cacert root_ca.crt --data-binary @file.dat &#34;https://&lt;Stroom_HOST&gt;/stroom/datafeed&#34; \
-H &#34;Feed:EXAMPLE_FEED&#34; \
-H &#34;System:EXAMPLE_SYSTEM&#34; \
-H &#34;Environment:EXAMPLE_ENVIRONMENT&#34;</code></pre>
</div>

<p>The above example both verifies that the certificate presented by Stroom is signed by the CA and also provides a certificate to authenticate itself with Stroom.
The data provider provides a certificate using the &lsquo;&ndash;cert example.pem&rsquo; parameter.</p>
<p>If your input file is not compressed you should compress it as follows:</p>

  






<div class="code-toolbar">
  <pre 
    class="command-line language-bash" 
    data-user="user" 
    data-host="localhost" 
    data-continuation-str="\"
    data-filter-output="(out)"><code class="language-bash">gzip -c uncompressedfile.dat \
| curl --cert example.pem --cacert root_ca.crt --data-binary @- &#34;https://&lt;Stroom_HOST&gt;/stroom/datafeed&#34; \
-H &#34;Feed:EXAMPLE_FEED&#34; \
-H &#34;System:EXAMPLE_SYSTEM&#34; \
-H &#34;Environment:EXAMPLE_ENVIRONMENT&#34; \
-H &#34;Compression:Gzip&#34;</code></pre>
</div>

<p>When delivering data from a RHEL4 host, an additional header argument must be added to specify the FQDN of the host:</p>
<pre><code class="language-bash">-H &quot;Hostname:host.being.audited&quot;
</code></pre>
<p>The hostname being sent as a header argument may be resolved upon execution using the command <code>hostname -f</code>.</p>
<h2 id="ssl-notes">SSL Notes</h2>
<p>To create a .pem format key simply append the private key and certifcate.</p>

  






<div class="code-toolbar">
  <pre 
    class="command-line language-bash" 
    data-user="user" 
    data-host="localhost" 
    data-continuation-str="\"
    data-filter-output="(out)"><code class="language-bash">cat &lt;NAME&gt;.key &gt;&gt; &lt;NAME&gt;.pem
cat &lt;NAME&gt;.crt &gt;&gt; &lt;NAME&gt;.pem</code></pre>
</div>

<p>To remove the pass phrase from a openssl private key use.</p>

  






<div class="code-toolbar">
  <pre 
    class="command-line language-bash" 
    data-user="user" 
    data-host="localhost" 
    data-continuation-str="\"
    data-filter-output="(out)"><code class="language-bash">openssl rsa -in server.key -out server-clear.key</code></pre>
</div>

<p>The <code>send-logs.sh</code> script assumes the period start and end times are embedded in the file name (e.g. log_2010-01-01T12:00:00.000Z_2010-01-02T12:00:00.000Z.log).
The certificates will need to be added to the script as above.</p>

</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '2.'; page-break-before: always">
    
  <h1 id="pg-63790e65a84e97fcd55409e23aa7964b">2 - curl (Windows)</h1>
    <div class="lead">Using Curl on Windows to send data to Stroom.</div>
	<p>There is a version of curl for Windows</p>
<p>Windows 10 is the latest desktop OS offering from Microsoft.
From Windows 10 build 17063 and later, curl is now natively included - you can execute it directly from Cmd.exe or PowerShell.exe.
Curl.exe is located at c:\windows\system32 (which is included in the standard PATH environment variable) - all you need to do is run Command Prompt with administrative rights and you can use Curl. You can execute it directly from Cmd.exe or PowerShell.exe.
For older versions of Windows, the cURL project has Windows binaries.</p>
<pre><code class="language-bash">curl -s -k --data-binary @file.dat &quot;https://stroomp.strmdev00.org/stroom/datafeed&quot; -H&quot;Feed:TEST-FEED-V1_0&quot; -H&quot;System:EXAMPLE_SYSTEM&quot; -H&quot;Environment:EXAMPLE_ENVIRONMENT&quot;
</code></pre>







  
  
  
  
  







  



<div class="card rounded shadow-stroom p-2 td-post-card mb-4 mt-4" style="width: fit-content;">

  <a title="images/user-guide/sending-data/curl_windows.png" href="../../../../images/user-guide/sending-data/curl_windows.png">
    <figure style="margin-block-end: 0px" >
      
      <img class="card-img-top" src="../../../../images/user-guide/sending-data/curl_windows.png" style="max-width: fit-content" alt="images/user-guide/sending-data/curl_windows.png">
      

      
      <div class="card-body px-0 pt-2 pb-0">
        <hr style="border-top: 1px solid #ddd; margin-top: 0px; margin-bottom:4px;">
        <figcaption class="card-text" style="font-size: smaller; text-align: center;">Windows curl CLI</figcaption>
      </div>
      
    </figure>
  </a>
</div>


</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '3.'; page-break-before: always">
    
  <h1 id="pg-166a5e5a02228e4ece5fed9278250e81">3 - event-logging (Java library)</h1>
    <div class="lead">A Java library for logging events in Java applications.</div>
	<p>







  
  

<span class="external-link">
  <a href="https://github.com/gchq/event-logging" target="_blank" class="" style="" title="event-logging (external link to https://github.com/gchq/event-logging)">
    <span>event-logging</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
 is a Java API for logging audit events conforming to the 







  
  

<span class="external-link">
  <a href="https://github.com/gchq/event-logging-schema" target="_blank" class="" style="" title="Event Logging XML Schema (external link to https://github.com/gchq/event-logging-schema)">
    <span>Event Logging XML Schema</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
.
The API uses a generated Java JAXB model of the <em>Event Logging XML Schema</em>.
<em>Event Logging</em> can be incorporated into your Java application to provide a means of recording and outputting audit events or user actions for compliance, security or monitoring.</p>
<p>This library only generates the events.
By default XML events are written to a file using a logging appender.
In order to send the events to Stroom either the logged files will need to be sent to stroom using one of the other <a href="../../../../docs/sending-data/example-clients/">clients</a>.</p>

</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '4.'; page-break-before: always">
    
  <h1 id="pg-295b677760e8a81324ed677a90fafcb1">4 - send_to_stroom.sh (Linux)</h1>
    <div class="lead">A shell script for sending logs to Stroom or one of its proxies</div>
	<p>







  
  

<span class="external-link">
  <a href="https://github.com/gchq/stroom-clients/releases" target="_blank" class="" style="" title="send_to_stroom.sh (external link to https://github.com/gchq/stroom-clients/releases)">
    <span>send_to_stroom.sh</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
 is a small bash script to make it easier to send data to <em>stroom</em>.
To use it download the following files using wget or similar, replacing <code>SEND_TO_STROOM_VER</code> with the latest released version from 







  
  

<span class="external-link">
  <a href="https://github.com/gchq/stroom-clients/releases" target="_blank" class="" style="" title="here (external link to https://github.com/gchq/stroom-clients/releases)">
    <span>here</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
:</p>

  






<div class="code-toolbar">
  <pre 
    class="command-line language-bash" 
    data-user="user" 
    data-host="localhost" 
    data-continuation-str="\"
    data-filter-output="(out)"><code class="language-bash">SEND_TO_STROOM_VER=&#34;send-to-stroom-v2.0&#34; &amp;&amp; \
    wget &#34;https://raw.githubusercontent.com/gchq/stroom-clients/${SEND_TO_STROOM_VER}/bash/send_to_stroom.sh&#34; &amp;&amp; \
    wget &#34;https://raw.githubusercontent.com/gchq/stroom-clients/${SEND_TO_STROOM_VER}/bash/send_to_stroom_args.sh&#34; &amp;&amp; \
    chmod u&#43;x send_to_stroom*.sh</code></pre>
</div>

<p>To see the help for <em>send_to_stroom.sh</em>, enter <code>./send_to_stroom.sh --help</code></p>
<p>The following is an example of using <em>send_to_stroom.sh</em> to send all logs in a directory:</p>

  






<div class="code-toolbar">
  <pre 
    class="command-line language-bash" 
    data-user="user" 
    data-host="localhost" 
    data-continuation-str="\"
    data-filter-output="(out)"><code class="language-bash">./send_to_stroom.sh \
    --delete-after-sending \
    --file-regex &#34;.*/access-[0-9]&#43;.*\.log(\.gz)?$&#34; \
    --key ./client..key \
    --cert ./client.pem.crt \
    --cacert ./ca.pem.crt \
    /some_directory/logs \
    MY_FEED \
    MY_SYSTEM \
    DEV \
    https://stroom-host/stroom/datafeed</code></pre>
</div>


</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '5.'; page-break-before: always">
    
  <h1 id="pg-12691c821995ef3fad858d48ad731b0c">5 - Simple C# Client</h1>
    <div class="lead">A simple C# client for sending data files to Stroom.</div>
	<p>The <code>StroomCSharpClient</code> is a C# port of the Java client and behaves in the same way. Note that this is just an example, not a fully functional client.
See 







  
  

<span class="external-link">
  <a href="https://github.com/gchq/stroom-clients/tree/master/StroomCSharpClient" target="_blank" class="" style="" title="StroomCSharpClient (external link to https://github.com/gchq/stroom-clients/tree/master/StroomCSharpClient)">
    <span>StroomCSharpClient</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
.</p>

</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '6.'; page-break-before: always">
    
  <h1 id="pg-1e4e762a6a08dea73db4452a6a130840">6 - Simple Java Client</h1>
    <div class="lead">A simple Java client for sending data files to Stroom.</div>
	<p>The <code>stroom-java-client</code> provides an example Java client that can:</p>
<ul>
<li>Read a zip, gzip or uncompressed an input file.</li>
<li>Perform a HTTP post of data with zip, gzip or uncompressed compression.</li>
<li>Pass down arguments on the command line as HTTP request arguments.</li>
<li>Supports HTTP and HTTPS with 1 or 2 way authentication.</li>
</ul>
<p><em>(N.B. arguments must be in lower case).</em></p>
<p>To use the example client first compile the Java code:</p>

  






<div class="code-toolbar">
  <pre 
    class="command-line language-bash" 
    data-user="user" 
    data-host="localhost" 
    data-continuation-str="\"
    data-filter-output="(out)"><code class="language-bash">javac DataFeedClient.java</code></pre>
</div>

<h2 id="example-http-post">Example HTTP Post:</h2>

  






<div class="code-toolbar">
  <pre 
    class="command-line language-bash" 
    data-user="user" 
    data-host="localhost" 
    data-continuation-str="\"
    data-filter-output="(out)"><code class="language-bash">java \
-classpath . \
DataFeedClient \
inputfile=datafeed \
url=http://&lt;Stroom_HOST&gt;/stroom/datafeed \
system=EXAMPLE-SYSTEM \
environment=DEV \
feed=EXAMPLE-FEED</code></pre>
</div>

<h2 id="example-https-with-1-way-ssl-authentication">Example HTTPS With 1 way SSL authentication:</h2>

  






<div class="code-toolbar">
  <pre 
    class="command-line language-bash" 
    data-user="user" 
    data-host="localhost" 
    data-continuation-str="\"
    data-filter-output="(out)"><code class="language-bash">java \
-classpath . \
-Djavax.net.ssl.trustStore=ca.jks \
-Djavax.net.ssl.trustStorePassword=capass \
DataFeedClient \
inputfile=datafeed \
url=https://&lt;Stroom_HOST&gt;/stroom/datafeed \
system=EXAMPLE-SYSTEM \
environment=DEV \
feed=EXAMPLE-FEED</code></pre>
</div>

<h2 id="example-https-with-2-way-ssl-authentication">Example HTTPS With 2 way SSL authentication:</h2>

  






<div class="code-toolbar">
  <pre 
    class="command-line language-bash" 
    data-user="user" 
    data-host="localhost" 
    data-continuation-str="\"
    data-filter-output="(out)"><code class="language-bash">java \
-classpath . \
-Djavax.net.ssl.trustStore=ca.jks \
-Djavax.net.ssl.trustStorePassword=capass \
-Djavax.net.ssl.keyStore=example.jks \
-Djavax.net.ssl.keyStorePassword=&lt;PASSWORD&gt; \
DataFeedClient \
inputfile=datafeed url=https://&lt;Stroom_HOST&gt;/stroom/datafeed \
system=EXAMPLE-SYSTEM \
environment=DEV \
feed=EXAMPLE-FEED</code></pre>
</div>


</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '7.'; page-break-before: always">
    
  <h1 id="pg-5816a31f40b44194fbd5c9e1249594ad">7 - stroom-log-sender (Docker)</h1>
    <div class="lead">A Docker image for peridoically sending log files generated by an application to Stroom.</div>
	<p>







  
  

<span class="external-link">
  <a href="https://hub.docker.com/r/gchq/stroom-log-sender/" target="_blank" class="" style="" title="stroom-log-sender (external link to https://hub.docker.com/r/gchq/stroom-log-sender/)">
    <span>stroom-log-sender</span>
    <i class="external-link-icon fas fa-external-link-alt fa-sm text-secondary"></i>
  </a>
</span>
 is a small Docker image for sending data to <em>Stroom</em>.</p>
<p>This is the simplest way to get data into stroom if the data provider is itself running in docker.
It can also be used for sending data to <em>Stroom</em> from data providers that are not running in Docker.
<em>stroom-log-sender</em> makes use of the <em>send_to_stroom.sh</em> bash script that is described below.
For details on how to use <em>stroom-log-sender</em>, see the Dockerhub link above.</p>

</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '8.'; page-break-before: always">
    
  <h1 id="pg-c8c3de6aa6d5f3bfe0f2cc34d6e7e5c9">8 - VBScript (Windows)</h1>
    <div class="lead">Using VBScript to send data to Stroom.</div>
	<p><code>extract-data.vbs</code> uses wevtutil.exe to extract <strong>Security</strong> event information from the windows event log.
This script has been tested on Windows 2008.</p>
<p>This script is designed to run periodically (say every 10 minutes).
The first time the script is run it stores the current time in UTC format in the registry.
Subsequent calls then extract event information from the last run time to the new current time.
The events are stored in a zip file with the period dates embedded.</p>
<p>The script requires a working directory used as a buffer for the zip files.
This can be set at the start of the script otherwise it will default to the working directory.</p>
<p>The <code>send-data.vbs</code> script is designed to run periodically (say every 10 minutes). The script will scan for zip files and send them to Stroom.</p>
<p>The script details several parameters that require setting per environment. Among these are the working directory that the zip files are stored in, the feed name and the URL of Stroom.</p>
<h2 id="ssl">SSL</h2>
<p>To send data over SSL (https) you must import a client certificate in p12 format into windows.
To convert a certificate (.crt) and private key (.key) into a p12 format use the following command:</p>
<pre><code class="language-text">openssl pkcs12 -export -in &lt;NAME&gt;.crt -inkey &lt;NAME&gt;.key -out &lt;NAME&gt;.p12 -name &quot;&lt;NAME&gt;&quot;
</code></pre>
<p>Once in p12 format use the windows certificate wizard to import the public private key.</p>
<p>The <code>send-data-tree.vbs</code> script works through a directory for different feed types.</p>

</div>




    
	
  
    
    
	
    



<div class="td-content" style="--base-section-num: '9.'; page-break-before: always">
    
  <h1 id="pg-859ebc81ca735b3aef6548c958a0a8a4">9 - wget (Windows)</h1>
    <div class="lead">Using <code>wget</code> on Windows to send data to Stroom.</div>
	<p>There is a version of <code>wget</code> for windows</p>
<ul>
<li>Use <code>--post-file</code> argument to supply the data</li>
<li>Use <code>--certificate</code> and <code>--certificate-type</code> arguments to specify your client certificate</li>
<li>Use <code>--header</code> argument to inform Stroom which feed and environment your data relates to</li>
</ul>

</div>




    
	
  



          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/gchq/stroom" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2024 Crown Copyright All Rights Reserved</small>
        
	
      </div>
    </div>
  </div>
</footer>


    </div>
    

<script src='../../../../js/popper.min.js'></script>
<script src='../../../../js/bootstrap.min.js'></script>






<script src='../../../../js/tabpane-persist.js'></script>




















<script src="../../../../js/main.min.cbc1d428d83561c4dec32da9374290554119d7483329f849251cb7153b2ecd07.js" integrity="sha256-y8HUKNg1YcTewy2pN0KQVUEZ10gzKfhJJRy3FTsuzQc=" crossorigin="anonymous"></script>



<script src='../../../../js/prism.js'></script>



  </body>
</html>
