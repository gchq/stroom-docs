<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="981px" preserveAspectRatio="none" style="width:845px;height:981px;" version="1.1" viewBox="0 0 845 981" width="845px" zoomAndPan="magnify"><defs><filter height="300%" id="f1le9kftq5ppct" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="465" x="183.5" y="18.5645">Stroom multi-node mixed-economy deployment</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="213" x="309.5" y="39.9893">Stroom services in Docker</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="253" x="289.5" y="60.9424">Stroom and MySQL on bare OS</text><!--MD5=[def129ecf8b93bb9f2bc263fad41ae57]
cluster dataload_client_host--><polygon fill="#FFFFFF" filter="url(#f1le9kftq5ppct)" points="54,81.1875,64,71.1875,272,71.1875,272,196.1875,262,206.1875,54,206.1875,54,81.1875" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="262" x2="272" y1="81.1875" y2="71.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="54" x2="262" y1="81.1875" y2="81.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="262" x2="262" y1="81.1875" y2="206.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="56" x="131" y="97.1826">«device»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="142" x="88" y="113.4795">Datafeed client host</text><!--MD5=[4679e25ee70b82600e0c6d263a8629f1]
cluster ui_client_host--><polygon fill="#FFFFFF" filter="url(#f1le9kftq5ppct)" points="296,81.1875,306,71.1875,500,71.1875,500,196.1875,490,206.1875,296,206.1875,296,81.1875" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="490" x2="500" y1="81.1875" y2="71.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="296" x2="490" y1="81.1875" y2="81.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="490" x2="490" y1="81.1875" y2="206.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="56" x="366" y="97.1826">«device»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="128" x="330" y="113.4795">User desktop host</text><!--MD5=[e0722ec75e78acc1feffbca00d4db014]
cluster remote_proxy_host--><polygon fill="#FFFFFF" filter="url(#f1le9kftq5ppct)" points="524,81.1875,534,71.1875,792,71.1875,792,196.1875,782,206.1875,524,206.1875,524,81.1875" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="782" x2="792" y1="81.1875" y2="71.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="524" x2="782" y1="81.1875" y2="81.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="782" x2="782" y1="81.1875" y2="206.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="56" x="626" y="97.1826">«device»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="192" x="558" y="113.4795">Remote stroom-proxy host</text><!--MD5=[bf51939d10c4f1fcb727a44d3ddbdd25]
cluster stroom estate--><rect fill="#FFFFFF" filter="url(#f1le9kftq5ppct)" height="739" style="stroke:#000000;stroke-width:1.5;" width="826" x="7" y="230.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="101" x="369.5" y="245.1826">stroom estate</text><!--MD5=[f133b3541ec109ea0783d31693d76c14]
cluster database_host--><polygon fill="#FFFFFF" filter="url(#f1le9kftq5ppct)" points="378,732.1875,388,722.1875,676,722.1875,676,935.1875,666,945.1875,378,945.1875,378,732.1875" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="666" x2="676" y1="732.1875" y2="722.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="378" x2="666" y1="732.1875" y2="732.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="666" x2="666" y1="732.1875" y2="945.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="56" x="495" y="748.1826">«device»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="101" x="472.5" y="764.4795">Database host</text><!--MD5=[fa6e3a9222af9f8270524df4a8c73c70]
cluster stroom_all_dbs--><path d="M402,796.1875 C402,786.1875 527,786.1875 527,786.1875 C527,786.1875 652,786.1875 652,796.1875 L652,911.1875 C652,921.1875 527,921.1875 527,921.1875 C527,921.1875 402,921.1875 402,911.1875 L402,796.1875 " fill="#FFFFFF" filter="url(#f1le9kftq5ppct)" style="stroke:#000000;stroke-width:1.5;"/><path d="M402,796.1875 C402,806.1875 527,806.1875 527,806.1875 C527,806.1875 652,806.1875 652,796.1875 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="53" x="500.5" y="821.1826">«mysql»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="105" x="474.5" y="837.4795">stroom_all_dbs</text><!--MD5=[195d2cdec816e20a1a7830c0d281c5ee]
cluster services_host--><polygon fill="#FFFFFF" filter="url(#f1le9kftq5ppct)" points="71,283.1875,81,273.1875,489,273.1875,489,481.1875,479,491.1875,71,491.1875,71,283.1875" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="479" x2="489" y1="283.1875" y2="273.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="71" x2="479" y1="283.1875" y2="283.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="479" x2="479" y1="283.1875" y2="491.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="56" x="248" y="299.1826">«device»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="91" x="230.5" y="315.4795">Services host</text><!--MD5=[863c31b5ce76f6887dd79aa52361fc86]
cluster nginx_container--><rect fill="#FFFFFF" filter="url(#f1le9kftq5ppct)" height="130" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="156" x="309" y="337.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="74" x="350" y="352.1826">«container»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="38" x="368" y="368.4795">nginx</text><!--MD5=[345bc6a4946eb22f9ca28fd33c76f1ab]
cluster stroom_log_sender--><rect fill="#FFFFFF" filter="url(#f1le9kftq5ppct)" height="130" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="190" x="95" y="337.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="74" x="153" y="352.1826">«container»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="130" x="125" y="368.4795">stroom-log-sender</text><!--MD5=[b6e9c5df923136c74b5790a212830ba5]
cluster stroom_host_1--><polygon fill="#FFFFFF" filter="url(#f1le9kftq5ppct)" points="55,549.1875,65,539.1875,408,539.1875,408,664.1875,398,674.1875,55,674.1875,55,549.1875" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="398" x2="408" y1="549.1875" y2="539.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="55" x2="398" y1="549.1875" y2="549.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="398" x2="398" y1="549.1875" y2="674.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="56" x="199.5" y="565.1826">«device»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="100" x="177.5" y="581.4795">stroom host 1</text><!--MD5=[1311e76a0ecc9ed514e2936f276bb07a]
cluster stroom_host_2--><polygon fill="#FFFFFF" filter="url(#f1le9kftq5ppct)" points="432,549.1875,442,539.1875,785,539.1875,785,664.1875,775,674.1875,432,674.1875,432,549.1875" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="775" x2="785" y1="549.1875" y2="539.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="432" x2="775" y1="549.1875" y2="549.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="775" x2="775" y1="549.1875" y2="674.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="56" x="576.5" y="565.1826">«device»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="100" x="554.5" y="581.4795">stroom host 2</text><!--MD5=[960860b3b3295bcd1d432a531990153b]
entity dataload_client_app--><polygon fill="#FEFECE" filter="url(#f1le9kftq5ppct)" points="116,137.1875,126,127.1875,256,127.1875,256,179.7813,246,189.7813,116,189.7813,116,137.1875" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="246" x2="256" y1="137.1875" y2="127.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="116" x2="246" y1="137.1875" y2="137.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="246" x2="246" y1="137.1875" y2="189.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="84" x="139" y="160.1826">«application»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="131" y="176.4795">Event generator</text><!--MD5=[3677200128df26b0ab79a654f7c368fe]
entity ui_client_browser--><polygon fill="#FEFECE" filter="url(#f1le9kftq5ppct)" points="319.5,137.1875,329.5,127.1875,454.5,127.1875,454.5,179.7813,444.5,189.7813,319.5,189.7813,319.5,137.1875" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="444.5" x2="454.5" y1="137.1875" y2="127.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="319.5" x2="444.5" y1="137.1875" y2="137.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="444.5" x2="444.5" y1="137.1875" y2="189.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="95" x="334.5" y="160.1826">«web browser»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="340" y="176.4795">Web browser</text><!--MD5=[fe6f05c8cee4bc5bf69b8554e9ede833]
entity remote_proxy--><polygon fill="#FEFECE" filter="url(#f1le9kftq5ppct)" points="540,137.1875,550,127.1875,666,127.1875,666,179.7813,656,189.7813,540,189.7813,540,137.1875" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="656" x2="666" y1="137.1875" y2="127.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="540" x2="656" y1="137.1875" y2="137.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="656" x2="656" y1="137.1875" y2="189.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="84" x="556" y="160.1826">«application»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="555" y="176.4795">stroom-proxy</text><!--MD5=[40b2f2205cc740157f5e31447dce3a90]
entity stroom_db--><rect fill="#FEFECE" filter="url(#f1le9kftq5ppct)" height="52.5938" rx="35" ry="35" style="stroke:#000000;stroke-width:1.5;" width="91" x="544.5" y="852.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="71" x="554.5" y="875.1826">«database»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46" x="567" y="891.4795">stroom</text><!--MD5=[4556cb27c697ea38b95df37aa8ac3618]
entity stroom_stats_db--><rect fill="#FEFECE" filter="url(#f1le9kftq5ppct)" height="52.5938" rx="35" ry="35" style="stroke:#000000;stroke-width:1.5;" width="91" x="418.5" y="852.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="71" x="428.5" y="875.1826">«database»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="448.5" y="891.4795">stats</text><!--MD5=[8824c66cba45be527cf3dd56bcd70cd2]
entity nginx--><polygon fill="#FEFECE" filter="url(#f1le9kftq5ppct)" points="325,398.1875,335,388.1875,449,388.1875,449,440.7813,439,450.7813,325,450.7813,325,398.1875" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="439" x2="449" y1="398.1875" y2="388.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="325" x2="439" y1="398.1875" y2="398.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="439" x2="439" y1="398.1875" y2="450.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="84" x="340" y="421.1826">«web server»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="34" x="365" y="437.4795">nginx</text><!--MD5=[c3d424efc77a9e66034b64d0570dbfed]
entity stroom_log_sender_script--><polygon fill="#FEFECE" filter="url(#f1le9kftq5ppct)" points="110.5,398.1875,120.5,388.1875,269.5,388.1875,269.5,440.7813,259.5,450.7813,110.5,450.7813,110.5,398.1875" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="259.5" x2="269.5" y1="398.1875" y2="388.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="110.5" x2="259.5" y1="398.1875" y2="398.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="259.5" x2="259.5" y1="398.1875" y2="450.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="50" x="160" y="421.1826">«script»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="125.5" y="437.4795">stroom-log-sender</text><!--MD5=[7348dbccfd296b39c57cc036970031d5]
entity stroom_dropwiz_1--><polygon fill="#FEFECE" filter="url(#f1le9kftq5ppct)" points="286,605.1875,296,595.1875,392,595.1875,392,647.7813,382,657.7813,286,657.7813,286,605.1875" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="382" x2="392" y1="605.1875" y2="595.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="286" x2="382" y1="605.1875" y2="605.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="382" x2="382" y1="605.1875" y2="657.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="66" x="301" y="628.1826">«java app»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="305" y="644.4795">stroom 1</text><!--MD5=[0d65a96a535db829811924313787c96b]
entity stroom_proxy_dropwiz_1--><polygon fill="#FEFECE" filter="url(#f1le9kftq5ppct)" points="71,605.1875,81,595.1875,251,595.1875,251,647.7813,241,657.7813,71,657.7813,71,605.1875" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="241" x2="251" y1="605.1875" y2="595.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="71" x2="241" y1="605.1875" y2="605.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="241" x2="241" y1="605.1875" y2="657.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="66" x="123" y="628.1826">«java app»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="86" y="644.4795">stroom-proxy (local) 1</text><!--MD5=[07687b78d9b28c498e37c90c82585ae2]
entity stroom_dropwiz_2--><polygon fill="#FEFECE" filter="url(#f1le9kftq5ppct)" points="663,605.1875,673,595.1875,769,595.1875,769,647.7813,759,657.7813,663,657.7813,663,605.1875" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="759" x2="769" y1="605.1875" y2="595.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="663" x2="759" y1="605.1875" y2="605.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="759" x2="759" y1="605.1875" y2="657.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="66" x="678" y="628.1826">«java app»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="682" y="644.4795">stroom 2</text><!--MD5=[9126977c1e98cd30bf07cef64368930f]
entity stroom_proxy_dropwiz_2--><polygon fill="#FEFECE" filter="url(#f1le9kftq5ppct)" points="448,605.1875,458,595.1875,628,595.1875,628,647.7813,618,657.7813,448,657.7813,448,605.1875" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="618" x2="628" y1="605.1875" y2="595.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="448" x2="618" y1="605.1875" y2="605.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="618" x2="618" y1="605.1875" y2="657.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="66" x="500" y="628.1826">«java app»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="463" y="644.4795">stroom-proxy (local) 2</text><!--MD5=[c8e6ec0f1f08878e82bbe399425a6179]
reverse link nginx to stroom_log_sender_script--><path d="M319.5,419.6875 C302.88,419.6875 286.26,419.6875 269.65,419.6875 " fill="none" id="nginx-backto-stroom_log_sender_script" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="324.66,419.6875,315.66,415.6875,319.66,419.6875,315.66,423.6875,324.66,419.6875" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[2b218a937bc6dcbd5da1e7dcb99a6233]
link stroom_dropwiz_1 to stroom_db--><path d="M365.97,658.3775 C383.04,675.5975 406.62,695.6775 432,706.1875 C451.57,714.2875 510.05,701.4775 527,714.1875 C568.87,745.5875 582.91,808.6275 587.63,846.5975 " fill="none" id="stroom_dropwiz_1-to-stroom_db" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="588.25,852.0075,591.1695,842.6013,587.665,847.0418,583.2244,843.5373,588.25,852.0075" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[b2364f98472bae29370776dc37711681]
link stroom_dropwiz_1 to stroom_stats_db--><path d="M354.33,658.3375 C378.45,706.5975 425,799.6775 448.95,847.5875 " fill="none" id="stroom_dropwiz_1-to-stroom_stats_db" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="451.2,852.0775,450.7654,842.2382,448.9697,847.6025,443.6054,845.8068,451.2,852.0775" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[f78e66d3b6beed3a5e2a16e1ee9bf197]
link stroom_dropwiz_1 to nginx--><path d="M336.76,595.1175 C341.16,558.0875 355.56,495.7775 368.65,456.5175 " fill="none" id="stroom_dropwiz_1-to-nginx" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="370.4,451.3775,363.7134,458.6087,368.789,456.1108,371.2868,461.1864,370.4,451.3775" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[2c903cf26beb5a859e93c4ed7dec4192]
link nginx to stroom_dropwiz_1--><path d="M389.78,451.3775 C385.61,488.4675 371.21,550.7775 357.89,589.9875 " fill="none" id="nginx-to-stroom_dropwiz_1" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="356.11,595.1175,362.8489,587.9351,357.7554,590.396,355.2945,585.3025,356.11,595.1175" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[1d7339ce63627be475407e048f1833f6]
link stroom_proxy_dropwiz_1 to nginx--><path d="M170.17,595.0375 C186.93,569.2175 218.48,532.5475 252,507.1875 C258.34,502.3875 261.26,503.4075 268,499.1875 C289.21,485.8975 311.39,469.2075 331.06,454.6375 " fill="none" id="stroom_proxy_dropwiz_1-to-nginx" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="335.47,451.3675,325.8563,453.507,331.4512,454.3423,330.616,459.9371,335.47,451.3675" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[0d1a0c058e7a5dcf1377a2f6eb3afbb9]
link nginx to stroom_proxy_dropwiz_1--><path d="M366.61,451.5575 C349.55,466.8075 325.72,484.9475 303,499.1875 C296.26,503.4075 293.34,502.3875 287,507.1875 C255.05,531.3575 224.89,565.8075 201.41,591.3375 " fill="none" id="nginx-to-stroom_proxy_dropwiz_1" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="197.99,595.0375,207.0318,591.133,201.3796,591.3618,201.1508,585.7096,197.99,595.0375" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[4de599bf04c067523d365b3875260a43]
link stroom_dropwiz_2 to stroom_db--><path d="M700.55,658.3375 C676.23,706.5975 629.31,799.6775 605.17,847.5875 " fill="none" id="stroom_dropwiz_2-to-stroom_db" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="602.91,852.0775,610.5206,845.8262,605.1518,847.6082,603.3698,842.2394,602.91,852.0775" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[a0ce56e84f4135fdad3c809553915be9]
link stroom_dropwiz_2 to stroom_stats_db--><path d="M697.32,658.4375 C685.04,675.6775 667.32,695.7575 646,706.1875 C622.19,717.8275 548.34,698.4675 527,714.1875 C484.87,745.2375 470.91,808.3875 466.29,846.4775 " fill="none" id="stroom_dropwiz_2-to-stroom_stats_db" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="465.67,851.9075,470.6475,843.409,466.2269,846.9386,462.6972,842.518,465.67,851.9075" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[aaad674ff378220d3deca998a5b06f50]
link stroom_dropwiz_2 to nginx--><path d="M691.7,594.9975 C677.01,568.2575 657.52,530.2475 629,507.1875 C578.01,465.9775 506.53,444.0475 454.26,432.5975 " fill="none" id="stroom_dropwiz_2-to-nginx" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="449.26,431.5175,457.2105,437.3304,454.1469,432.5749,458.9024,429.5113,449.26,431.5175" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[6a3efcefb64b4321d1f93b3fbd1f2bbe]
link nginx to stroom_dropwiz_2--><path d="M449,426.6175 C510.15,435.5775 602.15,457.1975 664,507.1875 C690.85,528.8975 709.69,563.8475 717.78,590.1875 " fill="none" id="nginx-to-stroom_dropwiz_2" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="719.16,594.9975,720.5068,585.2412,717.7732,590.1937,712.8207,587.4601,719.16,594.9975" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[2ba3c2a4067737df443a3a32e104d17d]
link stroom_proxy_dropwiz_2 to nginx--><path d="M506.09,595.1175 C474.41,557.9375 428.08,495.2775 403.13,456.0475 " fill="none" id="stroom_proxy_dropwiz_2-to-nginx" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="400.19,451.3775,401.5916,461.1261,402.8503,455.6111,408.3653,456.8697,400.19,451.3775" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[670a5d9018c7aba5bc453f9321f040dd]
link nginx to stroom_proxy_dropwiz_2--><path d="M419.57,451.3775 C451.54,488.6175 497.87,551.2875 522.54,590.4675 " fill="none" id="nginx-to-stroom_proxy_dropwiz_2" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="525.44,595.1175,524.1005,585.3602,522.8067,590.8671,517.2998,589.5734,525.44,595.1175" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[989ef6e3dbf0f2cd69ae14acc8487b5d]
link ui_client_browser to nginx--><path d="M387,190.4175 C387,238.6075 387,331.7275 387,382.8775 " fill="none" id="ui_client_browser-to-nginx" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="387,387.9975,391,378.9975,387,382.9975,383,378.9975,387,387.9975" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[a4e1cfae1c63071152643add18806a87]
link dataload_client_app to nginx--><path d="M245.66,190.2175 C259.68,199.2275 273.79,209.9875 285,222.1875 C329.2,270.2875 359.67,341.1275 375.16,383.3075 " fill="none" id="dataload_client_app-to-nginx" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="376.88,388.0575,377.5539,378.2317,375.1667,383.3602,370.0382,380.973,376.88,388.0575" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[fb1d713660c745da3a71d8c4842aab4b]
link remote_proxy to nginx--><path d="M577.37,190.4175 C536.86,238.9975 458.26,333.2375 415.83,384.1175 " fill="none" id="remote_proxy-to-nginx" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="412.59,387.9975,421.423,383.641,415.7895,384.1552,415.2753,378.5218,412.59,387.9975" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[6efd73100c0eae663cdebe2d7ac4a498]
@startuml

title
    ==Stroom multi-node mixed-economy deployment
    Stroom services in Docker
    Stroom and MySQL on bare OS
end title

skinparam rectangle {
	roundCorner<<container>> 25
}

node "Datafeed client host" as dataload_client_host <<device>> {
    node "Event generator" as dataload_client_app <<application>>
}

node "User desktop host" as ui_client_host <<device>> {
    node "Web browser" as ui_client_browser <<web browser>>
}

node "Remote stroom-proxy host" as remote_proxy_host <<device>> {
    node "stroom-proxy" as remote_proxy <<application>>
}

rectangle "stroom estate" {
    node "Database host" as database_host <<device>> {
        database stroom_all_dbs <<mysql>> {
            storage "stroom" as stroom_db <<database>>
            storage "stats" as stroom_stats_db <<database>>
        }
    }

    node "Services host" as services_host <<device>> {
        rectangle "nginx" as nginx_container <<container>>{
            node "nginx" as nginx <<web server>>
        }
        rectangle "stroom-log-sender" as stroom_log_sender <<container>>{
            node "stroom-log-sender" as stroom_log_sender_script <<script>>
        }

        stroom_log_sender_script -left-> nginx
    }

    !function $concat($name, $id)
    !return $name + $id
    !endfunction

    ' Procedure to generate a stroom host with links to and from it
    !procedure add_stroom_host($node_id)
        !$host_name=$concat("stroom_host_", $node_id)
        !$stroom_dropwiz_name=$concat("stroom_dropwiz_", $node_id)
        !$stroom_proxy_dropwiz_name=$concat("stroom_proxy_dropwiz_", $node_id)

        node "$concat("stroom host ", $node_id)" as $host_name <<device>> {
            node "$concat("stroom ", $node_id)" as $stroom_dropwiz_name <<java app>>
            node "$concat("stroom-proxy (local) ", $node_id)" as $stroom_proxy_dropwiz_name <<java app>>
        }
        ' Database connections
        $stroom_dropwiz_name - -> stroom_db
        $stroom_dropwiz_name - -> stroom_stats_db
        ' API Gateway connection
        $stroom_dropwiz_name - -> nginx
        $stroom_proxy_dropwiz_name - -> nginx

        'Reverse proxy connections
        nginx - -> $stroom_dropwiz_name
        nginx - -> $stroom_proxy_dropwiz_name
    !endprocedure

    together {
        add_stroom_host("1")
        add_stroom_host("2")
    }
}

'Client connections
ui_client_browser - -> nginx
dataload_client_app - -> nginx
remote_proxy - -> nginx


' see http://plantuml.com/skinparam & https://github.com/plantuml/plantuml/pull/31

'skinparam handwritten true
'skinparam monochrome reverse
'skinparam backgroundColor DimGrey
'skinparam ClassBackgroundColor DimGrey
'skinparam ClassBorderColor WhiteSmoke
'skinparam backgroundColor transparent

' light theme
'skinparam backgroundColor LightGrey
'skinparam ClassBackgroundColor LightGrey
'skinparam ClassBorderColor CornflowerBlue
'skinparam DatabaseBackgroundColor LightGrey
'skinparam DatabaseBorderColor CornflowerBlue

'hide empty members

@enduml

@startuml

title
    ==Stroom multi-node mixed-economy deployment
    Stroom services in Docker
    Stroom and MySQL on bare OS
end title

skinparam rectangle {
	roundCorner<<container>> 25
}

node "Datafeed client host" as dataload_client_host <<device>> {
    node "Event generator" as dataload_client_app <<application>>
}

node "User desktop host" as ui_client_host <<device>> {
    node "Web browser" as ui_client_browser <<web browser>>
}

node "Remote stroom-proxy host" as remote_proxy_host <<device>> {
    node "stroom-proxy" as remote_proxy <<application>>
}

rectangle "stroom estate" {
    node "Database host" as database_host <<device>> {
        database stroom_all_dbs <<mysql>> {
            storage "stroom" as stroom_db <<database>>
            storage "stats" as stroom_stats_db <<database>>
        }
    }

    node "Services host" as services_host <<device>> {
        rectangle "nginx" as nginx_container <<container>>{
            node "nginx" as nginx <<web server>>
        }
        rectangle "stroom-log-sender" as stroom_log_sender <<container>>{
            node "stroom-log-sender" as stroom_log_sender_script <<script>>
        }

        stroom_log_sender_script -left-> nginx
    }



    together {
        
        node "stroom host 1" as stroom_host_1 <<device>> {
            node "stroom 1" as stroom_dropwiz_1 <<java app>>
            node "stroom-proxy (local) 1" as stroom_proxy_dropwiz_1 <<java app>>
        }
        stroom_dropwiz_1 - -> stroom_db
        stroom_dropwiz_1 - -> stroom_stats_db
        stroom_dropwiz_1 - -> nginx
        stroom_proxy_dropwiz_1 - -> nginx

        nginx - -> stroom_dropwiz_1
        nginx - -> stroom_proxy_dropwiz_1
        
        node "stroom host 2" as stroom_host_2 <<device>> {
            node "stroom 2" as stroom_dropwiz_2 <<java app>>
            node "stroom-proxy (local) 2" as stroom_proxy_dropwiz_2 <<java app>>
        }
        stroom_dropwiz_2 - -> stroom_db
        stroom_dropwiz_2 - -> stroom_stats_db
        stroom_dropwiz_2 - -> nginx
        stroom_proxy_dropwiz_2 - -> nginx

        nginx - -> stroom_dropwiz_2
        nginx - -> stroom_proxy_dropwiz_2
    }
}

ui_client_browser - -> nginx
dataload_client_app - -> nginx
remote_proxy - -> nginx






@enduml

PlantUML version 1.2021.5(Sun Apr 25 11:20:28 GMT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>