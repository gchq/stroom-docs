<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.95.0" />
<link rel="canonical" type="text/html" href="../../../../../docs/user-guide/search/queries/">
<meta name="robots" content="noindex, nofollow">


<link rel="canonical" href="../../../../../../">


<link rel="shortcut icon" href="../../../../../favicons/favicon.ico" >
<link rel="apple-touch-icon" href="../../../../../favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="../../../../../favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="../../../../../favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="../../../../../favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="../../../../../favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="../../../../../favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="../../../../../favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="../../../../../favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="../../../../../favicons/android-192x192.png" sizes="192x192">

<title>Query | Stroom</title>
<meta name="description" content="A Query document defines a search query in text form using the Stroom Query Language and displays the results as a table or a visualisation.
">
<meta property="og:title" content="Query" />
<meta property="og:description" content="A Query document defines a search query in text form using the Stroom Query Language and displays the results as a table or a visualisation.
" />
<meta property="og:type" content="website" />
<meta property="og:url" content="/docs/user-guide/search/queries/" /><meta property="og:site_name" content="Stroom" />

<meta itemprop="name" content="Query">
<meta itemprop="description" content="A Query document defines a search query in text form using the Stroom Query Language and displays the results as a table or a visualisation.
"><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Query"/>
<meta name="twitter:description" content="A Query document defines a search query in text form using the Stroom Query Language and displays the results as a table or a visualisation.
"/>




<link rel="preload" href="../../../../../scss/main.min.c9c2acb16647e4c0a24660355bfca96b0ec94226f4c0568ac7b0913f56303345.css" as="style">
<link href="../../../../../scss/main.min.c9c2acb16647e4c0a24660355bfca96b0ec94226f4c0568ac7b0913f56303345.css" rel="stylesheet" integrity="">


<script src='../../../../../js/jquery-3.6.0.min.js'></script>


<script src='../../../../../js/lunr.min.js'></script>
  
<link rel="stylesheet" href="../../../../../css/prism.css"/>
<link rel="stylesheet" href="../../../../../css/stroom-ui/icon-colours.css"/>
<link rel="stylesheet" href="../../../../../css/stroom-ui/material_design_colors.css"/>
<link rel="stylesheet" href="../../../../../css/stroom-ui/theme-root.css"/>
<link rel="stylesheet" href="../../../../../css/stroom-ui/theme-dark.css"/>




  </head>
  <body class="td-section">
    <header>
      <nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
  <a class="navbar-brand" href="../../../../../"><span class="navbar-brand__logo navbar-logo"><svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="110.61089" height="30.000004" viewBox="0 0 88.488641 23.999957" id="svg2" inkscape:version="0.91 r13725" sodipodi:docname="logo.svg"><defs id="defs20"/><sodipodi:namedview pagecolor="#989898" bordercolor="#666666" borderopacity="1" objecttolerance="10" gridtolerance="10" guidetolerance="10" inkscape:pageopacity="0" inkscape:pageshadow="2" inkscape:window-width="1920" inkscape:window-height="1137" id="namedview18" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:zoom="5.5951814" inkscape:cx="55.451414" inkscape:cy="16.275348" inkscape:window-x="0" inkscape:window-y="0" inkscape:window-maximized="1" inkscape:current-layer="svg2"/><g id="g4150" style="opacity:.97000002" transform="matrix(0.03883584,0,0,0.03883584,0,-3.1155874e-4)"><path id="path6" d="M121.99991 205.98497C54.999958 205.98497.0 259.98493.0 327.98487c0 66.99994 54.999958 121.99989 121.99991 121.99989h167.99987c24.99998.0 44.99996 20.99998 44.99996 44.99996.0 24.99998-19.99998 44.99996-44.99996 44.99996H109.20929C65.984126 553.87219 27.100843 581.57313.01093599 617.98462H289.99978c66.99994.0 121.99991-54.99996 121.99991-122.9999.0-66.99994-54.99997-121.99989-121.99991-121.99989H121.99991c-24.999984.0-44.999969-19.99999-44.999969-44.99996.0-24.99998 19.999985-44.99996 44.999969-44.99996h228.79045c26.9905-35.88325 65.47093-63.18547 108.21554-76.99994H121.99991z" style="fill:#fff" inkscape:connector-curvature="0"/><path id="path8" d="M601.44485-.00077860649C572.6583 8.3697982 546.49491 22.822962 524.44491 41.902305V205.78969l.002.19528h-.002c-65.11 48e-5-123.03145 30.0199-160.74675 76.99994h160.74675v334.99971h76.99994V282.98491h144.85298c27.16134-36.05885 65.96411-63.39275 109.02184-76.99994H601.44485v-205.98574860649z" style="fill:#fff" inkscape:connector-curvature="0"/><path id="path10" d="m919.42586 205.98497c-113.99519.0-205.99537 92.00648-206.00296 205.99982-15e-5 68.67178.0 137.32749.0 205.99983h77.99994c-.012-68.6493.0176-137.46869.0-205.99983.0846-70.92785 57.05747-128.99988 128.00462-128.99988 5.28623.0 10.49823.32864 15.62183.95311 18.2219-24.51229 41.78461-45.0838 68.42501-60.15146-25.65065-11.43799-54.08662-17.80159-84.04684-17.80159z" style="fill:#fff" inkscape:connector-curvature="0"/><path id="path12" d="m1109.4153 205.98457c-113.99994.0-205.99983 91.99993-205.99983 205.99984.0 112.9999 91.99989 205.9998 205.99983 205.9998 114 0 205.9999-92.9999 205.9999-205.9998.0-113.99991-91.9999-205.99984-205.9999-205.99984zm0 333.99974c-70.9999.0-128.99994-56.99996-128.99994-127.9999.0-70.99995 58.00004-128.9999 128.99994-128.9999 71 0 128.9999 57.99995 128.9999 128.9999.0 70.99994-57.9999 127.9999-128.9999 127.9999z" style="fill:#fff" inkscape:connector-curvature="0"/><path id="path14" d="m1444.4737 205.98457c-113.9999.0-205.9998 91.99993-205.9998 205.99984.0 112.9999 91.9999 205.9998 205.9998 205.9998s205.9999-92.9999 205.9999-205.9998c0-113.99991-92-205.99984-205.9999-205.99984zm0 333.99974c-70.9999.0-128.9999-56.99996-128.9999-127.9999.0-70.99995 58-128.9999 128.9999-128.9999 71 0 128.9999 57.99995 128.9999 128.9999.0 70.99994-57.9999 127.9999-128.9999 127.9999z" style="fill:#fff" inkscape:connector-curvature="0"/><path id="path16" d="m1738.5308 379.98447c0-53 43-97 95.9999-97 53 0 97 44 97 97v237.9997h76.9999v-237.9997c0-53 43-97 96.9999-97 53 0 95.9999 44 95.9999 97v237.9997h77v-237.9997c0-96-77-173.9999-172.9999-173.9999-54.9999.0-103.9999 24.99998-135.9999 64.99995-31.9999-39.99997-79.9999-64.99995-134.9999-64.99995-95.9999.0-173.9998 77.9999-173.9998 173.9999v237.9997h77.9999z" style="fill:#fff" inkscape:connector-curvature="0"/></g></svg></span><span class="navbar-brand__name">Stroom</span></a>
  <div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
    <ul class="navbar-nav mt-2 mt-lg-0">
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="../../../../../about/about/"><span>About</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link active" href="../../../../../docs/"><span class="active">Documentation</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="../../../../../releases/"><span>Releases Notes</span></a>
      </li>
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link" href="../../../../../community/"><span>Community</span></a>
      </li>
      <li class="nav-item dropdown mr-4 d-none d-lg-block">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	Stroom Version (7.7)
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
	
	
	
	<a class="dropdown-item" href="../../../../../../">7.8 (Latest)</a>
	
	<a class="dropdown-item" href="../../../../../">7.7</a>
	
	<a class="dropdown-item" href="../../../../../../7.6">7.6</a>
	
	<a class="dropdown-item" href="../../../../../../7.5">7.5</a>
	
	<a class="dropdown-item" href="../../../../../../7.4">7.4</a>
	
	<a class="dropdown-item" href="../../../../../../7.3">7.3</a>
	
	<a class="dropdown-item" href="../../../../../../7.2">7.2</a>
	
	<a class="dropdown-item" href="../../../../../../7.1">7.1</a>
	
	<a class="dropdown-item" href="../../../../../../7.0">7.0</a>
	
	<a class="dropdown-item" href="../../../../../../legacy">Legacy</a>
	
</div>
</li>
      </ul>
  </div>
  <div class="navbar-nav d-none d-lg-block">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="../../../../../offline-search-index.706c64d35745fd69887291f516cfc6b3.json"
    data-offline-search-base-href="../../../../../"
    data-offline-search-max-results="50"
  >
</div>

  </div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This is the multi-page printable view of this section.
<a href="#" onclick="print();return false;">Click here to print</a>.
</p><p>
<a href="../../../../../docs/user-guide/search/queries/">Return to the regular view of this page</a>.
</p>
</div>



<h1 class="title">Query</h1>
<div class="lead">A Query document defines a search query in text form using the Stroom Query Language and displays the results as a table or a visualisation.</div>




    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-97b6ae5548e13b85a8f0677d36564595">Stroom Query Language</a></li>


    
  

    </ul>


<div class="content">
      
<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">TODO</h4>

    Complete this section.

</div>


</div>
</div>


  
  
  
  

  
  

  
    
    
	
    



<div class="td-content" style="--base-section-num: '1.'; ">
    
  <h1 id="pg-97b6ae5548e13b85a8f0677d36564595">1 - Stroom Query Language</h1>
    <div class="lead">Stroom Query Language (StroomQL) is a query language for retrieving data in Stroom.</div>
	<!--
!!! IMPORTANT !!!

NOTE:
Stroom has hard coded anchors to link to the keyword headings on this page so don't
change the headings without changing the anchors in Stroom.

!!! IMPORTANT !!!
-->
<h2 id="query-format">Query Format</h2>
<p>Stroom Query Language (StroomQL) is a text based replacement for the existing <span class="glossary-link">
  <a href="../../../../../docs/glossary/#dashboard" title="Glossary entry for Dashboard">
    <span>Dashboard</span>
    <i class="glossary-link-icon fas fa-book fa-sm text-primary"></i>
  </a>
</span> query builder and allows you to express the same queries in text form as well as providing additional functionality.
It is currently used on the <em>Query</em> entity as the means of defining a query.</p>
<p>The following shows the supported syntax for a StroomQL query.</p>
<pre><code class="language-stroomql">from &lt;DATA_SOURCE&gt;
where &lt;FIELD&gt; &lt;CONDITION&gt; &lt;VALUE&gt; [and|or|not]
[and|or|not]
[window] &lt;TIME_FIELD&gt; by &lt;WINDOW_SIZE&gt; [advance &lt;ADVANCE_WINDOW_SIZE&gt;]
[filter] &lt;FIELD&gt; &lt;CONDITION&gt; &lt;VALUE&gt; [and|or|not]
[and|or|not]
[eval...] &lt;FIELD&gt; = &lt;EXPRESSION&gt;
[having] &lt;FIELD&gt; &lt;CONDITION&gt; &lt;VALUE&gt; [and|or|not]
[group by] &lt;FIELD&gt;
[sort by] &lt;FIELD&gt; [desc|asc] // asc by default
[limit] &lt;MAX_ROWS&gt; 
select &lt;FIELD&gt; [as &lt;COLUMN NAME&gt;], ...
[show as] &lt;VIS_NAME&gt; (&lt;VIS_CONTROL_ID_1&gt; = &lt;COLUMN_1&gt;, &lt;VIS_CONTROL_ID_2&gt; = &lt;COLUMN_2&gt;)
</code></pre>
<h2 id="keywords">Keywords</h2>
<h3 id="from">From</h3>
<p>The first part of a StroomQL expression is the <code>from</code> clause that defines the single data source to query.
All queries must include the <code>from</code> clause.</p>
<p>Select the data source to query, e.g.</p>
<pre><code class="language-stroomql">from my_source
</code></pre>
<p>If the name of the data source contains white space then it must be quoted, e.g.</p>
<pre><code class="language-stroomql">from &quot;my source&quot;
</code></pre>
<h3 id="where">Where</h3>
<p>Use <code>where</code> to construct query criteria, e.g.</p>
<pre><code class="language-text">where feed = &quot;my feed&quot;
</code></pre>
<p>Add boolean logic with <code>and</code>, <code>or</code> and <code>not</code> to build complex criteria, e.g.</p>
<pre><code class="language-text">where feed = &quot;my feed&quot;
or feed = &quot;other feed&quot;
</code></pre>
<p>Use brackets to group logical sub expressions, e.g.</p>
<pre><code class="language-text">where user = &quot;bob&quot;
and (feed = &quot;my feed&quot; or feed = &quot;other feed&quot;)
</code></pre>
<h4 id="conditions">Conditions</h4>
<p>Supported conditions are:</p>
<ul>
<li><code>=</code></li>
<li><code>!=</code></li>
<li><code>&gt;</code></li>
<li><code>&gt;=</code></li>
<li><code>&lt;</code></li>
<li><code>&lt;=</code></li>
<li><code>is null</code></li>
<li><code>is not null</code></li>
</ul>
<h4 id="andornot">And|Or|Not</h4>
<p>Logical operators to add to where and filter clauses.</p>
<h4 id="bracket-groups">Bracket groups</h4>
<p>You can force evaluation of items in a specific order using bracketed groups.</p>
<pre><code class="language-stroomql">and X = 5 OR (name = foo and surname = bar)
</code></pre>
<h3 id="window">Window</h3>
<pre><code class="language-stroomql">window &lt;TIME_FIELD&gt; by &lt;WINDOW_SIZE&gt; [advance &lt;ADVANCE_WINDOW_SIZE&gt;]
</code></pre>
<p>Windowing groups data by a specified window size applied to a time field.
A window inserts additional rows for future periods so that rows for future periods contain count columns for previous periods.</p>
<p>Specify the field to window by and a duration.
Durations are specified in simple terms e.g. <code>1d</code>, <code>2w</code> etc.</p>
<p>By default, a window will insert a count into the next period row.
This is because by default we advance by the specified window size.
If you wish to advance by a different duration you can specify the advance amount which will insert counts into multiple future rows.</p>
<h3 id="filter">Filter</h3>
<p>Use <code>filter</code> to filter values that have not been indexed during search retrieval.
This is used the same way as the <code>where</code> clause but applies to data after being retrieved from the index, e.g.</p>
<pre><code class="language-stroomql">filter obscure_field = &quot;some value&quot;
</code></pre>
<p>Add boolean logic with <code>and</code>, <code>or</code> and <code>not</code> to build complex criteria as supported by the <code>where</code> clause.
Use brackets to group logical sub expressions as supported by the <code>where</code> clause.</p>

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Note</h4>


    As filters do not make use of the index they can be considerably slower than a <code>where</code> clause, however they allow filtering on fields that have not been indexed for some reason.
Frequent use of <code>filter</code> on a field suggests you may want to consider including that field in an index.

</div>


<h3 id="eval">Eval</h3>
<p>Use <code>eval</code> to assign the value returned from an <a href="../../../../../docs/reference-section/expressions/">Expression Function</a> to a named variable, e.g.</p>
<pre><code class="language-stroomql">eval my_count = count()
</code></pre>
<p>Here the result of the <code>count()</code> function is being stored in a variable called <code>my_count</code>.
Functions can be nested and applied to variables, e.g.</p>
<pre><code class="language-stroomql">eval new_name = concat(
  substring(name, 3, 5),
  substring(name, 8, 9))
</code></pre>
<p>Note that all fields in the data source selected using <code>from</code> will be available as variables by default.</p>
<p>Multiple <code>eval</code> statements can also be used to breakup complex function expressions and make it easier to comment out individual evaluations, e.g.</p>
<pre><code class="language-stroomql">eval name_prefix = substring(name, 3, 5)
eval name_suffix = substring(name, 8, 9)
eval new_name = concat(
  name_prefix,
  name_suffix)
</code></pre>
<p>Variables can be reused, e.g.</p>
<pre><code class="language-stroomql">eval name_prefix = substring(name, 3, 5)
eval new_name = substring(name, 8, 9)
eval new_name = concat(
  name_prefix,
  new_name)
</code></pre>
<p>In this example, the second assignment of <code>new_name</code> will override the value initially assigned to it.
Note that that when reusing a variable name, the assignment can depend on the previous value assigned to that variable.</p>
<p>Add boolean logic with <code>and</code>, <code>or</code> and <code>not</code> to build complex criteria, e.g.</p>
<pre><code class="language-stroomql">where feed = &quot;my feed&quot; or feed = &quot;other feed&quot;
</code></pre>
<p>Use brackets to group logical sub expressions, e.g.</p>
<pre><code class="language-stroomql">where user = &quot;bob&quot; and (feed = &quot;my feed&quot; or feed = &quot;other feed&quot;)
</code></pre>
<h3 id="having">Having</h3>
<p>A post aggregate filter that is applied at query time to return only rows that match the <code>having</code> conditions.</p>
<pre><code class="language-stroomql">having count &gt; 3
</code></pre>
<h3 id="group-by">Group By</h3>
<p>Use to group by columns, e.g.</p>
<pre><code class="language-stroomql">group by feed
</code></pre>
<p>You can group across multiple columns, e.g.</p>
<pre><code class="language-stroomql">group by feed, name
</code></pre>
<p>You can create nested groups, e.g.</p>
<pre><code class="language-stroomql">group by feed
group by name
</code></pre>
<h3 id="sort-by">Sort By</h3>
<p>Use to sort by columns, e.g.</p>
<pre><code class="language-stroomql">sort by feed
</code></pre>
<p>You can sort across multiple columns, e.g.</p>
<pre><code class="language-stroomql">sort by feed, name
</code></pre>
<p>You can change the sort direction, e.g.</p>
<pre><code class="language-stroomql">sort by feed asc
</code></pre>
<p>Or</p>
<pre><code class="language-stroomql">sort by feed desc
</code></pre>
<h3 id="limit">Limit</h3>
<p>Limit the number of results, e.g.</p>
<pre><code class="language-stroomql">limit 10
</code></pre>
<h3 id="select">Select</h3>
<p>The <code>select</code> keyword is used to define the fields that will be selected out of the data source (and any <code>eval</code>&rsquo;d fields) for display in the table output.</p>
<pre><code class="language-stroomql">select feed, name
</code></pre>
<p>You can optionally rename the fields so that they appear in the table with more human friendly names.</p>
<pre><code class="language-stroomql">select feed as 'my feed column',
  name as 'my name column'
</code></pre>
<h3 id="show">Show</h3>
<p>The <code>show</code> keyword is used to tell StroomQL how to show the data resulting from the <code>select</code>.
A Stroom visualisation can be specified and then passed column values from the <code>select</code> for the visualisation control properties.</p>
<pre><code class="language-stroomql">show LineChart(x = EventTime, y = count)
show Doughnut(names = Feed, values = count)
</code></pre>
<p>For visualisations that contain spaces in their names it is necessary to use quotes, e.g.</p>
<pre><code class="language-stroomql">show &quot;My Visualisation&quot; (x = EventTime, y = count)
</code></pre>
<h2 id="comments">Comments</h2>
<h3 id="single-line">Single line</h3>
<p>StroomQL supports single line comments using <code>//</code>.
For example:</p>
<pre><code class="language-stroomql">from &quot;index_view&quot; // view
where EventTime &gt; now() - 1227d
// and StreamId = 1210
select StreamId as &quot;Stream Id&quot;, EventTime as &quot;Event Time&quot;
</code></pre>
<h3 id="multi-line">Multi line</h3>
<p>Multiple lines can be commented by surrounding sections with <code>/*</code> and <code>*/</code>.
For example:</p>
<pre><code class="language-stroomql">from &quot;index_view&quot; // view
where EventTime &gt; now() - 1227d
/*
eval FirstName = lowerCase(substringBefore(UserId, '.'))
eval FirstName = any(FirstName)
*/
select StreamId as &quot;Stream Id&quot;, EventTime as &quot;Event Time&quot;
</code></pre>
<h2 id="examples">Examples</h2>
<p>The following are various example queries.</p>
<pre><code class="language-stroomql">// add a where
from &quot;index_view&quot; // view
where EventTime &gt; now() - 1227d
// and StreamId = 1210
eval UserId = any(upperCase(UserId))
eval FirstName = lowerCase(substringBefore(UserId, '.'))
eval FirstName = any(FirstName)
eval Sl = stringLength(FirstName)
eval count = count()
group by StreamId
sort by Sl desc
select Sl, StreamId as &quot;Stream Id&quot;, EventId as &quot;Event Id&quot;, EventTime as &quot;Event Time&quot;, UserId as &quot;User Id&quot;, FirstName, count
limit 10
</code></pre>
<pre><code class="language-stroomql">from &quot;index_view&quot; // view
// add a where
where EventTime &gt; now() - 1227d
// and StreamId = 1210
eval UserId = any(upperCase(UserId))
eval FirstName = lowerCase(substringBefore(UserId, '.'))
eval FirstName = any(FirstName)
eval Sl = stringLength(FirstName)
eval count = count()
group by StreamId
sort by Sl desc
select Sl, StreamId as &quot;Stream Id&quot;, EventId as &quot;Event Id&quot;, EventTime as &quot;Event Time&quot;, UserId as &quot;User Id&quot;, FirstName, count
limit 10
</code></pre>
<pre><code class="language-stroomql">from &quot;index_view&quot; // view
// add a where
where EventTime &gt; now() - 1227d
// and StreamId = 1210
eval UserId = any(upperCase(UserId))
eval FirstName = lowerCase(substringBefore(UserId, '.'))
eval FirstName = any(FirstName)
eval Sl = stringLength(FirstName)
// eval count = count()
// group by StreamId
// sort by Sl desc
select StreamId as &quot;Stream Id&quot;, EventId as &quot;Event Id&quot;
// limit 10
</code></pre>
<pre><code class="language-stroomql">from &quot;index_view&quot; // view
// add a where
where EventTime &gt; now() - 1227d
// and StreamId = 1210
eval UserId = any(upperCase(UserId))
eval FirstName = lowerCase(substringBefore(UserId, '.'))
eval FirstName = any(FirstName)
eval Sl = stringLength(FirstName)
eval count = count()
group by StreamId
sort by Sl desc
select Sl, StreamId as &quot;Stream Id&quot;, EventId as &quot;Event Id&quot;, EventTime as &quot;Event Time&quot;, UserId as &quot;User Id&quot;, FirstName, count
limit 10
</code></pre>

</div>




    
	
  



          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/gchq/stroom" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2025 Crown Copyright All Rights Reserved</small>
        
	
      </div>
    </div>
  </div>
</footer>


    </div>
    

<script src='../../../../../js/popper.min.js'></script>
<script src='../../../../../js/bootstrap.min.js'></script>






<script src='../../../../../js/tabpane-persist.js'></script>




















<script src="../../../../../js/main.min.cbc1d428d83561c4dec32da9374290554119d7483329f849251cb7153b2ecd07.js" integrity="sha256-y8HUKNg1YcTewy2pN0KQVUEZ10gzKfhJJRy3FTsuzQc=" crossorigin="anonymous"></script>



<script src='../../../../../js/prism.js'></script>



  </body>
</html>
