<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Stroom â€“ docker</title>
    <link>/tags/docker/</link>
    <description>Recent content in docker on Stroom</description>
    <generator>Hugo -- gohugo.io</generator>
    <lastBuildDate>Fri, 20 Aug 2021 00:00:00 +0000</lastBuildDate>
    
	  <atom:link href="/tags/docker/index.xml" rel="self" type="application/rss+xml" />
    
    
      
        
      
    
    
    <item>
      <title>Docs: Running with docker</title>
      <link>/docs/proxy/docker/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>/docs/proxy/docker/</guid>
      <description>
        
        
        
&lt;div class=&#34;alert alert-warning&#34; role=&#34;alert&#34;&gt;
&lt;h4 class=&#34;alert-heading&#34;&gt;TODO&lt;/h4&gt;

    This document is out of date and needs updating to refer to the stroom-proxy docker stack.

&lt;/div&gt;

&lt;h2 id=&#34;clone-and-build-_stroom-proxy_&#34;&gt;Clone and build &lt;em&gt;stroom-proxy&lt;/em&gt;&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;git clone https://github.com/gchq/stroom-proxy.git
mvn clean install
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;unpack-the-stroom-proxy-distribution-in-preparation-for-building-the-docker-iamge&#34;&gt;Unpack the &lt;code&gt;stroom-proxy&lt;/code&gt; distribution in preparation for building the docker iamge&lt;/h2&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;cd stroom-proxy-distribution
unzip target/stroom-proxy-distribution-&amp;lt;version&amp;gt;-bin.zip -d target
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;building-and-running-the-docker-image&#34;&gt;Building and running the docker image&lt;/h2&gt;
&lt;p&gt;Here you need to say where you want data to be sent by &lt;code&gt;stroom-proxy&lt;/code&gt;.
This is done using a &lt;a href=&#34;https://docs.docker.com/engine/reference/commandline/build/#/set-build-time-variables-build-arg&#34;&gt;&lt;code&gt;--build-arg&lt;/code&gt; (external link)&lt;/a&gt; parameter of &lt;code&gt;STROOM_PROXY_TYPE&lt;/code&gt;.
These values can be &lt;code&gt;forward&lt;/code&gt;, &lt;code&gt;store&lt;/code&gt;, or &lt;code&gt;store_nodb&lt;/code&gt;. See the &lt;em&gt;stroom-proxy&lt;/em&gt; section in the &lt;a href=&#34;https://github.com/gchq/stroom-docs/blob/master/SUMMARY.md&#34;&gt;stroom documentation (external link)&lt;/a&gt; documentation for more details about these options.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;docker stop stroom-proxy
docker rm stroom-proxy
docker rmi stroom-proxy

docker build --build-arg STROOM_PROXY_TYPE=store_nodb --tag=stroom-proxy:latest target/stroom-proxy
docker run -p 8080:8080 --name=stroom-proxy stroom-proxy
&lt;/code&gt;&lt;/pre&gt;

      </description>
    </item>
    
    <item>
      <title>Community: Running in Docker</title>
      <link>/community/dev-guide/docker-running/</link>
      <pubDate>Fri, 20 Aug 2021 00:00:00 +0000</pubDate>
      
      <guid>/community/dev-guide/docker-running/</guid>
      <description>
        
        
        &lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;NOTE&lt;/em&gt;: The published docker images are intended for small scale testing or evaluation purposes and are currently un-tested in a production environment.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;stroom-v6x-release&#34;&gt;Stroom v6.x release&lt;/h2&gt;
&lt;h3 id=&#34;prerequisites&#34;&gt;Prerequisites&lt;/h3&gt;
&lt;p&gt;In order to run Stroom v6.x using Docker you will need the following installed on the machine you intend to run Stroom on:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A Linux-like shell environment.&lt;/li&gt;
&lt;li&gt;docker CE (v17.12.0+) - e.g &lt;a href=&#34;https://docs.docker.com/install/linux/docker-ce/centos/&#34;&gt;docs.docker.com/install/linux/docker-ce/centos/ (external link)&lt;/a&gt; for Centos&lt;/li&gt;
&lt;li&gt;docker-compose (v1.21.0+) - &lt;a href=&#34;https://docs.docker.com/compose/install/&#34;&gt;docs.docker.com/compose/install/ (external link)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;bash (v4+)&lt;/li&gt;
&lt;li&gt;jq - &lt;a href=&#34;https://stedolan.github.io/jq/&#34;&gt;stedolan.github.io/jq/ (external link)&lt;/a&gt; e.g. &lt;code&gt;sudo yum install jq&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;curl&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;install-steps&#34;&gt;Install steps&lt;/h3&gt;
&lt;p&gt;This will install the core stack (Stroom and the peripheral services required to run Stroom).&lt;/p&gt;
&lt;p&gt;Visit &lt;a href=&#34;https://github.com/gchq/stroom-resources/releases&#34;&gt;stroom-resources/releases (external link)&lt;/a&gt; and find the latest stroom_core release and copy the link to the associated &lt;code&gt;stroom_core*.tar.gz&lt;/code&gt; archive file.&lt;/p&gt;
&lt;p&gt;Using &lt;code&gt;stroom_core-v6.0.19&lt;/code&gt; as an example:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;# Set the release version to download
export STROOM_STACK_VER=&amp;quot;stroom_core-v6.0.19&amp;quot;

# Make the stack directory
mkdir ${STROOM_STACK_VER}

# Download and extract the Stroom stack into the directory stroom_core-vX.Y.Z
curl -sL https://github.com/gchq/stroom-resources/releases/download/${STROOM_STACK_VER}/${STROOM_STACK_VER}.tar.gz | tar xz -C ${STROOM_STACK_VER}

# Navigate into the new stack directory, where xxxx is the directory that has just been created
cd ${STROOM_STACK_VER}

# Start the stack
./start.sh
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Alternatively if you understand the risks of redirecting web sourced content direct to bash, you can get the latest release using:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;# Download and extract the Stroom stack
bash &amp;lt;(curl -s https://gchq.github.io/stroom-resources/get_stroom.sh)

# Navigate into the new stack directory
cd stroom_core_test/stroom_core_test*

# Start the stack
./start.sh
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;On first run stroom will build the database schemas so this can take a minute or two.
The &lt;code&gt;start.sh&lt;/code&gt; script will provide details of the various URLs that are available.&lt;/p&gt;
&lt;p&gt;Open a browser (preferably Chrome) at &lt;a href=&#34;https://localhost/stroom&#34;&gt;https://localhost/stroom&lt;/a&gt; and login with:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;username: &lt;em&gt;admin&lt;/em&gt; (NOT an email address)&lt;/li&gt;
&lt;li&gt;password: &lt;em&gt;admin&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The stroom stack comes supplied with self-signed certificates so you may need to accept a prompt warning you about visiting an untrusted site.&lt;/p&gt;
&lt;h2 id=&#34;stroom-v5x-release&#34;&gt;Stroom v5.x release&lt;/h2&gt;
&lt;h3 id=&#34;prerequisites-1&#34;&gt;Prerequisites&lt;/h3&gt;
&lt;p&gt;In order to run Stroom v5.x using Docker you will need the following installed on the machine you intend to run Stroom on:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A Linux-like shell environment with bash and GNU sed/grep&lt;/li&gt;
&lt;li&gt;docker CE (v17.12.0+)&lt;/li&gt;
&lt;li&gt;docker-compose (v1.21.0+)&lt;/li&gt;
&lt;li&gt;git&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;install-steps-1&#34;&gt;Install steps&lt;/h3&gt;
&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;# Clone the stroom-resources git repository
git clone https://github.com/gchq/stroom-resources.git

# Navigate to the bin directory in the repository
cd stroom-resources/bin

# Start the stroom v5.x stack using docker/docker-compose
./bounceIt.sh -f env/stroom5.env
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Open a browser (preferably Chrome) at &lt;a href=&#34;http://localhost:8080/stroom&#34;&gt;http://localhost:8080/stroom&lt;/a&gt; and login with:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;username: &lt;em&gt;admin&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;password: &lt;em&gt;admin&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;docker-hub-links&#34;&gt;Docker Hub links&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://hub.docker.com/r/gchq/stroom/&#34;&gt;The Stroom image (external link)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://hub.docker.com/r/gchq/&#34;&gt;The GCHQ organisation (external link)&lt;/a&gt;&lt;/p&gt;

      </description>
    </item>
    
  </channel>
</rss>
