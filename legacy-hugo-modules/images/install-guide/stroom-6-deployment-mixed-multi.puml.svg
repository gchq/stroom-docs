<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="957px" preserveAspectRatio="none" style="width:1514px;height:957px;" version="1.1" viewBox="0 0 1514 957" width="1514px" zoomAndPan="magnify"><defs><filter height="300%" id="f1xy2ni32oqgtd" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="20" font-weight="bold" lengthAdjust="spacing" textLength="465" x="518" y="18.5645">Stroom multi-node mixed-economy deployment</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="213" x="644" y="39.9893">Stroom services in Docker</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="253" x="624" y="60.9424">Stroom and MySQL on bare OS</text><!--MD5=[def129ecf8b93bb9f2bc263fad41ae57]
cluster dataload_client_host--><polygon fill="#FFFFFF" filter="url(#f1xy2ni32oqgtd)" points="16,81.1875,26,71.1875,234,71.1875,234,196.1875,224,206.1875,16,206.1875,16,81.1875" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="224" x2="234" y1="81.1875" y2="71.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="16" x2="224" y1="81.1875" y2="81.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="224" x2="224" y1="81.1875" y2="206.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="56" x="93" y="97.1826">«device»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="142" x="50" y="113.4795">Datafeed client host</text><!--MD5=[4679e25ee70b82600e0c6d263a8629f1]
cluster ui_client_host--><polygon fill="#FFFFFF" filter="url(#f1xy2ni32oqgtd)" points="258,81.1875,268,71.1875,462,71.1875,462,196.1875,452,206.1875,258,206.1875,258,81.1875" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="452" x2="462" y1="81.1875" y2="71.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="258" x2="452" y1="81.1875" y2="81.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="452" x2="452" y1="81.1875" y2="206.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="56" x="328" y="97.1826">«device»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="128" x="292" y="113.4795">User desktop host</text><!--MD5=[e0722ec75e78acc1feffbca00d4db014]
cluster remote_proxy_host--><polygon fill="#FFFFFF" filter="url(#f1xy2ni32oqgtd)" points="486,81.1875,496,71.1875,754,71.1875,754,196.1875,744,206.1875,486,206.1875,486,81.1875" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="744" x2="754" y1="81.1875" y2="71.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="486" x2="744" y1="81.1875" y2="81.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="744" x2="744" y1="81.1875" y2="206.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="56" x="588" y="97.1826">«device»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="192" x="520" y="113.4795">Remote stroom-proxy host</text><!--MD5=[bf51939d10c4f1fcb727a44d3ddbdd25]
cluster stroom estate--><rect fill="#FFFFFF" filter="url(#f1xy2ni32oqgtd)" height="715" style="stroke:#000000;stroke-width:1.5;" width="1330" x="172" y="230.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="101" x="786.5" y="245.1826">stroom estate</text><!--MD5=[f133b3541ec109ea0783d31693d76c14]
cluster database_host--><polygon fill="#FFFFFF" filter="url(#f1xy2ni32oqgtd)" points="796,708.1875,806,698.1875,1220,698.1875,1220,911.1875,1210,921.1875,796,921.1875,796,708.1875" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="1210" x2="1220" y1="708.1875" y2="698.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="796" x2="1210" y1="708.1875" y2="708.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="1210" x2="1210" y1="708.1875" y2="921.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="56" x="976" y="724.1826">«device»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="101" x="953.5" y="740.4795">Database host</text><!--MD5=[fa6e3a9222af9f8270524df4a8c73c70]
cluster stroom_all_dbs--><path d="M820,772.1875 C820,762.1875 1008,762.1875 1008,762.1875 C1008,762.1875 1196,762.1875 1196,772.1875 L1196,887.1875 C1196,897.1875 1008,897.1875 1008,897.1875 C1008,897.1875 820,897.1875 820,887.1875 L820,772.1875 " fill="#FFFFFF" filter="url(#f1xy2ni32oqgtd)" style="stroke:#000000;stroke-width:1.5;"/><path d="M820,772.1875 C820,782.1875 1008,782.1875 1008,782.1875 C1008,782.1875 1196,782.1875 1196,772.1875 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="53" x="981.5" y="797.1826">«mysql»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="105" x="955.5" y="813.4795">stroom_all_dbs</text><!--MD5=[195d2cdec816e20a1a7830c0d281c5ee]
cluster services_host--><polygon fill="#FFFFFF" filter="url(#f1xy2ni32oqgtd)" points="196,283.1875,206,273.1875,676,273.1875,676,664.1875,666,674.1875,196,674.1875,196,283.1875" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="666" x2="676" y1="283.1875" y2="273.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="196" x2="666" y1="283.1875" y2="283.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="666" x2="666" y1="283.1875" y2="674.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="56" x="404" y="299.1826">«device»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="91" x="386.5" y="315.4795">Services host</text><!--MD5=[863c31b5ce76f6887dd79aa52361fc86]
cluster nginx_container--><rect fill="#FFFFFF" filter="url(#f1xy2ni32oqgtd)" height="130" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="156" x="282" y="337.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="74" x="323" y="352.1826">«container»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="38" x="341" y="368.4795">nginx</text><!--MD5=[14465af7a6dd5c0d84ece8761052b4b7]
cluster stroom_auth_ui_container--><rect fill="#FFFFFF" filter="url(#f1xy2ni32oqgtd)" height="130" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="206" x="220" y="520.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="74" x="286" y="535.1826">«container»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="108" x="269" y="551.4795">stroom-auth-ui</text><!--MD5=[231d094088db2839ee1c0ea4581f5319]
cluster stroom_auth_service_container--><rect fill="#FFFFFF" filter="url(#f1xy2ni32oqgtd)" height="130" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="202" x="450" y="520.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="74" x="514" y="535.1826">«container»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="143" x="479.5" y="551.4795">stroom-auth-service</text><!--MD5=[345bc6a4946eb22f9ca28fd33c76f1ab]
cluster stroom_log_sender--><rect fill="#FFFFFF" filter="url(#f1xy2ni32oqgtd)" height="130" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:1.5;" width="190" x="462" y="337.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="74" x="520" y="352.1826">«container»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="130" x="492" y="368.4795">stroom-log-sender</text><!--MD5=[b6e9c5df923136c74b5790a212830ba5]
cluster stroom_host_1--><polygon fill="#FFFFFF" filter="url(#f1xy2ni32oqgtd)" points="724,525.1875,734,515.1875,1077,515.1875,1077,640.1875,1067,650.1875,724,650.1875,724,525.1875" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="1067" x2="1077" y1="525.1875" y2="515.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="724" x2="1067" y1="525.1875" y2="525.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="1067" x2="1067" y1="525.1875" y2="650.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="56" x="868.5" y="541.1826">«device»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="100" x="846.5" y="557.4795">stroom host 1</text><!--MD5=[1311e76a0ecc9ed514e2936f276bb07a]
cluster stroom_host_2--><polygon fill="#FFFFFF" filter="url(#f1xy2ni32oqgtd)" points="1101,525.1875,1111,515.1875,1454,515.1875,1454,640.1875,1444,650.1875,1101,650.1875,1101,525.1875" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="1444" x2="1454" y1="525.1875" y2="515.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="1101" x2="1444" y1="525.1875" y2="525.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="1444" x2="1444" y1="525.1875" y2="650.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="56" x="1245.5" y="541.1826">«device»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="100" x="1223.5" y="557.4795">stroom host 2</text><!--MD5=[960860b3b3295bcd1d432a531990153b]
entity dataload_client_app--><polygon fill="#FEFECE" filter="url(#f1xy2ni32oqgtd)" points="78,137.1875,88,127.1875,218,127.1875,218,179.7813,208,189.7813,78,189.7813,78,137.1875" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="208" x2="218" y1="137.1875" y2="127.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="78" x2="208" y1="137.1875" y2="137.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="208" x2="208" y1="137.1875" y2="189.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="84" x="101" y="160.1826">«application»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100" x="93" y="176.4795">Event generator</text><!--MD5=[3677200128df26b0ab79a654f7c368fe]
entity ui_client_browser--><polygon fill="#FEFECE" filter="url(#f1xy2ni32oqgtd)" points="292.5,137.1875,302.5,127.1875,427.5,127.1875,427.5,179.7813,417.5,189.7813,292.5,189.7813,292.5,137.1875" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="417.5" x2="427.5" y1="137.1875" y2="127.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="292.5" x2="417.5" y1="137.1875" y2="137.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="417.5" x2="417.5" y1="137.1875" y2="189.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="95" x="307.5" y="160.1826">«web browser»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="313" y="176.4795">Web browser</text><!--MD5=[fe6f05c8cee4bc5bf69b8554e9ede833]
entity remote_proxy--><polygon fill="#FEFECE" filter="url(#f1xy2ni32oqgtd)" points="502,137.1875,512,127.1875,628,127.1875,628,179.7813,618,189.7813,502,189.7813,502,137.1875" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="618" x2="628" y1="137.1875" y2="127.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="502" x2="618" y1="137.1875" y2="137.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="618" x2="618" y1="137.1875" y2="189.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="84" x="518" y="160.1826">«application»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="517" y="176.4795">stroom-proxy</text><!--MD5=[40b2f2205cc740157f5e31447dce3a90]
entity stroom_db--><rect fill="#FEFECE" filter="url(#f1xy2ni32oqgtd)" height="52.5938" rx="35" ry="35" style="stroke:#000000;stroke-width:1.5;" width="91" x="1088.5" y="828.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="71" x="1098.5" y="851.1826">«database»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46" x="1111" y="867.4795">stroom</text><!--MD5=[4556cb27c697ea38b95df37aa8ac3618]
entity stroom_stats_db--><rect fill="#FEFECE" filter="url(#f1xy2ni32oqgtd)" height="52.5938" rx="35" ry="35" style="stroke:#000000;stroke-width:1.5;" width="91" x="962.5" y="828.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="71" x="972.5" y="851.1826">«database»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="992.5" y="867.4795">stats</text><!--MD5=[3b81d93e285c59cc92c49b55358c67ba]
entity stroom_auth_db--><rect fill="#FEFECE" filter="url(#f1xy2ni32oqgtd)" height="52.5938" rx="35" ry="35" style="stroke:#000000;stroke-width:1.5;" width="91" x="836.5" y="828.1875"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="71" x="846.5" y="851.1826">«database»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="868" y="867.4795">auth</text><!--MD5=[8824c66cba45be527cf3dd56bcd70cd2]
entity nginx--><polygon fill="#FEFECE" filter="url(#f1xy2ni32oqgtd)" points="298,398.1875,308,388.1875,422,388.1875,422,440.7813,412,450.7813,298,450.7813,298,398.1875" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="412" x2="422" y1="398.1875" y2="388.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="298" x2="412" y1="398.1875" y2="398.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="412" x2="412" y1="398.1875" y2="450.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="84" x="313" y="421.1826">«web server»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="34" x="338" y="437.4795">nginx</text><!--MD5=[ce712441c445748376048ba9369e1787]
entity stroom_auth_ui_nginx--><polygon fill="#FEFECE" filter="url(#f1xy2ni32oqgtd)" points="236,581.1875,246,571.1875,410,571.1875,410,623.7813,400,633.7813,236,633.7813,236,581.1875" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="400" x2="410" y1="581.1875" y2="571.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="236" x2="400" y1="581.1875" y2="581.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="400" x2="400" y1="581.1875" y2="633.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="84" x="276" y="604.1826">«web server»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134" x="251" y="620.4795">stroom-auth-ui nginx</text><!--MD5=[4d35d13dc2ac8356870cbe0936c1d7d9]
entity stroom_auth_service_dropwiz--><polygon fill="#FEFECE" filter="url(#f1xy2ni32oqgtd)" points="466,581.1875,476,571.1875,636,571.1875,636,623.7813,626,633.7813,466,633.7813,466,581.1875" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="626" x2="636" y1="581.1875" y2="571.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="466" x2="626" y1="581.1875" y2="581.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="626" x2="626" y1="581.1875" y2="633.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="66" x="513" y="604.1826">«java app»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="481" y="620.4795">stroom-auth-service</text><!--MD5=[c3d424efc77a9e66034b64d0570dbfed]
entity stroom_log_sender_script--><polygon fill="#FEFECE" filter="url(#f1xy2ni32oqgtd)" points="477.5,398.1875,487.5,388.1875,636.5,388.1875,636.5,440.7813,626.5,450.7813,477.5,450.7813,477.5,398.1875" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="626.5" x2="636.5" y1="398.1875" y2="388.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="477.5" x2="626.5" y1="398.1875" y2="398.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="626.5" x2="626.5" y1="398.1875" y2="450.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="50" x="527" y="421.1826">«script»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="492.5" y="437.4795">stroom-log-sender</text><!--MD5=[7348dbccfd296b39c57cc036970031d5]
entity stroom_dropwiz_1--><polygon fill="#FEFECE" filter="url(#f1xy2ni32oqgtd)" points="955,581.1875,965,571.1875,1061,571.1875,1061,623.7813,1051,633.7813,955,633.7813,955,581.1875" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="1051" x2="1061" y1="581.1875" y2="571.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="955" x2="1051" y1="581.1875" y2="581.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="1051" x2="1051" y1="581.1875" y2="633.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="66" x="970" y="604.1826">«java app»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="974" y="620.4795">stroom 1</text><!--MD5=[0d65a96a535db829811924313787c96b]
entity stroom_proxy_dropwiz_1--><polygon fill="#FEFECE" filter="url(#f1xy2ni32oqgtd)" points="740,581.1875,750,571.1875,920,571.1875,920,623.7813,910,633.7813,740,633.7813,740,581.1875" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="910" x2="920" y1="581.1875" y2="571.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="740" x2="910" y1="581.1875" y2="581.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="910" x2="910" y1="581.1875" y2="633.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="66" x="792" y="604.1826">«java app»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="755" y="620.4795">stroom-proxy (local) 1</text><!--MD5=[07687b78d9b28c498e37c90c82585ae2]
entity stroom_dropwiz_2--><polygon fill="#FEFECE" filter="url(#f1xy2ni32oqgtd)" points="1332,581.1875,1342,571.1875,1438,571.1875,1438,623.7813,1428,633.7813,1332,633.7813,1332,581.1875" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="1428" x2="1438" y1="581.1875" y2="571.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="1332" x2="1428" y1="581.1875" y2="581.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="1428" x2="1428" y1="581.1875" y2="633.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="66" x="1347" y="604.1826">«java app»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="1351" y="620.4795">stroom 2</text><!--MD5=[9126977c1e98cd30bf07cef64368930f]
entity stroom_proxy_dropwiz_2--><polygon fill="#FEFECE" filter="url(#f1xy2ni32oqgtd)" points="1117,581.1875,1127,571.1875,1297,571.1875,1297,623.7813,1287,633.7813,1117,633.7813,1117,581.1875" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="1287" x2="1297" y1="581.1875" y2="571.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="1117" x2="1287" y1="581.1875" y2="581.1875"/><line style="stroke:#000000;stroke-width:1.5;" x1="1287" x2="1287" y1="581.1875" y2="633.7813"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="66" x="1169" y="604.1826">«java app»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="1132" y="620.4795">stroom-proxy (local) 2</text><!--MD5=[c8e6ec0f1f08878e82bbe399425a6179]
reverse link nginx to stroom_log_sender_script--><path d="M427.49,419.6875 C444.09,419.6875 460.7,419.6875 477.3,419.6875 " fill="none" id="nginx-backto-stroom_log_sender_script" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="422.33,419.6875,431.33,423.6875,427.33,419.6875,431.33,415.6875,422.33,419.6875" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[2b218a937bc6dcbd5da1e7dcb99a6233]
link stroom_dropwiz_1 to stroom_db--><path d="M1033.42,634.4075 C1045.83,650.3775 1060.34,670.6075 1071,690.1875 C1095.06,734.3675 1114.32,789.6975 1124.95,823.3275 " fill="none" id="stroom_dropwiz_1-to-stroom_db" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1126.45,828.1375,1127.5668,818.3522,1124.9505,823.3676,1119.935,820.7514,1126.45,828.1375" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[b2364f98472bae29370776dc37711681]
link stroom_dropwiz_1 to stroom_stats_db--><path d="M1008,634.3375 C1008,682.3975 1008,774.9275 1008,823.0075 " fill="none" id="stroom_dropwiz_1-to-stroom_stats_db" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1008,828.0775,1012,819.0775,1008,823.0775,1004,819.0775,1008,828.0775" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[f78e66d3b6beed3a5e2a16e1ee9bf197]
link stroom_dropwiz_1 to nginx--><path d="M1013.14,570.9675 C1007.53,542.6075 988.53,502.1175 956,483.1875 C933.14,469.8875 505.6,481.8275 480,475.1875 C462.06,470.5375 443.79,462.1475 426.92,453.3275 " fill="none" id="stroom_dropwiz_1-to-nginx" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="422.2,450.8375,428.2941,458.5746,426.6224,453.1704,432.0266,451.4987,422.2,450.8375" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[2c903cf26beb5a859e93c4ed7dec4192]
link nginx to stroom_dropwiz_1--><path d="M390.31,451.4075 C406.15,460.9175 425.76,470.1975 445,475.1875 C470.6,481.8275 898.14,469.8875 921,483.1875 C951.75,501.0775 970.41,538.2475 983.98,566.2075 " fill="none" id="nginx-to-stroom_dropwiz_1" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="986.29,570.9675,985.9559,561.1243,984.1055,566.47,978.7598,564.6195,986.29,570.9675" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[1d7339ce63627be475407e048f1833f6]
link stroom_proxy_dropwiz_1 to nginx--><path d="M810.28,571.1375 C780.85,542.4875 725.95,501.3975 670,483.1875 C629.82,470.1075 520.77,486.3175 480,475.1875 C462.03,470.2875 443.69,461.7775 426.75,452.9175 " fill="none" id="stroom_proxy_dropwiz_1-to-nginx" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="422.01,450.4175,428.0845,458.17,426.4265,452.7615,431.8349,451.1036,422.01,450.4175" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[0d1a0c058e7a5dcf1377a2f6eb3afbb9]
link nginx to stroom_proxy_dropwiz_1--><path d="M390.86,451.4275 C406.62,460.8075 426.02,470.0075 445,475.1875 C485.77,486.3175 594.82,470.1075 635,483.1875 C688.99,500.7575 741.99,539.6275 779.55,568.0775 " fill="none" id="nginx-to-stroom_proxy_dropwiz_1" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="783.59,571.1375,778.8441,562.5075,779.6089,568.1124,774.004,568.8773,783.59,571.1375" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[4de599bf04c067523d365b3875260a43]
link stroom_dropwiz_2 to stroom_db--><path d="M1358.66,634.4275 C1345.78,649.1375 1329.88,666.8575 1315,682.1875 C1264.83,733.8975 1203.39,790.8575 1166.54,824.3875 " fill="none" id="stroom_dropwiz_2-to-stroom_db" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1162.61,827.9575,1171.9566,824.8524,1166.3058,824.5899,1166.5684,818.9391,1162.61,827.9575" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[a0ce56e84f4135fdad3c809553915be9]
link stroom_dropwiz_2 to stroom_stats_db--><path d="M1366.73,634.3075 C1354.49,651.7275 1336.67,672.0475 1315,682.1875 C1290.43,693.6875 1093.11,674.4775 1071,690.1875 C1028.05,720.7175 1014.38,784.7875 1010.03,823.0375 " fill="none" id="stroom_dropwiz_2-to-stroom_stats_db" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1009.5,828.0275,1014.4291,819.5008,1010.0286,823.0555,1006.474,818.655,1009.5,828.0275" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[aaad674ff378220d3deca998a5b06f50]
link stroom_dropwiz_2 to nginx--><path d="M1390.22,571.1775 C1384.7,542.7675 1365.7,502.0575 1333,483.1875 C1312.48,471.3475 502.96,481.0475 480,475.1875 C462.04,470.5975 443.77,462.2375 426.9,453.4075 " fill="none" id="stroom_dropwiz_2-to-nginx" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="422.18,450.9175,428.2545,458.67,426.5965,453.2615,432.0049,451.6036,422.18,450.9175" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[6a3efcefb64b4321d1f93b3fbd1f2bbe]
link nginx to stroom_dropwiz_2--><path d="M389.81,451.1975 C405.73,460.8175 425.55,470.2175 445,475.1875 C467.96,481.0475 1277.48,471.3475 1298,483.1875 C1328.91,501.0275 1347.58,538.3875 1361.15,566.4175 " fill="none" id="nginx-to-stroom_dropwiz_2" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1363.45,571.1775,1363.1412,561.3335,1361.2771,566.6744,1355.9362,564.8102,1363.45,571.1775" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[2ba3c2a4067737df443a3a32e104d17d]
link stroom_proxy_dropwiz_2 to nginx--><path d="M1198.11,570.9475 C1179.13,542.1575 1140.02,500.9675 1095,483.1875 C1063.22,470.6375 513.09,483.7075 480,475.1875 C462.05,470.5675 443.78,462.1975 426.91,453.3675 " fill="none" id="stroom_proxy_dropwiz_2-to-nginx" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="422.19,450.8775,428.2645,458.63,426.6065,453.2215,432.0149,451.5636,422.19,450.8775" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[670a5d9018c7aba5bc453f9321f040dd]
link nginx to stroom_proxy_dropwiz_2--><path d="M390.3,451.4475 C406.13,460.9575 425.75,470.2375 445,475.1875 C478.09,483.7075 1028.22,470.6375 1060,483.1875 C1103.09,500.1975 1140.76,538.6575 1167.84,567.1675 " fill="none" id="nginx-to-stroom_proxy_dropwiz_2" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1171.42,570.9475,1168.127,561.6655,1167.9785,567.3204,1162.3236,567.1719,1171.42,570.9475" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[933c8918fff6242c0a2d1d5b74e9d808]
link stroom_auth_service_dropwiz to stroom_auth_db--><path d="M591.59,634.3375 C656.11,683.0775 781.21,777.5675 844.05,825.0175 " fill="none" id="stroom_auth_service_dropwiz-to-stroom_auth_db" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="848.09,828.0775,843.3245,819.4584,844.102,825.0615,838.4989,825.8391,848.09,828.0775" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[989ef6e3dbf0f2cd69ae14acc8487b5d]
link ui_client_browser to nginx--><path d="M360,190.4175 C360,238.6075 360,331.7275 360,382.8775 " fill="none" id="ui_client_browser-to-nginx" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="360,387.9975,364,378.9975,360,382.9975,356,378.9975,360,387.9975" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[a4e1cfae1c63071152643add18806a87]
link dataload_client_app to nginx--><path d="M173.15,190.4175 C212.92,238.9975 290.06,333.2375 331.7,384.1175 " fill="none" id="dataload_client_app-to-nginx" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="334.88,387.9975,332.271,378.5005,331.7115,384.1296,326.0824,383.5701,334.88,387.9975" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[fb1d713660c745da3a71d8c4842aab4b]
link remote_proxy to nginx--><path d="M502.37,190.1975 C487.96,199.1475 473.5,209.8875 462,222.1875 C417.37,269.8875 387.05,340.8575 371.7,383.1775 " fill="none" id="remote_proxy-to-nginx" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="369.99,387.9375,376.8058,380.828,371.6861,383.234,369.2802,378.1143,369.99,387.9375" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[fab8689ddda3c2cb0bc5d52ba1764e27]
link nginx to stroom_auth_ui_nginx--><path d="M353.72,451.3875 C347.25,483.0775 337.15,532.4775 330.31,565.9075 " fill="none" id="nginx-to-stroom_auth_ui_nginx" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="329.25,571.1375,334.9689,563.1191,330.2498,566.2385,327.1304,561.5194,329.25,571.1375" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[bd542ee22d6f7e143c45175079b67844]
link nginx to stroom_auth_service_dropwiz--><path d="M392.23,451.1975 C402.97,461.3775 415,472.7675 426,483.1875 C455.88,511.4975 489.76,543.6175 514.71,567.2675 " fill="none" id="nginx-to-stroom_auth_service_dropwiz" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="518.63,570.9875,514.8544,561.8911,515.0029,567.546,509.348,567.6945,518.63,570.9875" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[68fc72446225a9f6e1cf366c7b41b138]
@startuml

title
    ==Stroom multi-node mixed-economy deployment
    Stroom services in Docker
    Stroom and MySQL on bare OS
end title

skinparam rectangle {
	roundCorner<<container>> 25
}

node "Datafeed client host" as dataload_client_host <<device>> {
    node "Event generator" as dataload_client_app <<application>>
}

node "User desktop host" as ui_client_host <<device>> {
    node "Web browser" as ui_client_browser <<web browser>>
}

node "Remote stroom-proxy host" as remote_proxy_host <<device>> {
    node "stroom-proxy" as remote_proxy <<application>>
}

rectangle "stroom estate" {
    node "Database host" as database_host <<device>> {
        database stroom_all_dbs <<mysql>> {
            storage "stroom" as stroom_db <<database>>
            storage "stats" as stroom_stats_db <<database>>
            storage "auth" as stroom_auth_db <<database>>
        }
    }

    node "Services host" as services_host <<device>> {
        rectangle "nginx" as nginx_container <<container>>{
            node "nginx" as nginx <<web server>>
        }
        rectangle "stroom-auth-ui" as stroom_auth_ui_container <<container>>{
            node "stroom-auth-ui nginx" as stroom_auth_ui_nginx <<web server>>
        }
        rectangle "stroom-auth-service" as stroom_auth_service_container <<container>>{
            node "stroom-auth-service" as stroom_auth_service_dropwiz <<java app>>
        }
        rectangle "stroom-log-sender" as stroom_log_sender <<container>>{
            node "stroom-log-sender" as stroom_log_sender_script <<script>>
        }

        stroom_log_sender_script -left-> nginx
    }

    !function $concat($name, $id)
    !return $name + $id
    !endfunction

    ' Procedure to generate a stroom host with links to and from it
    !procedure add_stroom_host($node_id)
        !$host_name=$concat("stroom_host_", $node_id)
        !$stroom_dropwiz_name=$concat("stroom_dropwiz_", $node_id)
        !$stroom_proxy_dropwiz_name=$concat("stroom_proxy_dropwiz_", $node_id)

        node "$concat("stroom host ", $node_id)" as $host_name <<device>> {
            node "$concat("stroom ", $node_id)" as $stroom_dropwiz_name <<java app>>
            node "$concat("stroom-proxy (local) ", $node_id)" as $stroom_proxy_dropwiz_name <<java app>>
        }
        ' Database connections
        $stroom_dropwiz_name - -> stroom_db
        $stroom_dropwiz_name - -> stroom_stats_db
        ' API Gateway connection
        $stroom_dropwiz_name - -> nginx
        $stroom_proxy_dropwiz_name - -> nginx

        'Reverse proxy connections
        nginx - -> $stroom_dropwiz_name
        nginx - -> $stroom_proxy_dropwiz_name
    !endprocedure

    together {
        add_stroom_host("1")
        add_stroom_host("2")
    }
}

'DB connections
stroom_auth_service_dropwiz - -> stroom_auth_db

'Client connections
ui_client_browser - -> nginx
dataload_client_app - -> nginx
remote_proxy - -> nginx

'Reverse proxy connections
nginx - -> stroom_auth_ui_nginx
nginx - -> stroom_auth_service_dropwiz


' see http://plantuml.com/skinparam & https://github.com/plantuml/plantuml/pull/31

'skinparam handwritten true
'skinparam monochrome reverse
'skinparam backgroundColor DimGrey
'skinparam ClassBackgroundColor DimGrey
'skinparam ClassBorderColor WhiteSmoke
'skinparam backgroundColor transparent

' light theme
'skinparam backgroundColor LightGrey
'skinparam ClassBackgroundColor LightGrey
'skinparam ClassBorderColor CornflowerBlue
'skinparam DatabaseBackgroundColor LightGrey
'skinparam DatabaseBorderColor CornflowerBlue

'hide empty members

@enduml

@startuml

title
    ==Stroom multi-node mixed-economy deployment
    Stroom services in Docker
    Stroom and MySQL on bare OS
end title

skinparam rectangle {
	roundCorner<<container>> 25
}

node "Datafeed client host" as dataload_client_host <<device>> {
    node "Event generator" as dataload_client_app <<application>>
}

node "User desktop host" as ui_client_host <<device>> {
    node "Web browser" as ui_client_browser <<web browser>>
}

node "Remote stroom-proxy host" as remote_proxy_host <<device>> {
    node "stroom-proxy" as remote_proxy <<application>>
}

rectangle "stroom estate" {
    node "Database host" as database_host <<device>> {
        database stroom_all_dbs <<mysql>> {
            storage "stroom" as stroom_db <<database>>
            storage "stats" as stroom_stats_db <<database>>
            storage "auth" as stroom_auth_db <<database>>
        }
    }

    node "Services host" as services_host <<device>> {
        rectangle "nginx" as nginx_container <<container>>{
            node "nginx" as nginx <<web server>>
        }
        rectangle "stroom-auth-ui" as stroom_auth_ui_container <<container>>{
            node "stroom-auth-ui nginx" as stroom_auth_ui_nginx <<web server>>
        }
        rectangle "stroom-auth-service" as stroom_auth_service_container <<container>>{
            node "stroom-auth-service" as stroom_auth_service_dropwiz <<java app>>
        }
        rectangle "stroom-log-sender" as stroom_log_sender <<container>>{
            node "stroom-log-sender" as stroom_log_sender_script <<script>>
        }

        stroom_log_sender_script -left-> nginx
    }



    together {
        
        node "stroom host 1" as stroom_host_1 <<device>> {
            node "stroom 1" as stroom_dropwiz_1 <<java app>>
            node "stroom-proxy (local) 1" as stroom_proxy_dropwiz_1 <<java app>>
        }
        stroom_dropwiz_1 - -> stroom_db
        stroom_dropwiz_1 - -> stroom_stats_db
        stroom_dropwiz_1 - -> nginx
        stroom_proxy_dropwiz_1 - -> nginx

        nginx - -> stroom_dropwiz_1
        nginx - -> stroom_proxy_dropwiz_1
        
        node "stroom host 2" as stroom_host_2 <<device>> {
            node "stroom 2" as stroom_dropwiz_2 <<java app>>
            node "stroom-proxy (local) 2" as stroom_proxy_dropwiz_2 <<java app>>
        }
        stroom_dropwiz_2 - -> stroom_db
        stroom_dropwiz_2 - -> stroom_stats_db
        stroom_dropwiz_2 - -> nginx
        stroom_proxy_dropwiz_2 - -> nginx

        nginx - -> stroom_dropwiz_2
        nginx - -> stroom_proxy_dropwiz_2
    }
}

stroom_auth_service_dropwiz - -> stroom_auth_db

ui_client_browser - -> nginx
dataload_client_app - -> nginx
remote_proxy - -> nginx

nginx - -> stroom_auth_ui_nginx
nginx - -> stroom_auth_service_dropwiz






@enduml

PlantUML version 1.2021.5(Sun Apr 25 11:20:28 GMT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>